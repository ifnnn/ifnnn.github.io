{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Ying\u2019s Learning Notes \u00b6 \u7528\u4e8e\u8bb0\u5f55\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u7684\u968f\u624b\u7b14\u8bb0\u3002","title":"\u9996\u9875"},{"location":"#yings-learning-notes","text":"\u7528\u4e8e\u8bb0\u5f55\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u7684\u968f\u624b\u7b14\u8bb0\u3002","title":"Ying's Learning Notes"},{"location":"about/","text":"Ying Cai \u00b6 blog: http://www.caiying.me twitter: https://twitter.com/realcaiying ins: https://www.instagram.com/realcaiying/","title":"\u5173\u4e8e"},{"location":"about/#ying-cai","text":"blog: http://www.caiying.me twitter: https://twitter.com/realcaiying ins: https://www.instagram.com/realcaiying/","title":"Ying Cai"},{"location":"arch-ddd/","text":"\u9886\u57df\u9a71\u52a8\u5f00\u53d1 \u00b6 \u5f53\u4e2d\u53f0\u9047\u4e0a DDD\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u8bbe\u8ba1\u5fae\u670d\u52a1\uff1f \u57fa\u4e8e DDD \u7684\u5fae\u670d\u52a1\u8bbe\u8ba1\u548c\u5f00\u53d1\u5b9e\u6218","title":"\u9886\u57df\u9a71\u52a8\u5f00\u53d1"},{"location":"arch-ddd/#_1","text":"\u5f53\u4e2d\u53f0\u9047\u4e0a DDD\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u8bbe\u8ba1\u5fae\u670d\u52a1\uff1f \u57fa\u4e8e DDD \u7684\u5fae\u670d\u52a1\u8bbe\u8ba1\u548c\u5f00\u53d1\u5b9e\u6218","title":"\u9886\u57df\u9a71\u52a8\u5f00\u53d1"},{"location":"bigdata-airflow/","text":"\u5b89\u88c5 \u00b6 docker-compose: https://github.com/puckel/docker-airflow Quickstart \u00b6 https://github.com/apache/airflow/tree/v1-10-stable/airflow/example_dags \u6ce8\u610f\u9009\u62e9\u5bf9\u5e94\u7684\u7248\u672c\u5206\u652f\u3002 docker-compose -f docker-compose.yml run --rm webserver airflow create_user --lastname user --firstname admin --username admin --email admin_user@mail.com --role Admin --password admin docker-compose -f docker-compose.yml run --rm webserver airflow create_user --lastname user --firstname view --username view --email view_user@mail.com --role Viewer --password view","title":"airflow"},{"location":"bigdata-airflow/#_1","text":"docker-compose: https://github.com/puckel/docker-airflow","title":"\u5b89\u88c5"},{"location":"bigdata-airflow/#quickstart","text":"https://github.com/apache/airflow/tree/v1-10-stable/airflow/example_dags \u6ce8\u610f\u9009\u62e9\u5bf9\u5e94\u7684\u7248\u672c\u5206\u652f\u3002 docker-compose -f docker-compose.yml run --rm webserver airflow create_user --lastname user --firstname admin --username admin --email admin_user@mail.com --role Admin --password admin docker-compose -f docker-compose.yml run --rm webserver airflow create_user --lastname user --firstname view --username view --email view_user@mail.com --role Viewer --password view","title":"Quickstart"},{"location":"bigdata-overview/","text":"\u00b6 Hadoop \u751f\u6001 \u6570\u636e\u5b58\u50a8\uff1aHDFS\u3001HBase \u6570\u636e\u5904\u7406\uff1aMapReduce\u3001YARN\uff08\u96c6\u7fa4\u548c\u8d44\u6e90\u7ba1\u7406\uff09 \u6570\u636e\u8bbf\u95ee\u5c42\uff1aHive\u3001Pig\u3001Mahout Spark \u66ff\u4ee3 Hadoop \u751f\u6001\u6c47\u603b\u7684 MapReduce\uff0c\u4e0d\u4f9d\u8d56 Hadoop\uff0c\u53ef\u4ee5\u72ec\u7acb\u8fd0\u884c\u4e8e Kubernetes \u7b49 Spark SQL\uff08\u652f\u6301\u7ed3\u6784\u5316\u6570\u636e\uff09 Spark Streaming\uff08\u5904\u7406\u5b9e\u65f6\u6570\u636e\uff09 MLlib\uff08\u673a\u5668\u5b66\u4e60\uff09 GraphX\uff08\u56fe\u8ba1\u7b97\uff09 SparkR\uff08\u7edf\u8ba1\u5206\u6790\uff09","title":"Bigdata overview"},{"location":"bigdata-overview/#_1","text":"Hadoop \u751f\u6001 \u6570\u636e\u5b58\u50a8\uff1aHDFS\u3001HBase \u6570\u636e\u5904\u7406\uff1aMapReduce\u3001YARN\uff08\u96c6\u7fa4\u548c\u8d44\u6e90\u7ba1\u7406\uff09 \u6570\u636e\u8bbf\u95ee\u5c42\uff1aHive\u3001Pig\u3001Mahout Spark \u66ff\u4ee3 Hadoop \u751f\u6001\u6c47\u603b\u7684 MapReduce\uff0c\u4e0d\u4f9d\u8d56 Hadoop\uff0c\u53ef\u4ee5\u72ec\u7acb\u8fd0\u884c\u4e8e Kubernetes \u7b49 Spark SQL\uff08\u652f\u6301\u7ed3\u6784\u5316\u6570\u636e\uff09 Spark Streaming\uff08\u5904\u7406\u5b9e\u65f6\u6570\u636e\uff09 MLlib\uff08\u673a\u5668\u5b66\u4e60\uff09 GraphX\uff08\u56fe\u8ba1\u7b97\uff09 SparkR\uff08\u7edf\u8ba1\u5206\u6790\uff09","title":""},{"location":"biz-weixin-work/","text":"\u4f01\u4e1a\u5fae\u4fe1 \u00b6 \u4f01\u4e1a\u53f7 \u00b6 \u5c31\u76ee\u524d\u7684\u7406\u89e3\u6765\u770b\uff0c\u4f01\u4e1a\u53f7\u8f6c\u79fb\u6210\u4e3a\u4f01\u4e1a\u5fae\u4fe1\u4e2d\u7684\u5e94\u7528 FAQ \u00b6 \u5fae\u4fe1 openid \u8f6c unionid \u7684\u65b9\u6848 \u516c\u4f17\u53f7\u901a\u8fc7\u518d\u6b21\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5f97\u5230 unionid \u5c0f\u7a0b\u5e8f\u65e0\u6cd5\u83b7\u53d6","title":"\u4f01\u4e1a\u5fae\u4fe1"},{"location":"biz-weixin-work/#_1","text":"","title":"\u4f01\u4e1a\u5fae\u4fe1"},{"location":"biz-weixin-work/#_2","text":"\u5c31\u76ee\u524d\u7684\u7406\u89e3\u6765\u770b\uff0c\u4f01\u4e1a\u53f7\u8f6c\u79fb\u6210\u4e3a\u4f01\u4e1a\u5fae\u4fe1\u4e2d\u7684\u5e94\u7528","title":"\u4f01\u4e1a\u53f7"},{"location":"biz-weixin-work/#faq","text":"\u5fae\u4fe1 openid \u8f6c unionid \u7684\u65b9\u6848 \u516c\u4f17\u53f7\u901a\u8fc7\u518d\u6b21\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5f97\u5230 unionid \u5c0f\u7a0b\u5e8f\u65e0\u6cd5\u83b7\u53d6","title":"FAQ"},{"location":"dev-dubbo-monitor/","text":"Dubbo Monitor for prometheus \u00b6 \u8c03\u7528\u94fe\u8def \u00b6 1. MonitorFilter \u7684 onResponse \u00b6 // org.apache.dubbo.monitor.support.MonitorFilter.MonitorListener:onResponse() @Override public void onResponse(Result result, Invoker<?> invoker, Invocation invocation) { if (invoker.getUrl().hasParameter(MONITOR_KEY)) { collect(invoker, invocation, result, RpcContext.getContext().getRemoteHost(), Long.valueOf(invocation.getAttachment(MONITOR_FILTER_START_TIME)), false); getConcurrent(invoker, invocation).decrementAndGet(); // count down } } // org.apache.dubbo.monitor.support.MonitorFilter /** * The collector logic, it will be handled by the default monitor * * @param invoker * @param invocation * @param result the invoke result * @param remoteHost the remote host address * @param start the timestamp the invoke begin * @param error if there is an error on the invoke */ private void collect(Invoker<?> invoker, Invocation invocation, Result result, String remoteHost, long start, boolean error) { try { URL monitorUrl = invoker.getUrl().getUrlParameter(MONITOR_KEY); Monitor monitor = monitorFactory.getMonitor(monitorUrl); if (monitor == null) { return; } URL statisticsURL = createStatisticsUrl(invoker, invocation, result, remoteHost, start, error); monitor.collect(statisticsURL); } catch (Throwable t) { logger.warn(\"Failed to monitor count service \" + invoker.getUrl() + \", cause: \" + t.getMessage(), t); } } 2. \u6839\u636e\u542f\u52a8\u65e5\u5fd7 \u00b6 2020-05-02 17:58:25.201 DEBUG 53784 --- [ main] o.a.d.c.e.AdaptiveClassCodeGenerator : [DUBBO] package org.apache.dubbo.monitor; \u53ef\u770b\u5230 MonitorFactory$Adaptive \u7684\u4ee3\u7801 import org.apache.dubbo.common.extension.ExtensionLoader; public class MonitorFactory$Adaptive implements org.apache.dubbo.monitor.MonitorFactory { public org.apache.dubbo.monitor.Monitor getMonitor(org.apache.dubbo.common.URL arg0) { if (arg0 == null) throw new IllegalArgumentException(\"url == null\"); org.apache.dubbo.common.URL url = arg0; String extName = ( url.getProtocol() == null ? \"dubbo\" : url.getProtocol() ); if(extName == null) throw new IllegalStateException(\"Failed to get extension (org.apache.dubbo.monitor.MonitorFactory) name from url (\" + url.toString() + \") use keys([protocol])\"); org.apache.dubbo.monitor.MonitorFactory extension = (org.apache.dubbo.monitor.MonitorFactory)ExtensionLoader.getExtensionLoader(org.apache.dubbo.monitor.MonitorFactory.class).getExtension(extName); return extension.getMonitor(arg0); } } \u53c2\u6570 org.apache.dubbo.common.URL \u4e3a: dubbo://127.0.0.1:2181/org.apache.dubbo.registry.RegistryService?application=demo3-dubbo-provider&dubbo=2.0.2&logger=slf4j&pid=53784&protocol=registry&qos.enable=false&refer=application%3Ddemo3-dubbo-provider%26dubbo%3D2.0.2%26interface%3Dorg.apache.dubbo.monitor.MonitorService%26logger%3Dslf4j%26pid%3D53784%26qos.enable%3Dfalse%26register.ip%3D192.168.100.230%26release%3D2.7.4.1%26timestamp%3D1588413616161&registry=zookeeper&release=2.7.4.1&timestamp=1588413505148","title":"Dubbo Monitor for prometheus"},{"location":"dev-dubbo-monitor/#dubbo-monitor-for-prometheus","text":"","title":"Dubbo Monitor for prometheus"},{"location":"dev-dubbo-monitor/#_1","text":"","title":"\u8c03\u7528\u94fe\u8def"},{"location":"dev-dubbo-monitor/#1-monitorfilter-onresponse","text":"// org.apache.dubbo.monitor.support.MonitorFilter.MonitorListener:onResponse() @Override public void onResponse(Result result, Invoker<?> invoker, Invocation invocation) { if (invoker.getUrl().hasParameter(MONITOR_KEY)) { collect(invoker, invocation, result, RpcContext.getContext().getRemoteHost(), Long.valueOf(invocation.getAttachment(MONITOR_FILTER_START_TIME)), false); getConcurrent(invoker, invocation).decrementAndGet(); // count down } } // org.apache.dubbo.monitor.support.MonitorFilter /** * The collector logic, it will be handled by the default monitor * * @param invoker * @param invocation * @param result the invoke result * @param remoteHost the remote host address * @param start the timestamp the invoke begin * @param error if there is an error on the invoke */ private void collect(Invoker<?> invoker, Invocation invocation, Result result, String remoteHost, long start, boolean error) { try { URL monitorUrl = invoker.getUrl().getUrlParameter(MONITOR_KEY); Monitor monitor = monitorFactory.getMonitor(monitorUrl); if (monitor == null) { return; } URL statisticsURL = createStatisticsUrl(invoker, invocation, result, remoteHost, start, error); monitor.collect(statisticsURL); } catch (Throwable t) { logger.warn(\"Failed to monitor count service \" + invoker.getUrl() + \", cause: \" + t.getMessage(), t); } }","title":"1. MonitorFilter \u7684onResponse"},{"location":"dev-dubbo-monitor/#2","text":"2020-05-02 17:58:25.201 DEBUG 53784 --- [ main] o.a.d.c.e.AdaptiveClassCodeGenerator : [DUBBO] package org.apache.dubbo.monitor; \u53ef\u770b\u5230 MonitorFactory$Adaptive \u7684\u4ee3\u7801 import org.apache.dubbo.common.extension.ExtensionLoader; public class MonitorFactory$Adaptive implements org.apache.dubbo.monitor.MonitorFactory { public org.apache.dubbo.monitor.Monitor getMonitor(org.apache.dubbo.common.URL arg0) { if (arg0 == null) throw new IllegalArgumentException(\"url == null\"); org.apache.dubbo.common.URL url = arg0; String extName = ( url.getProtocol() == null ? \"dubbo\" : url.getProtocol() ); if(extName == null) throw new IllegalStateException(\"Failed to get extension (org.apache.dubbo.monitor.MonitorFactory) name from url (\" + url.toString() + \") use keys([protocol])\"); org.apache.dubbo.monitor.MonitorFactory extension = (org.apache.dubbo.monitor.MonitorFactory)ExtensionLoader.getExtensionLoader(org.apache.dubbo.monitor.MonitorFactory.class).getExtension(extName); return extension.getMonitor(arg0); } } \u53c2\u6570 org.apache.dubbo.common.URL \u4e3a: dubbo://127.0.0.1:2181/org.apache.dubbo.registry.RegistryService?application=demo3-dubbo-provider&dubbo=2.0.2&logger=slf4j&pid=53784&protocol=registry&qos.enable=false&refer=application%3Ddemo3-dubbo-provider%26dubbo%3D2.0.2%26interface%3Dorg.apache.dubbo.monitor.MonitorService%26logger%3Dslf4j%26pid%3D53784%26qos.enable%3Dfalse%26register.ip%3D192.168.100.230%26release%3D2.7.4.1%26timestamp%3D1588413616161&registry=zookeeper&release=2.7.4.1&timestamp=1588413505148","title":"2. \u6839\u636e\u542f\u52a8\u65e5\u5fd7"},{"location":"dev-oauth2/","text":"https://projects.spring.io/spring-security-oauth/docs/oauth2.html \u627e\u56fe\u7247 https://github.com/terasolunaorg/terasolunaorg.github.com/blob/master/guideline/5.3.0.RELEASE/en/_images/OAuth_OAuth2Architecture.png https://github.com/spring-projects/spring-security/blob/5.3.1.RELEASE/samples/boot/oauth2authorizationserver/README.adoc","title":"Dev oauth2"},{"location":"dev-spring-boot/","text":"\u4e3a\u4ec0\u4e48\u4e0d\u7528 logback.xml \u800c\u7528 logback-spring.xml Spring Boot\u5305\u542b\u8bb8\u591aLogback\u6269\u5c55\uff0c\u53ef\u4ee5\u5e2e\u52a9\u8fdb\u884c\u9ad8\u7ea7\u914d\u7f6e\u3002\u60a8\u53ef\u4ee5\u5728logback-spring.xml\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u8fd9\u4e9b\u6269\u5c55\u540d\u3002\u7531\u4e8e\u6807\u51c6logback.xml\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u8fc7\u65e9\uff0c\u56e0\u6b64\u65e0\u6cd5\u5728\u5176\u4e2d\u4f7f\u7528\u6269\u5c55\u3002\u60a8\u9700\u8981\u4f7f\u7528logback-spring.xml\u6216\u5b9a\u4e49 logging.config\u5c5e\u6027\u3002 \u5b98\u65b9\u63a8\u8350\u4f7f\u7528\u7684xml\u540d\u5b57\u7684\u683c\u5f0f\u4e3a\uff1alogback-spring.xml\u800c\u4e0d\u662flogback.xml\uff0c\u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff0c\u56e0\u4e3a\u5e26spring\u540e\u7f00\u7684\u53ef\u4ee5\u4f7f\u7528 \u8fd9\u4e2a\u6807\u7b7e\u3002 \u5b98\u65b9\u6587\u6863\uff1ahttps://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-custom-log-configuration \u7c7b\u4f3c\u535a\u6587\uff1ahttps://www.cnblogs.com/luckyliulin/p/10815224.html","title":"Dev spring boot"},{"location":"dev-testcase/","text":"https://docs.spring.io/spring-boot/docs/2.3.0.RELEASE/reference/html/spring-boot-features.html#boot-features-testing https://www.cnblogs.com/fnlingnzb-learner/p/12068505.html https://junit.org/junit5/docs/current/user-guide/#api-evolution","title":"Dev testcase"},{"location":"dsa-indexing/","text":"\u7d22\u5f15 \u00b6 BST 1.\u82e5\u4efb\u610f\u7ed3\u70b9\u7684\u5de6\u5b50\u6811\u4e0d\u7a7a\uff0c\u5219\u5de6\u5b50\u6811\u4e0a\u6240\u6709\u7ed3\u70b9\u7684\u503c\u5747\u4e0d\u5927\u4e8e\u5b83\u7684\u6839\u7ed3\u70b9\u7684\u503c\u3002 2.\u82e5\u4efb\u610f\u7ed3\u70b9\u7684\u53f3\u5b50\u6811\u4e0d\u7a7a\uff0c\u5219\u53f3\u5b50\u6811\u4e0a\u6240\u6709\u7ed3\u70b9\u7684\u503c\u5747\u4e0d\u5c0f\u4e8e\u5b83\u7684\u6839\u7ed3\u70b9\u7684\u503c\u3002 3.\u4efb\u610f\u7ed3\u70b9\u7684\u5de6\u3001\u53f3\u5b50\u6811\u4e5f\u5206\u522b\u4e3a\u4e8c\u53c9\u641c\u7d22\u6811\u3002 R/B Tree \u7ea2\u9ed1\u6811\u7684\u7279\u6027: \uff081\uff09\u6bcf\u4e2a\u8282\u70b9\u6216\u8005\u662f\u9ed1\u8272\uff0c\u6216\u8005\u662f\u7ea2\u8272\u3002 \uff082\uff09\u6839\u8282\u70b9\u662f\u9ed1\u8272\u3002 \uff083\uff09\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\uff08NIL\uff09\u662f\u9ed1\u8272\u3002 [\u6ce8\u610f\uff1a\u8fd9\u91cc\u53f6\u5b50\u8282\u70b9\uff0c\u662f\u6307\u4e3a\u7a7a(NIL\u6216NULL)\u7684\u53f6\u5b50\u8282\u70b9\uff01] \uff084\uff09\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u662f\u7ea2\u8272\u7684\uff0c\u5219\u5b83\u7684\u5b50\u8282\u70b9\u5fc5\u987b\u662f\u9ed1\u8272\u7684\u3002 \uff085\uff09\u4ece\u4e00\u4e2a\u8282\u70b9\u5230\u8be5\u8282\u70b9\u7684\u5b50\u5b59\u8282\u70b9\u7684\u6240\u6709\u8def\u5f84\u4e0a\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8282\u70b9\u3002 \u6ce8\u610f\uff1a (01) \u7279\u6027(3)\u4e2d\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u662f\u53ea\u4e3a\u7a7a(NIL\u6216null)\u7684\u8282\u70b9\u3002 (02) \u7279\u6027(5)\uff0c\u786e\u4fdd\u6ca1\u6709\u4e00\u6761\u8def\u5f84\u4f1a\u6bd4\u5176\u4ed6\u8def\u5f84\u957f\u51fa\u4fe9\u500d\u3002\u56e0\u800c\uff0c\u7ea2\u9ed1\u6811\u662f\u76f8\u5bf9\u662f\u63a5\u8fd1\u5e73\u8861\u7684\u4e8c\u53c9\u6811 \u7ea2\u9ed1\u6811\u662f\u6bcf\u4e2a\u8282\u70b9\u90fd\u5e26\u6709\u989c\u8272\u5c5e\u6027\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u989c\u8272\u6216\u7ea2\u8272\u6216\u9ed1\u8272\u3002 [3] \u5728\u4e8c\u53c9\u67e5\u627e\u6811\u5f3a\u5236\u4e00\u822c\u8981\u6c42\u4ee5\u5916\uff0c\u5bf9\u4e8e\u4efb\u4f55\u6709\u6548\u7684\u7ea2\u9ed1\u6811\u6211\u4eec\u589e\u52a0\u4e86\u5982\u4e0b\u7684\u989d\u5916\u8981\u6c42: \u6027\u8d281. \u8282\u70b9\u662f\u7ea2\u8272\u6216\u9ed1\u8272\u3002 [3] \u6027\u8d282. \u6839\u8282\u70b9\u662f\u9ed1\u8272\u3002 [3] \u6027\u8d283.\u6240\u6709\u53f6\u5b50\u90fd\u662f\u9ed1\u8272\u3002\uff08\u53f6\u5b50\u662fNUIL\u8282\u70b9\uff09 [3] \u6027\u8d284. \u6bcf\u4e2a\u7ea2\u8272\u8282\u70b9\u7684\u4e24\u4e2a\u5b50\u8282\u70b9\u90fd\u662f\u9ed1\u8272\u3002\uff08\u4ece\u6bcf\u4e2a\u53f6\u5b50\u5230\u6839\u7684\u6240\u6709\u8def\u5f84\u4e0a\u4e0d\u80fd\u6709\u4e24\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9\uff09 \u6027\u8d285.. \u4ece\u4efb\u4e00\u8282\u70b9\u5230\u5176\u6bcf\u4e2a\u53f6\u5b50\u7684\u6240\u6709\u8def\u5f84\u90fd\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\u3002 [3] \u8fd9\u4e9b\u7ea6\u675f\u5f3a\u5236\u4e86\u7ea2\u9ed1\u6811\u7684\u5173\u952e\u6027\u8d28: \u4ece\u6839\u5230\u53f6\u5b50\u7684\u6700\u957f\u7684\u53ef\u80fd\u8def\u5f84\u4e0d\u591a\u4e8e\u6700\u77ed\u7684\u53ef\u80fd\u8def\u5f84\u7684\u4e24\u500d\u957f\u3002\u7ed3\u679c\u662f\u8fd9\u4e2a\u6811\u5927\u81f4\u4e0a\u662f\u5e73\u8861\u7684\u3002\u56e0\u4e3a\u64cd\u4f5c\u6bd4\u5982\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u67d0\u4e2a\u503c\u7684\u6700\u574f\u60c5\u51b5\u65f6\u95f4\u90fd\u8981\u6c42\u4e0e\u6811\u7684\u9ad8\u5ea6\u6210\u6bd4\u4f8b\uff0c\u8fd9\u4e2a\u5728\u9ad8\u5ea6\u4e0a\u7684\u7406\u8bba\u4e0a\u9650\u5141\u8bb8\u7ea2\u9ed1\u6811\u5728\u6700\u574f\u60c5\u51b5\u4e0b\u90fd\u662f\u9ad8\u6548\u7684\uff0c\u800c\u4e0d\u540c\u4e8e\u666e\u901a\u7684\u4e8c\u53c9\u67e5\u627e\u6811\u3002 [3] \u662f\u6027\u8d284\u5bfc\u81f4\u8def\u5f84\u4e0a\u4e0d\u80fd\u6709\u4e24\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9\u786e\u4fdd\u4e86\u8fd9\u4e2a\u7ed3\u679c\u3002\u6700\u77ed\u7684\u53ef\u80fd\u8def\u5f84\u90fd\u662f\u9ed1\u8272\u8282\u70b9\uff0c\u6700\u957f\u7684\u53ef\u80fd\u8def\u5f84\u6709\u4ea4\u66ff\u7684\u7ea2\u8272\u548c\u9ed1\u8272\u8282\u70b9\u3002\u56e0\u4e3a\u6839\u636e\u6027\u8d285\u6240\u6709\u6700\u957f\u7684\u8def\u5f84\u90fd\u6709\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\uff0c\u8fd9\u5c31\u8868\u660e\u4e86\u6ca1\u6709\u8def\u5f84\u80fd\u591a\u4e8e\u4efb\u4f55\u5176\u4ed6\u8def\u5f84\u7684\u4e24\u500d\u957f\u3002 [3] \u56e0\u4e3a\u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u7279\u5316\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u6240\u4ee5\u7ea2\u9ed1\u6811\u4e0a\u7684\u53ea\u8bfb\u64cd\u884c\u4e0e\u666e\u901a\u4e8c\u53c9\u67e5\u627e\u6811\u76f8\u540c\u3002 [2] B Tree \u6839\u636e Knuth \u7684\u5b9a\u4e49\uff0c\u4e00\u4e2a m \u9636\u7684B\u6811\u662f\u4e00\u4e2a\u6709\u4ee5\u4e0b\u5c5e\u6027\u7684\u6811\uff1a \u6bcf\u4e00\u4e2a\u8282\u70b9\u6700\u591a\u6709 m \u4e2a\u5b50\u8282\u70b9 \u6bcf\u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\uff08\u9664\u6839\u8282\u70b9\uff09\u6700\u5c11\u6709 \u2308m/2\u2309 \u4e2a\u5b50\u8282\u70b9 \u5982\u679c\u6839\u8282\u70b9\u4e0d\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u5b83\u81f3\u5c11\u6709\u4e24\u4e2a\u5b50\u8282\u70b9 \u6709 k \u4e2a\u5b50\u8282\u70b9\u7684\u975e\u53f6\u5b50\u8282\u70b9\u62e5\u6709 k \u2212 1 \u4e2a\u952e \u6240\u6709\u7684\u53f6\u5b50\u8282\u70b9\u90fd\u5728\u540c\u4e00\u5c42 \u6bcf\u4e00\u4e2a\u5185\u90e8\u8282\u70b9\u7684\u952e\u5c06\u8282\u70b9\u7684\u5b50\u6811\u5206\u5f00\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a\u5185\u90e8\u8282\u70b9\u67093\u4e2a\u5b50\u8282\u70b9\uff08\u5b50\u6811\uff09\uff0c\u90a3\u4e48\u5b83\u5c31\u5fc5\u987b\u6709\u4e24\u4e2a\u952e\uff1a a1 \u548c a2 \u3002\u5de6\u8fb9\u5b50\u6811\u7684\u6240\u6709\u503c\u90fd\u5fc5\u987b\u5c0f\u4e8e a1 \uff0c\u4e2d\u95f4\u5b50\u6811\u7684\u6240\u6709\u503c\u90fd\u5fc5\u987b\u5728 a1 \u548ca2 \u4e4b\u95f4\uff0c\u53f3\u8fb9\u5b50\u6811\u7684\u6240\u6709\u503c\u90fd\u5fc5\u987b\u5927\u4e8e a2 \u3002 B+ Tree \u5728B+\u6811\u4e2d\u7684\u8282\u70b9\u901a\u5e38\u88ab\u8868\u793a\u4e3a\u4e00\u7ec4\u6709\u5e8f\u7684\u5143\u7d20\u548c\u5b50\u6307\u9488\u3002\u5982\u679c\u6b64B+\u6811\u7684\u9636\u6570\u662fm\uff0c\u5219\u9664\u4e86\u6839\u4e4b\u5916\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u5305\u542b\u6700\u5c11 m/2 \u4e2a\u5143\u7d20\u6700\u591a m-1 \u4e2a\u5143\u7d20\uff0c\u5bf9\u4e8e\u4efb\u610f\u7684\u7ed3\u70b9\u6709\u6700\u591a m \u4e2a\u5b50\u6307\u9488\u3002\u5bf9\u4e8e\u6240\u6709\u5185\u90e8\u8282\u70b9\uff0c\u5b50\u6307\u9488\u7684\u6570\u76ee\u603b\u662f\u6bd4\u5143\u7d20\u7684\u6570\u76ee\u591a\u4e00\u4e2a\u3002\u6240\u6709\u53f6\u5b50\u90fd\u5728\u76f8\u540c\u7684\u9ad8\u5ea6\u4e0a\uff0c\u53f6\u7ed3\u70b9\u672c\u8eab\u6309\u5173\u952e\u5b57\u5927\u5c0f\u4ece\u5c0f\u5230\u5927\u94fe\u63a5\u3002 Trie Tree AVL Tree Splay Tree","title":"\u7d22\u5f15"},{"location":"dsa-indexing/#_1","text":"BST 1.\u82e5\u4efb\u610f\u7ed3\u70b9\u7684\u5de6\u5b50\u6811\u4e0d\u7a7a\uff0c\u5219\u5de6\u5b50\u6811\u4e0a\u6240\u6709\u7ed3\u70b9\u7684\u503c\u5747\u4e0d\u5927\u4e8e\u5b83\u7684\u6839\u7ed3\u70b9\u7684\u503c\u3002 2.\u82e5\u4efb\u610f\u7ed3\u70b9\u7684\u53f3\u5b50\u6811\u4e0d\u7a7a\uff0c\u5219\u53f3\u5b50\u6811\u4e0a\u6240\u6709\u7ed3\u70b9\u7684\u503c\u5747\u4e0d\u5c0f\u4e8e\u5b83\u7684\u6839\u7ed3\u70b9\u7684\u503c\u3002 3.\u4efb\u610f\u7ed3\u70b9\u7684\u5de6\u3001\u53f3\u5b50\u6811\u4e5f\u5206\u522b\u4e3a\u4e8c\u53c9\u641c\u7d22\u6811\u3002 R/B Tree \u7ea2\u9ed1\u6811\u7684\u7279\u6027: \uff081\uff09\u6bcf\u4e2a\u8282\u70b9\u6216\u8005\u662f\u9ed1\u8272\uff0c\u6216\u8005\u662f\u7ea2\u8272\u3002 \uff082\uff09\u6839\u8282\u70b9\u662f\u9ed1\u8272\u3002 \uff083\uff09\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\uff08NIL\uff09\u662f\u9ed1\u8272\u3002 [\u6ce8\u610f\uff1a\u8fd9\u91cc\u53f6\u5b50\u8282\u70b9\uff0c\u662f\u6307\u4e3a\u7a7a(NIL\u6216NULL)\u7684\u53f6\u5b50\u8282\u70b9\uff01] \uff084\uff09\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u662f\u7ea2\u8272\u7684\uff0c\u5219\u5b83\u7684\u5b50\u8282\u70b9\u5fc5\u987b\u662f\u9ed1\u8272\u7684\u3002 \uff085\uff09\u4ece\u4e00\u4e2a\u8282\u70b9\u5230\u8be5\u8282\u70b9\u7684\u5b50\u5b59\u8282\u70b9\u7684\u6240\u6709\u8def\u5f84\u4e0a\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8282\u70b9\u3002 \u6ce8\u610f\uff1a (01) \u7279\u6027(3)\u4e2d\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u662f\u53ea\u4e3a\u7a7a(NIL\u6216null)\u7684\u8282\u70b9\u3002 (02) \u7279\u6027(5)\uff0c\u786e\u4fdd\u6ca1\u6709\u4e00\u6761\u8def\u5f84\u4f1a\u6bd4\u5176\u4ed6\u8def\u5f84\u957f\u51fa\u4fe9\u500d\u3002\u56e0\u800c\uff0c\u7ea2\u9ed1\u6811\u662f\u76f8\u5bf9\u662f\u63a5\u8fd1\u5e73\u8861\u7684\u4e8c\u53c9\u6811 \u7ea2\u9ed1\u6811\u662f\u6bcf\u4e2a\u8282\u70b9\u90fd\u5e26\u6709\u989c\u8272\u5c5e\u6027\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u989c\u8272\u6216\u7ea2\u8272\u6216\u9ed1\u8272\u3002 [3] \u5728\u4e8c\u53c9\u67e5\u627e\u6811\u5f3a\u5236\u4e00\u822c\u8981\u6c42\u4ee5\u5916\uff0c\u5bf9\u4e8e\u4efb\u4f55\u6709\u6548\u7684\u7ea2\u9ed1\u6811\u6211\u4eec\u589e\u52a0\u4e86\u5982\u4e0b\u7684\u989d\u5916\u8981\u6c42: \u6027\u8d281. \u8282\u70b9\u662f\u7ea2\u8272\u6216\u9ed1\u8272\u3002 [3] \u6027\u8d282. \u6839\u8282\u70b9\u662f\u9ed1\u8272\u3002 [3] \u6027\u8d283.\u6240\u6709\u53f6\u5b50\u90fd\u662f\u9ed1\u8272\u3002\uff08\u53f6\u5b50\u662fNUIL\u8282\u70b9\uff09 [3] \u6027\u8d284. \u6bcf\u4e2a\u7ea2\u8272\u8282\u70b9\u7684\u4e24\u4e2a\u5b50\u8282\u70b9\u90fd\u662f\u9ed1\u8272\u3002\uff08\u4ece\u6bcf\u4e2a\u53f6\u5b50\u5230\u6839\u7684\u6240\u6709\u8def\u5f84\u4e0a\u4e0d\u80fd\u6709\u4e24\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9\uff09 \u6027\u8d285.. \u4ece\u4efb\u4e00\u8282\u70b9\u5230\u5176\u6bcf\u4e2a\u53f6\u5b50\u7684\u6240\u6709\u8def\u5f84\u90fd\u5305\u542b\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\u3002 [3] \u8fd9\u4e9b\u7ea6\u675f\u5f3a\u5236\u4e86\u7ea2\u9ed1\u6811\u7684\u5173\u952e\u6027\u8d28: \u4ece\u6839\u5230\u53f6\u5b50\u7684\u6700\u957f\u7684\u53ef\u80fd\u8def\u5f84\u4e0d\u591a\u4e8e\u6700\u77ed\u7684\u53ef\u80fd\u8def\u5f84\u7684\u4e24\u500d\u957f\u3002\u7ed3\u679c\u662f\u8fd9\u4e2a\u6811\u5927\u81f4\u4e0a\u662f\u5e73\u8861\u7684\u3002\u56e0\u4e3a\u64cd\u4f5c\u6bd4\u5982\u63d2\u5165\u3001\u5220\u9664\u548c\u67e5\u627e\u67d0\u4e2a\u503c\u7684\u6700\u574f\u60c5\u51b5\u65f6\u95f4\u90fd\u8981\u6c42\u4e0e\u6811\u7684\u9ad8\u5ea6\u6210\u6bd4\u4f8b\uff0c\u8fd9\u4e2a\u5728\u9ad8\u5ea6\u4e0a\u7684\u7406\u8bba\u4e0a\u9650\u5141\u8bb8\u7ea2\u9ed1\u6811\u5728\u6700\u574f\u60c5\u51b5\u4e0b\u90fd\u662f\u9ad8\u6548\u7684\uff0c\u800c\u4e0d\u540c\u4e8e\u666e\u901a\u7684\u4e8c\u53c9\u67e5\u627e\u6811\u3002 [3] \u662f\u6027\u8d284\u5bfc\u81f4\u8def\u5f84\u4e0a\u4e0d\u80fd\u6709\u4e24\u4e2a\u8fde\u7eed\u7684\u7ea2\u8272\u8282\u70b9\u786e\u4fdd\u4e86\u8fd9\u4e2a\u7ed3\u679c\u3002\u6700\u77ed\u7684\u53ef\u80fd\u8def\u5f84\u90fd\u662f\u9ed1\u8272\u8282\u70b9\uff0c\u6700\u957f\u7684\u53ef\u80fd\u8def\u5f84\u6709\u4ea4\u66ff\u7684\u7ea2\u8272\u548c\u9ed1\u8272\u8282\u70b9\u3002\u56e0\u4e3a\u6839\u636e\u6027\u8d285\u6240\u6709\u6700\u957f\u7684\u8def\u5f84\u90fd\u6709\u76f8\u540c\u6570\u76ee\u7684\u9ed1\u8272\u8282\u70b9\uff0c\u8fd9\u5c31\u8868\u660e\u4e86\u6ca1\u6709\u8def\u5f84\u80fd\u591a\u4e8e\u4efb\u4f55\u5176\u4ed6\u8def\u5f84\u7684\u4e24\u500d\u957f\u3002 [3] \u56e0\u4e3a\u7ea2\u9ed1\u6811\u662f\u4e00\u79cd\u7279\u5316\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u6240\u4ee5\u7ea2\u9ed1\u6811\u4e0a\u7684\u53ea\u8bfb\u64cd\u884c\u4e0e\u666e\u901a\u4e8c\u53c9\u67e5\u627e\u6811\u76f8\u540c\u3002 [2] B Tree \u6839\u636e Knuth \u7684\u5b9a\u4e49\uff0c\u4e00\u4e2a m \u9636\u7684B\u6811\u662f\u4e00\u4e2a\u6709\u4ee5\u4e0b\u5c5e\u6027\u7684\u6811\uff1a \u6bcf\u4e00\u4e2a\u8282\u70b9\u6700\u591a\u6709 m \u4e2a\u5b50\u8282\u70b9 \u6bcf\u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\uff08\u9664\u6839\u8282\u70b9\uff09\u6700\u5c11\u6709 \u2308m/2\u2309 \u4e2a\u5b50\u8282\u70b9 \u5982\u679c\u6839\u8282\u70b9\u4e0d\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u5b83\u81f3\u5c11\u6709\u4e24\u4e2a\u5b50\u8282\u70b9 \u6709 k \u4e2a\u5b50\u8282\u70b9\u7684\u975e\u53f6\u5b50\u8282\u70b9\u62e5\u6709 k \u2212 1 \u4e2a\u952e \u6240\u6709\u7684\u53f6\u5b50\u8282\u70b9\u90fd\u5728\u540c\u4e00\u5c42 \u6bcf\u4e00\u4e2a\u5185\u90e8\u8282\u70b9\u7684\u952e\u5c06\u8282\u70b9\u7684\u5b50\u6811\u5206\u5f00\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a\u5185\u90e8\u8282\u70b9\u67093\u4e2a\u5b50\u8282\u70b9\uff08\u5b50\u6811\uff09\uff0c\u90a3\u4e48\u5b83\u5c31\u5fc5\u987b\u6709\u4e24\u4e2a\u952e\uff1a a1 \u548c a2 \u3002\u5de6\u8fb9\u5b50\u6811\u7684\u6240\u6709\u503c\u90fd\u5fc5\u987b\u5c0f\u4e8e a1 \uff0c\u4e2d\u95f4\u5b50\u6811\u7684\u6240\u6709\u503c\u90fd\u5fc5\u987b\u5728 a1 \u548ca2 \u4e4b\u95f4\uff0c\u53f3\u8fb9\u5b50\u6811\u7684\u6240\u6709\u503c\u90fd\u5fc5\u987b\u5927\u4e8e a2 \u3002 B+ Tree \u5728B+\u6811\u4e2d\u7684\u8282\u70b9\u901a\u5e38\u88ab\u8868\u793a\u4e3a\u4e00\u7ec4\u6709\u5e8f\u7684\u5143\u7d20\u548c\u5b50\u6307\u9488\u3002\u5982\u679c\u6b64B+\u6811\u7684\u9636\u6570\u662fm\uff0c\u5219\u9664\u4e86\u6839\u4e4b\u5916\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u5305\u542b\u6700\u5c11 m/2 \u4e2a\u5143\u7d20\u6700\u591a m-1 \u4e2a\u5143\u7d20\uff0c\u5bf9\u4e8e\u4efb\u610f\u7684\u7ed3\u70b9\u6709\u6700\u591a m \u4e2a\u5b50\u6307\u9488\u3002\u5bf9\u4e8e\u6240\u6709\u5185\u90e8\u8282\u70b9\uff0c\u5b50\u6307\u9488\u7684\u6570\u76ee\u603b\u662f\u6bd4\u5143\u7d20\u7684\u6570\u76ee\u591a\u4e00\u4e2a\u3002\u6240\u6709\u53f6\u5b50\u90fd\u5728\u76f8\u540c\u7684\u9ad8\u5ea6\u4e0a\uff0c\u53f6\u7ed3\u70b9\u672c\u8eab\u6309\u5173\u952e\u5b57\u5927\u5c0f\u4ece\u5c0f\u5230\u5927\u94fe\u63a5\u3002 Trie Tree AVL Tree Splay Tree","title":"\u7d22\u5f15"},{"location":"dsa-sort/","text":"\u6392\u5e8f \u00b6 \u6bd4\u8f83\u6392\u5e8f \u00b6 \u6392\u5e8f\u53ef\u89c6\u5316 \u5192\u6ce1\u6392\u5e8f \u00b6 void bubbleSort(int arr[]) { int n = arr.length; for (int i = 0; i < n-1; i++) for (int j = 0; j < n-i-1; j++) if (arr[j] > arr[j+1]) { // swap arr[j+1] and arr[i] int temp = arr[j]; arr[j] = arr[j+1]; arr[j+1] = temp; } } // An optimized version of Bubble Sort void bubbleSort(int arr[], int n) { int i, j, temp; boolean swapped; for (i = 0; i < n - 1; i++) { swapped = false; for (j = 0; j < n - i - 1; j++) { if (arr[j] > arr[j + 1]) { // swap arr[j] and arr[j+1] temp = arr[j]; arr[j] = arr[j + 1]; arr[j + 1] = temp; swapped = true; } } // IF no two elements were // swapped by inner loop, then break if (swapped == false) break; } } \u9009\u62e9\u6392\u5e8f \u00b6 void selectionSort(int arr[]) { int n = arr.length; // One by one move boundary of unsorted subarray for (int i = 0; i < n-1; i++) { // Find the minimum element in unsorted array int min_idx = i; for (int j = i+1; j < n; j++) if (arr[j] < arr[min_idx]) min_idx = j; // Swap the found minimum element with the first // element int temp = arr[min_idx]; arr[min_idx] = arr[i]; arr[i] = temp; } } \u63d2\u5165\u6392\u5e8f \u00b6 void insertionSort(int arr[]) { int n = arr.length; for (int i = 1; i < n; ++i) { int key = arr[i]; int j = i - 1; /* Move elements of arr[0..i-1], that are greater than key, to one position ahead of their current position */ while (j >= 0 && arr[j] > key) { arr[j + 1] = arr[j]; j = j - 1; } arr[j + 1] = key; } } \u5f52\u5e76\u6392\u5e8f \u00b6 // Merges two subarrays of arr[]. // First subarray is arr[l..m] // Second subarray is arr[m+1..r] void merge(int arr[], int l, int m, int r) { // Find sizes of two subarrays to be merged int n1 = m - l + 1; int n2 = r - m; /* Create temp arrays */ int L[] = new int[n1]; int R[] = new int[n2]; /*Copy data to temp arrays*/ for (int i = 0; i < n1; ++i) L[i] = arr[l + i]; for (int j = 0; j < n2; ++j) R[j] = arr[m + 1 + j]; /* Merge the temp arrays */ // Initial indexes of first and second subarrays int i = 0, j = 0; // Initial index of merged subarry array int k = l; while (i < n1 && j < n2) { if (L[i] <= R[j]) { arr[k] = L[i]; i++; } else { arr[k] = R[j]; j++; } k++; } /* Copy remaining elements of L[] if any */ while (i < n1) { arr[k] = L[i]; i++; k++; } /* Copy remaining elements of R[] if any */ while (j < n2) { arr[k] = R[j]; j++; k++; } } // Main function that sorts arr[l..r] using merge() void sort(int arr[], int l, int r) { if (l < r) { // Find the middle point int m = (l + r) / 2; // Sort first and second halves sort(arr, l, m); sort(arr, m + 1, r); // Merge the sorted halves merge(arr, l, m, r); } } \u5e0c\u5c14\u6392\u5e8f \u00b6 /* function to sort arr using shellSort */ int sort(int arr[]) { int n = arr.length; // Start with a big gap, then reduce the gap for (int gap = n/2; gap > 0; gap /= 2) { // Do a gapped insertion sort for this gap size. // The first gap elements a[0..gap-1] are already // in gapped order keep adding one more element // until the entire array is gap sorted for (int i = gap; i < n; i += 1) { // add a[i] to the elements that have been gap // sorted save a[i] in temp and make a hole at // position i int temp = arr[i]; // shift earlier gap-sorted elements up until // the correct location for a[i] is found int j; for (j = i; j >= gap && arr[j - gap] > temp; j -= gap) arr[j] = arr[j - gap]; // put temp (the original a[i]) in its correct // location arr[j] = temp; } } return 0; } \u5feb\u901f\u6392\u5e8f \u00b6 /* This function takes last element as pivot, places the pivot element at its correct position in sorted array, and places all smaller (smaller than pivot) to left of pivot and all greater elements to right of pivot */ int partition(int arr[], int low, int high) { int pivot = arr[high]; int i = (low-1); // index of smaller element for (int j=low; j<high; j++) { // If current element is smaller than the pivot if (arr[j] < pivot) { i++; // swap arr[i] and arr[j] int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; } } // swap arr[i+1] and arr[high] (or pivot) int temp = arr[i+1]; arr[i+1] = arr[high]; arr[high] = temp; return i+1; } /* The main function that implements QuickSort() arr[] --> Array to be sorted, low --> Starting index, high --> Ending index */ void sort(int arr[], int low, int high) { if (low < high) { /* pi is partitioning index, arr[pi] is now at right place */ int pi = partition(arr, low, high); // Recursively sort elements before // partition and after partition sort(arr, low, pi-1); sort(arr, pi+1, high); } } \u5806\u6392\u5e8f \u00b6 void sort(int arr[]) { int n = arr.length; // Build heap (rearrange array) for (int i = n / 2 - 1; i >= 0; i--) heapify(arr, n, i); // One by one extract an element from heap for (int i=n-1; i>0; i--) { // Move current root to end int temp = arr[0]; arr[0] = arr[i]; arr[i] = temp; // call max heapify on the reduced heap heapify(arr, i, 0); } } // To heapify a subtree rooted with node i which is // an index in arr[]. n is size of heap void heapify(int arr[], int n, int i) { int largest = i; // Initialize largest as root int l = 2*i + 1; // left = 2*i + 1 int r = 2*i + 2; // right = 2*i + 2 // If left child is larger than root if (l < n && arr[l] > arr[largest]) largest = l; // If right child is larger than largest so far if (r < n && arr[r] > arr[largest]) largest = r; // If largest is not root if (largest != i) { int swap = arr[i]; arr[i] = arr[largest]; arr[largest] = swap; // Recursively heapify the affected sub-tree heapify(arr, n, largest); } } \u57fa\u6570\u6392\u5e8f \u00b6 // A utility function to get maximum value in arr[] int getMax(int arr[], int n) { int mx = arr[0]; for (int i = 1; i < n; i++) if (arr[i] > mx) mx = arr[i]; return mx; } // A function to do counting sort of arr[] according to // the digit represented by exp. void countSort(int arr[], int n, int exp) { int output[] = new int[n]; // output array int i; int count[] = new int[10]; Arrays.fill(count,0); // Store count of occurrences in count[] for (i = 0; i < n; i++) count[ (arr[i]/exp)%10 ]++; // Change count[i] so that count[i] now contains // actual position of this digit in output[] for (i = 1; i < 10; i++) count[i] += count[i - 1]; // Build the output array for (i = n - 1; i >= 0; i--) { output[count[ (arr[i]/exp)%10 ] - 1] = arr[i]; count[ (arr[i]/exp)%10 ]--; } // Copy the output array to arr[], so that arr[] now // contains sorted numbers according to curent digit for (i = 0; i < n; i++) arr[i] = output[i]; } // The main function to that sorts arr[] of size n using // Radix Sort void radixsort(int arr[], int n) { // Find the maximum number to know number of digits int m = getMax(arr, n); // Do counting sort for every digit. Note that instead // of passing digit number, exp is passed. exp is 10^i // where i is current digit number for (int exp = 1; m/exp > 0; exp *= 10) countSort(arr, n, exp); } \u8ba1\u6570\u6392\u5e8f \u00b6 void sort(char arr[]) { int n = arr.length; // The output character array that will have sorted arr char output[] = new char[n]; // Create a count array to store count of inidividul // characters and initialize count array as 0 int count[] = new int[256]; for (int i=0; i<256; ++i) count[i] = 0; // store count of each character for (int i=0; i<n; ++i) ++count[arr[i]]; // Change count[i] so that count[i] now contains actual // position of this character in output array for (int i=1; i<=255; ++i) count[i] += count[i-1]; // Build the output character array // To make it stable we are operating in reverse order. for (int i = n-1; i>=0; i--) { output[count[arr[i]]-1] = arr[i]; --count[arr[i]]; } // Copy the output array to arr, so that arr now // contains sorted characters for (int i = 0; i<n; ++i) arr[i] = output[i]; } \u6876\u6392\u5e8f \u00b6 void bucketSort(int[] intArr, int noOfBuckets){ // Create bucket array List<Integer>[] buckets = new List[noOfBuckets]; // Associate a list with each index // in the bucket array for(int i = 0; i < noOfBuckets; i++){ buckets[i] = new LinkedList<>(); } // Assign numbers from array to the proper bucket // by using hashing function for(int num : intArr){ //System.out.println(\"hash- \" + hash(num)); buckets[hash(num)].add(num); } // sort buckets for(List<Integer> bucket : buckets){ Collections.sort(bucket); } int i = 0; // Merge buckets to get sorted array for(List<Integer> bucket : buckets){ for(int num : bucket){ intArr[i++] = num; } } } // A very simple hash function int hash(int num){ return num/10; } \u9644\u5f55 \u00b6 Data Structure Visualizations \u5e38\u7528\u641c\u7d22\u7b97\u6cd5\u65f6\u95f4\u590d\u6742\u5ea6","title":"\u6392\u5e8f"},{"location":"dsa-sort/#_1","text":"","title":"\u6392\u5e8f"},{"location":"dsa-sort/#_2","text":"\u6392\u5e8f\u53ef\u89c6\u5316","title":"\u6bd4\u8f83\u6392\u5e8f"},{"location":"dsa-sort/#_3","text":"void bubbleSort(int arr[]) { int n = arr.length; for (int i = 0; i < n-1; i++) for (int j = 0; j < n-i-1; j++) if (arr[j] > arr[j+1]) { // swap arr[j+1] and arr[i] int temp = arr[j]; arr[j] = arr[j+1]; arr[j+1] = temp; } } // An optimized version of Bubble Sort void bubbleSort(int arr[], int n) { int i, j, temp; boolean swapped; for (i = 0; i < n - 1; i++) { swapped = false; for (j = 0; j < n - i - 1; j++) { if (arr[j] > arr[j + 1]) { // swap arr[j] and arr[j+1] temp = arr[j]; arr[j] = arr[j + 1]; arr[j + 1] = temp; swapped = true; } } // IF no two elements were // swapped by inner loop, then break if (swapped == false) break; } }","title":"\u5192\u6ce1\u6392\u5e8f"},{"location":"dsa-sort/#_4","text":"void selectionSort(int arr[]) { int n = arr.length; // One by one move boundary of unsorted subarray for (int i = 0; i < n-1; i++) { // Find the minimum element in unsorted array int min_idx = i; for (int j = i+1; j < n; j++) if (arr[j] < arr[min_idx]) min_idx = j; // Swap the found minimum element with the first // element int temp = arr[min_idx]; arr[min_idx] = arr[i]; arr[i] = temp; } }","title":"\u9009\u62e9\u6392\u5e8f"},{"location":"dsa-sort/#_5","text":"void insertionSort(int arr[]) { int n = arr.length; for (int i = 1; i < n; ++i) { int key = arr[i]; int j = i - 1; /* Move elements of arr[0..i-1], that are greater than key, to one position ahead of their current position */ while (j >= 0 && arr[j] > key) { arr[j + 1] = arr[j]; j = j - 1; } arr[j + 1] = key; } }","title":"\u63d2\u5165\u6392\u5e8f"},{"location":"dsa-sort/#_6","text":"// Merges two subarrays of arr[]. // First subarray is arr[l..m] // Second subarray is arr[m+1..r] void merge(int arr[], int l, int m, int r) { // Find sizes of two subarrays to be merged int n1 = m - l + 1; int n2 = r - m; /* Create temp arrays */ int L[] = new int[n1]; int R[] = new int[n2]; /*Copy data to temp arrays*/ for (int i = 0; i < n1; ++i) L[i] = arr[l + i]; for (int j = 0; j < n2; ++j) R[j] = arr[m + 1 + j]; /* Merge the temp arrays */ // Initial indexes of first and second subarrays int i = 0, j = 0; // Initial index of merged subarry array int k = l; while (i < n1 && j < n2) { if (L[i] <= R[j]) { arr[k] = L[i]; i++; } else { arr[k] = R[j]; j++; } k++; } /* Copy remaining elements of L[] if any */ while (i < n1) { arr[k] = L[i]; i++; k++; } /* Copy remaining elements of R[] if any */ while (j < n2) { arr[k] = R[j]; j++; k++; } } // Main function that sorts arr[l..r] using merge() void sort(int arr[], int l, int r) { if (l < r) { // Find the middle point int m = (l + r) / 2; // Sort first and second halves sort(arr, l, m); sort(arr, m + 1, r); // Merge the sorted halves merge(arr, l, m, r); } }","title":"\u5f52\u5e76\u6392\u5e8f"},{"location":"dsa-sort/#_7","text":"/* function to sort arr using shellSort */ int sort(int arr[]) { int n = arr.length; // Start with a big gap, then reduce the gap for (int gap = n/2; gap > 0; gap /= 2) { // Do a gapped insertion sort for this gap size. // The first gap elements a[0..gap-1] are already // in gapped order keep adding one more element // until the entire array is gap sorted for (int i = gap; i < n; i += 1) { // add a[i] to the elements that have been gap // sorted save a[i] in temp and make a hole at // position i int temp = arr[i]; // shift earlier gap-sorted elements up until // the correct location for a[i] is found int j; for (j = i; j >= gap && arr[j - gap] > temp; j -= gap) arr[j] = arr[j - gap]; // put temp (the original a[i]) in its correct // location arr[j] = temp; } } return 0; }","title":"\u5e0c\u5c14\u6392\u5e8f"},{"location":"dsa-sort/#_8","text":"/* This function takes last element as pivot, places the pivot element at its correct position in sorted array, and places all smaller (smaller than pivot) to left of pivot and all greater elements to right of pivot */ int partition(int arr[], int low, int high) { int pivot = arr[high]; int i = (low-1); // index of smaller element for (int j=low; j<high; j++) { // If current element is smaller than the pivot if (arr[j] < pivot) { i++; // swap arr[i] and arr[j] int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; } } // swap arr[i+1] and arr[high] (or pivot) int temp = arr[i+1]; arr[i+1] = arr[high]; arr[high] = temp; return i+1; } /* The main function that implements QuickSort() arr[] --> Array to be sorted, low --> Starting index, high --> Ending index */ void sort(int arr[], int low, int high) { if (low < high) { /* pi is partitioning index, arr[pi] is now at right place */ int pi = partition(arr, low, high); // Recursively sort elements before // partition and after partition sort(arr, low, pi-1); sort(arr, pi+1, high); } }","title":"\u5feb\u901f\u6392\u5e8f"},{"location":"dsa-sort/#_9","text":"void sort(int arr[]) { int n = arr.length; // Build heap (rearrange array) for (int i = n / 2 - 1; i >= 0; i--) heapify(arr, n, i); // One by one extract an element from heap for (int i=n-1; i>0; i--) { // Move current root to end int temp = arr[0]; arr[0] = arr[i]; arr[i] = temp; // call max heapify on the reduced heap heapify(arr, i, 0); } } // To heapify a subtree rooted with node i which is // an index in arr[]. n is size of heap void heapify(int arr[], int n, int i) { int largest = i; // Initialize largest as root int l = 2*i + 1; // left = 2*i + 1 int r = 2*i + 2; // right = 2*i + 2 // If left child is larger than root if (l < n && arr[l] > arr[largest]) largest = l; // If right child is larger than largest so far if (r < n && arr[r] > arr[largest]) largest = r; // If largest is not root if (largest != i) { int swap = arr[i]; arr[i] = arr[largest]; arr[largest] = swap; // Recursively heapify the affected sub-tree heapify(arr, n, largest); } }","title":"\u5806\u6392\u5e8f"},{"location":"dsa-sort/#_10","text":"// A utility function to get maximum value in arr[] int getMax(int arr[], int n) { int mx = arr[0]; for (int i = 1; i < n; i++) if (arr[i] > mx) mx = arr[i]; return mx; } // A function to do counting sort of arr[] according to // the digit represented by exp. void countSort(int arr[], int n, int exp) { int output[] = new int[n]; // output array int i; int count[] = new int[10]; Arrays.fill(count,0); // Store count of occurrences in count[] for (i = 0; i < n; i++) count[ (arr[i]/exp)%10 ]++; // Change count[i] so that count[i] now contains // actual position of this digit in output[] for (i = 1; i < 10; i++) count[i] += count[i - 1]; // Build the output array for (i = n - 1; i >= 0; i--) { output[count[ (arr[i]/exp)%10 ] - 1] = arr[i]; count[ (arr[i]/exp)%10 ]--; } // Copy the output array to arr[], so that arr[] now // contains sorted numbers according to curent digit for (i = 0; i < n; i++) arr[i] = output[i]; } // The main function to that sorts arr[] of size n using // Radix Sort void radixsort(int arr[], int n) { // Find the maximum number to know number of digits int m = getMax(arr, n); // Do counting sort for every digit. Note that instead // of passing digit number, exp is passed. exp is 10^i // where i is current digit number for (int exp = 1; m/exp > 0; exp *= 10) countSort(arr, n, exp); }","title":"\u57fa\u6570\u6392\u5e8f"},{"location":"dsa-sort/#_11","text":"void sort(char arr[]) { int n = arr.length; // The output character array that will have sorted arr char output[] = new char[n]; // Create a count array to store count of inidividul // characters and initialize count array as 0 int count[] = new int[256]; for (int i=0; i<256; ++i) count[i] = 0; // store count of each character for (int i=0; i<n; ++i) ++count[arr[i]]; // Change count[i] so that count[i] now contains actual // position of this character in output array for (int i=1; i<=255; ++i) count[i] += count[i-1]; // Build the output character array // To make it stable we are operating in reverse order. for (int i = n-1; i>=0; i--) { output[count[arr[i]]-1] = arr[i]; --count[arr[i]]; } // Copy the output array to arr, so that arr now // contains sorted characters for (int i = 0; i<n; ++i) arr[i] = output[i]; }","title":"\u8ba1\u6570\u6392\u5e8f"},{"location":"dsa-sort/#_12","text":"void bucketSort(int[] intArr, int noOfBuckets){ // Create bucket array List<Integer>[] buckets = new List[noOfBuckets]; // Associate a list with each index // in the bucket array for(int i = 0; i < noOfBuckets; i++){ buckets[i] = new LinkedList<>(); } // Assign numbers from array to the proper bucket // by using hashing function for(int num : intArr){ //System.out.println(\"hash- \" + hash(num)); buckets[hash(num)].add(num); } // sort buckets for(List<Integer> bucket : buckets){ Collections.sort(bucket); } int i = 0; // Merge buckets to get sorted array for(List<Integer> bucket : buckets){ for(int num : bucket){ intArr[i++] = num; } } } // A very simple hash function int hash(int num){ return num/10; }","title":"\u6876\u6392\u5e8f"},{"location":"dsa-sort/#_13","text":"Data Structure Visualizations \u5e38\u7528\u641c\u7d22\u7b97\u6cd5\u65f6\u95f4\u590d\u6742\u5ea6","title":"\u9644\u5f55"},{"location":"env-dotfiles/","text":"tmux + vim + zsh https://github.com/realcaiying/dotfiles","title":"dotfile"},{"location":"env-linux/","text":"Linux \u7ec8\u7aef\u4e0b\u7684\u9ad8\u6548\u5de5\u5177 \u00b6 \u63a8\u8350\u5de5\u5177 \u5176\u4ed6\u7c7b\u4f3c \u7b80\u4ecb neovim vim \u66f4\u73b0\u4ee3\u5316\u7684 vim zsh \u66f4\u597d\u7528\u7684 shell tmux screen / byobu \u7ec8\u7aef\u590d\u7528\u5de5\u5177 fzf \u547d\u4ee4\u884c\u4e0b\u6a21\u7cca\u641c\u7d22\u5de5\u5177 ag grep / ack \u66f4\u9ad8\u6548\u7b80\u5355\u7684\u6587\u672c\u641c\u7d22\u5de5\u5177 tig git \u7ec8\u7aef\u4e0b\u4ea4\u4e92\u7ba1\u7406 git \u9879\u76ee z autojump / cd \u667a\u80fd\u6a21\u7cca\u641c\u7d22, \u8df3\u8f6c\u76ee\u5f55 dstat iostat, vmstat, ifstat \u4e09\u5408\u4e00 slurm \u7f51\u7edc\u6d41\u91cf\u76d1\u63a7 exa ls \u68c0\u7d22\u76ee\u5f55\u5de5\u5177 fd find \u67e5\u627e\u6587\u4ef6\u548c\u76ee\u5f55 bat cat \u5e26\u8bed\u6cd5\u9ad8\u4eae\u7684\u6587\u4ef6\u67e5\u770b ripgrep grep \u67e5\u627e\u6587\u4ef6\u4e2d\u7684\u5b57\u7b26\u4e32 jq json \u683c\u5f0f\u5316\u5de5\u5177 glances htop / top \u7cfb\u7edf\u76d1\u63a7\u5de5\u5177 axel curl / wget \u4e0b\u8f7d\u5de5\u5177\uff0c\u591a\u7ebf\u7a0b aria2 wget \u4e0b\u8f7d\u5de5\u5177\uff0c\u652f\u6301 BT sz/rz \u4ea4\u4e92\u5f0f\u6587\u4ef6\u4f20\u8f93\uff0c\u4e0a\u4f20\u4e0b\u8f7d\u65b9\u4fbf ranger vim \u98ce\u683c\u6587\u4ef6\u7ba1\u7406\u5668 tldr man \u7f29\u77ed\u8bf4\u660e\u6587\u6863 rsync sftp / scp SSH \u534f\u8bae\u6587\u4ef6\u540c\u6b65 mtr traceroute \u7f51\u7edc\u67e5\u8be2\u5de5\u5177 multitail \u5b9e\u65f6\u76d1\u63a7\u591a\u4e2a\u65e5\u5fd7 ccze \u9ad8\u4eae\u663e\u793a\u65e5\u5fd7 mycli \u4ea4\u4e92\u5f0f\u7ba1\u7406 mysql mitmproxy \u547d\u4ee4\u884c\u6293\u5305\u5de5\u5177 httpie curl \u4ea4\u4e92\u5f0f\u7684 http \u5ba2\u6237\u7aef nnn du \u6587\u4ef6\u5206\u6790\u5de5\u5177 pydf df \u78c1\u76d8\u67e5\u8be2\u5de5\u5177 asciinema \u7ec8\u7aef\u5f55\u5c4f\u5de5\u5177 tpp reveal.js \u547d\u4ee4\u884c\u4e0b\u5199 PPT thefuck \u547d\u4ee4\u884c\u62fc\u5199\u66f4\u6b63","title":"Linux"},{"location":"env-linux/#linux","text":"\u63a8\u8350\u5de5\u5177 \u5176\u4ed6\u7c7b\u4f3c \u7b80\u4ecb neovim vim \u66f4\u73b0\u4ee3\u5316\u7684 vim zsh \u66f4\u597d\u7528\u7684 shell tmux screen / byobu \u7ec8\u7aef\u590d\u7528\u5de5\u5177 fzf \u547d\u4ee4\u884c\u4e0b\u6a21\u7cca\u641c\u7d22\u5de5\u5177 ag grep / ack \u66f4\u9ad8\u6548\u7b80\u5355\u7684\u6587\u672c\u641c\u7d22\u5de5\u5177 tig git \u7ec8\u7aef\u4e0b\u4ea4\u4e92\u7ba1\u7406 git \u9879\u76ee z autojump / cd \u667a\u80fd\u6a21\u7cca\u641c\u7d22, \u8df3\u8f6c\u76ee\u5f55 dstat iostat, vmstat, ifstat \u4e09\u5408\u4e00 slurm \u7f51\u7edc\u6d41\u91cf\u76d1\u63a7 exa ls \u68c0\u7d22\u76ee\u5f55\u5de5\u5177 fd find \u67e5\u627e\u6587\u4ef6\u548c\u76ee\u5f55 bat cat \u5e26\u8bed\u6cd5\u9ad8\u4eae\u7684\u6587\u4ef6\u67e5\u770b ripgrep grep \u67e5\u627e\u6587\u4ef6\u4e2d\u7684\u5b57\u7b26\u4e32 jq json \u683c\u5f0f\u5316\u5de5\u5177 glances htop / top \u7cfb\u7edf\u76d1\u63a7\u5de5\u5177 axel curl / wget \u4e0b\u8f7d\u5de5\u5177\uff0c\u591a\u7ebf\u7a0b aria2 wget \u4e0b\u8f7d\u5de5\u5177\uff0c\u652f\u6301 BT sz/rz \u4ea4\u4e92\u5f0f\u6587\u4ef6\u4f20\u8f93\uff0c\u4e0a\u4f20\u4e0b\u8f7d\u65b9\u4fbf ranger vim \u98ce\u683c\u6587\u4ef6\u7ba1\u7406\u5668 tldr man \u7f29\u77ed\u8bf4\u660e\u6587\u6863 rsync sftp / scp SSH \u534f\u8bae\u6587\u4ef6\u540c\u6b65 mtr traceroute \u7f51\u7edc\u67e5\u8be2\u5de5\u5177 multitail \u5b9e\u65f6\u76d1\u63a7\u591a\u4e2a\u65e5\u5fd7 ccze \u9ad8\u4eae\u663e\u793a\u65e5\u5fd7 mycli \u4ea4\u4e92\u5f0f\u7ba1\u7406 mysql mitmproxy \u547d\u4ee4\u884c\u6293\u5305\u5de5\u5177 httpie curl \u4ea4\u4e92\u5f0f\u7684 http \u5ba2\u6237\u7aef nnn du \u6587\u4ef6\u5206\u6790\u5de5\u5177 pydf df \u78c1\u76d8\u67e5\u8be2\u5de5\u5177 asciinema \u7ec8\u7aef\u5f55\u5c4f\u5de5\u5177 tpp reveal.js \u547d\u4ee4\u884c\u4e0b\u5199 PPT thefuck \u547d\u4ee4\u884c\u62fc\u5199\u66f4\u6b63","title":"Linux \u7ec8\u7aef\u4e0b\u7684\u9ad8\u6548\u5de5\u5177"},{"location":"env-python/","text":"python env \u00b6 anaconda \u914d\u7f6e\u955c\u50cf\uff1a \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 conda list --show-channel-urls conda info -e conda create --name py35 python=3.5 conda remove --name py35 --all source activate py35 / conda activate py373 conda deactivate conda install -n py35 numpy conda update -n py35 numpy conda remove -n py35 numpy conda list -n py35 conda update conda conda update anaconda # \u5047\u8bbe\u5f53\u524d\u73af\u5883\u662fpython 3.5, conda\u4f1a\u5c06python\u5347\u7ea7\u4e3a3.5.x\u7cfb\u5217\u7684\u5f53\u524d\u6700\u65b0\u7248\u672c conda update python conda clean -i # \u91cd\u547d\u540d env conda create --name new_name --clone old_name conda remove --name old_name --all # or its alias: `conda env remove --name old_name` pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host pypi.tuna.tsinghua.edu.cn <packagename> pip install -i http://pypi.douban.com/simple --trusted-host pypi.douban.com <packagename> pip install -i http://mirrors.aliyun.com/pypi/simple --trusted-host mirrors.aliyun.com/pypi/simple/ <packagename> \uff5e/.pip/pip.conf / C:\\Users\\xx\\pip\uff0c\u65b0\u5efa\u6587\u4ef6pip.ini [global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple [install] trusted-host = pypi.tuna.tsinghua.edu.cn pip freeze > requirements.txt pip install -r requirements.txt # pip freeze\u8f93\u51fa\u7684\u662f\u672c\u5730\u73af\u5883\u4e2d\u6240\u6709\u4e09\u65b9\u5305\u4fe1\u606f\uff0c\u4f46\u662f\u4f1a\u6bd4pip list\u5c11\u51e0\u4e2a\u5305\uff0c\u56e0\u4e3apip\uff0cwheel\uff0csetuptools\u7b49\u5305\uff0c\u662f\u81ea\u5e26\u7684\u800c\u65e0\u6cd5(un)install\u7684\uff0c\u5982\u679c\u8981\u663e\u793a\u6240\u6709\u5305\u53ef\u4ee5\u52a0\u4e0a\u53c2\u6570-all\uff0c\u5373pip freeze -all pipreqs /home/project/location # Successfully saved requirements file in /home/project/location/requirements.txt virtualenv virtualenvwrapper # \u6709\u7684\u65f6\u5019virtualenv\u4e5f\u4f1a\u5e26\u6765\u4e00\u4e9b\u95ee\u9898\uff0c\u7531\u4e8evirtualenv\u7684\u542f\u52a8\u3001\u505c\u6b62\u811a\u672c\u90fd\u5728\u7279\u5b9a\u6587\u4ef6\u5939\uff0c\u53ef\u80fd\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u4f60\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\u4e2a\u865a\u62df\u73af\u5883\u6563\u843d\u5728\u7cfb\u7edf\u5404\u5904\uff0c\u4f60\u53ef\u80fd\u5fd8\u8bb0\u5b83\u4eec\u7684\u540d\u5b57\u751a\u81f3\u5fd8\u8bb0\u5b83\u7684\u4f4d\u7f6e\u3002\u600e\u4e48\u6765\u7ba1\u7406virtualenv?\u9274\u4e8evirtualenv\u4e0d\u4fbf\u4e8e\u5bf9\u865a\u62df\u73af\u5883\u96c6\u4e2d\u7ba1\u7406\uff0c\u6240\u4ee5\u63a8\u8350\u76f4\u63a5\u4f7f\u7528virtualenvwrapper\u3002virtualenvwrapper\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u547d\u4ee4\u4f7f\u5f97\u548c\u865a\u62df\u73af\u5883\u5de5\u4f5c\u53d8\u5f97\u4fbf\u5229\u3002\u5b83\u628a\u4f60\u6240\u6709\u7684\u865a\u62df\u73af\u5883\u90fd\u653e\u5728\u4e00\u4e2a\u5730\u65b9\u3002 https://ningyu1.github.io/site/post/67-python-requirements/","title":"Python"},{"location":"env-python/#python-env","text":"anaconda \u914d\u7f6e\u955c\u50cf\uff1a \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 conda list --show-channel-urls conda info -e conda create --name py35 python=3.5 conda remove --name py35 --all source activate py35 / conda activate py373 conda deactivate conda install -n py35 numpy conda update -n py35 numpy conda remove -n py35 numpy conda list -n py35 conda update conda conda update anaconda # \u5047\u8bbe\u5f53\u524d\u73af\u5883\u662fpython 3.5, conda\u4f1a\u5c06python\u5347\u7ea7\u4e3a3.5.x\u7cfb\u5217\u7684\u5f53\u524d\u6700\u65b0\u7248\u672c conda update python conda clean -i # \u91cd\u547d\u540d env conda create --name new_name --clone old_name conda remove --name old_name --all # or its alias: `conda env remove --name old_name` pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host pypi.tuna.tsinghua.edu.cn <packagename> pip install -i http://pypi.douban.com/simple --trusted-host pypi.douban.com <packagename> pip install -i http://mirrors.aliyun.com/pypi/simple --trusted-host mirrors.aliyun.com/pypi/simple/ <packagename> \uff5e/.pip/pip.conf / C:\\Users\\xx\\pip\uff0c\u65b0\u5efa\u6587\u4ef6pip.ini [global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple [install] trusted-host = pypi.tuna.tsinghua.edu.cn pip freeze > requirements.txt pip install -r requirements.txt # pip freeze\u8f93\u51fa\u7684\u662f\u672c\u5730\u73af\u5883\u4e2d\u6240\u6709\u4e09\u65b9\u5305\u4fe1\u606f\uff0c\u4f46\u662f\u4f1a\u6bd4pip list\u5c11\u51e0\u4e2a\u5305\uff0c\u56e0\u4e3apip\uff0cwheel\uff0csetuptools\u7b49\u5305\uff0c\u662f\u81ea\u5e26\u7684\u800c\u65e0\u6cd5(un)install\u7684\uff0c\u5982\u679c\u8981\u663e\u793a\u6240\u6709\u5305\u53ef\u4ee5\u52a0\u4e0a\u53c2\u6570-all\uff0c\u5373pip freeze -all pipreqs /home/project/location # Successfully saved requirements file in /home/project/location/requirements.txt virtualenv virtualenvwrapper # \u6709\u7684\u65f6\u5019virtualenv\u4e5f\u4f1a\u5e26\u6765\u4e00\u4e9b\u95ee\u9898\uff0c\u7531\u4e8evirtualenv\u7684\u542f\u52a8\u3001\u505c\u6b62\u811a\u672c\u90fd\u5728\u7279\u5b9a\u6587\u4ef6\u5939\uff0c\u53ef\u80fd\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u4f60\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\u4e2a\u865a\u62df\u73af\u5883\u6563\u843d\u5728\u7cfb\u7edf\u5404\u5904\uff0c\u4f60\u53ef\u80fd\u5fd8\u8bb0\u5b83\u4eec\u7684\u540d\u5b57\u751a\u81f3\u5fd8\u8bb0\u5b83\u7684\u4f4d\u7f6e\u3002\u600e\u4e48\u6765\u7ba1\u7406virtualenv?\u9274\u4e8evirtualenv\u4e0d\u4fbf\u4e8e\u5bf9\u865a\u62df\u73af\u5883\u96c6\u4e2d\u7ba1\u7406\uff0c\u6240\u4ee5\u63a8\u8350\u76f4\u63a5\u4f7f\u7528virtualenvwrapper\u3002virtualenvwrapper\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u547d\u4ee4\u4f7f\u5f97\u548c\u865a\u62df\u73af\u5883\u5de5\u4f5c\u53d8\u5f97\u4fbf\u5229\u3002\u5b83\u628a\u4f60\u6240\u6709\u7684\u865a\u62df\u73af\u5883\u90fd\u653e\u5728\u4e00\u4e2a\u5730\u65b9\u3002 https://ningyu1.github.io/site/post/67-python-requirements/","title":"python env"},{"location":"env-windows/","text":"","title":"Env windows"},{"location":"issue-linux-tips/","text":"\u641c\u7d22\u4ee3\u7801 \u00b6 # find find . -type f -iname \"*.java\" | xargs ag \"getUserBonusByBonusCode\" find . -type f -iname \"*.java\" -exec ag \"getUserBonusByBonusCode\" {} \\; # grep grep --include=\\*.java --exclude-dir={merchant,campaigns} -rnw '.' -e \"getUserBonusByBonusCode\" find . -maxdepth 1 | xargs -n 1 -d '\\n' du -sh find . -maxdepth 1 -print0 | xargs -0 du -sh find . -maxdepth 1 -exec du -sh {} \\; du -hd 1 find /{misc-service,misc-task,user-service,live-service,ypwh-wxmp-service,bsp-task,bsp-web,search-service} -type f -iname \"*.java\" -exec grep -l \"countGroupBy\" {} \\; grep --include-dir={misc-service,misc-task,user-service,live-service,ypwh-wxmp-service,bsp-task,bsp-web,search-service} --include=\\*.java -rnw '.' -e \"countGroupBy\"","title":"Issue linux tips"},{"location":"issue-linux-tips/#_1","text":"# find find . -type f -iname \"*.java\" | xargs ag \"getUserBonusByBonusCode\" find . -type f -iname \"*.java\" -exec ag \"getUserBonusByBonusCode\" {} \\; # grep grep --include=\\*.java --exclude-dir={merchant,campaigns} -rnw '.' -e \"getUserBonusByBonusCode\" find . -maxdepth 1 | xargs -n 1 -d '\\n' du -sh find . -maxdepth 1 -print0 | xargs -0 du -sh find . -maxdepth 1 -exec du -sh {} \\; du -hd 1 find /{misc-service,misc-task,user-service,live-service,ypwh-wxmp-service,bsp-task,bsp-web,search-service} -type f -iname \"*.java\" -exec grep -l \"countGroupBy\" {} \\; grep --include-dir={misc-service,misc-task,user-service,live-service,ypwh-wxmp-service,bsp-task,bsp-web,search-service} --include=\\*.java -rnw '.' -e \"countGroupBy\"","title":"\u641c\u7d22\u4ee3\u7801"},{"location":"ops-ansible/","text":"running ansible through ssh bastion host https://blog.scottlowe.org/2015/12/24/running-ansible-through-ssh-bastion-host/ https://blog.scottlowe.org/2015/12/11/using-ssh-multiplexing/ https://selivan.github.io/2018/01/29/ansible-ssh-bastion-host.html # \u5f3a\u5236\u5220\u9664 kubectl delete pods <pod> --grace-period=0 --force # \u8282\u70b9\u65e5\u5fd7 service kubelet status -l systemctl status -l kubelet.service journalctl -fu kubelet -o json-pretty journalctl -b -u nginx -o json-pretty # pod location /var/lib/kubelet/pods/* rpm -qa | egrep \"kube|docker|systemd\" | sort -n kubectl get pods --all-namespaces -o wide --field-selector spec.nodeName= ulimit -a cat /etc/security/limits.conf cat /proc/sys/fs/file-max cat /proc/sys/fs/file-nr netstat -x | grep '/var/run/docker.sock' | wc -l netstat -x | grep '/var/run/docker.sock' | head -3 sudo lsof -a -p $(pidof dockerd) | wc -l lsof | awk '{print $2}' | sort | uniq -c | sort -n ps -p <pid> \u58f0\u660e\u5f0f API \u00b6 \u5728Kubernetes\u4e2d\u6211\u4eec\u4f7f\u7528Deployment\u3001DamenSet\u3001StatefulSet\u6765\u7ba1\u7406\u5e94\u7528Workload\uff0c \u4f7f\u7528Service\u3001Ingress\u6765\u7ba1\u7406\u5e94\u7528\u7684\u8bbf\u95ee\u65b9\u5f0f\uff0c \u4f7f\u7528ConfigMap\u548cSecret\u6765\u7ba1\u7406\u5e94\u7528\u914d\u7f6e\u3002 \u6211\u4eec\u5728\u96c6\u7fa4\u4e2d\u5bf9\u8fd9\u4e9b\u8d44\u6e90\u7684\u521b\u5efa\uff0c\u66f4\u65b0\uff0c\u5220\u9664\u7684\u52a8\u4f5c\u90fd\u4f1a\u88ab\u8f6c\u6362\u4e3a\u4e8b\u4ef6(Event)\uff0c Kubernetes\u7684Controller Manager\u8d1f\u8d23\u76d1\u542c\u8fd9\u4e9b\u4e8b\u4ef6\u5e76\u89e6\u53d1\u76f8\u5e94\u7684\u4efb\u52a1\u6765\u6ee1\u8db3\u7528\u6237\u7684\u671f\u671b\u3002 \u8fd9\u79cd\u65b9\u5f0f\u6211\u4eec\u6210\u4e3a\u58f0\u660e\u5f0f\uff0c\u7528\u6237\u53ea\u9700\u8981\u5173\u5fc3\u5e94\u7528\u7a0b\u5e8f\u7684\u6700\u7ec8\u72b6\u6001\uff0c\u5176\u5b83\u7684\u90fd\u901a\u8fc7Kubernetes\u6765\u5e2e\u52a9\u6211\u4eec\u5b8c\u6210\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u5e94\u7528\u7684\u914d\u7f6e\u7ba1\u7406\u590d\u6742\u5ea6\u3002","title":"Ops ansible"},{"location":"ops-ansible/#api","text":"\u5728Kubernetes\u4e2d\u6211\u4eec\u4f7f\u7528Deployment\u3001DamenSet\u3001StatefulSet\u6765\u7ba1\u7406\u5e94\u7528Workload\uff0c \u4f7f\u7528Service\u3001Ingress\u6765\u7ba1\u7406\u5e94\u7528\u7684\u8bbf\u95ee\u65b9\u5f0f\uff0c \u4f7f\u7528ConfigMap\u548cSecret\u6765\u7ba1\u7406\u5e94\u7528\u914d\u7f6e\u3002 \u6211\u4eec\u5728\u96c6\u7fa4\u4e2d\u5bf9\u8fd9\u4e9b\u8d44\u6e90\u7684\u521b\u5efa\uff0c\u66f4\u65b0\uff0c\u5220\u9664\u7684\u52a8\u4f5c\u90fd\u4f1a\u88ab\u8f6c\u6362\u4e3a\u4e8b\u4ef6(Event)\uff0c Kubernetes\u7684Controller Manager\u8d1f\u8d23\u76d1\u542c\u8fd9\u4e9b\u4e8b\u4ef6\u5e76\u89e6\u53d1\u76f8\u5e94\u7684\u4efb\u52a1\u6765\u6ee1\u8db3\u7528\u6237\u7684\u671f\u671b\u3002 \u8fd9\u79cd\u65b9\u5f0f\u6211\u4eec\u6210\u4e3a\u58f0\u660e\u5f0f\uff0c\u7528\u6237\u53ea\u9700\u8981\u5173\u5fc3\u5e94\u7528\u7a0b\u5e8f\u7684\u6700\u7ec8\u72b6\u6001\uff0c\u5176\u5b83\u7684\u90fd\u901a\u8fc7Kubernetes\u6765\u5e2e\u52a9\u6211\u4eec\u5b8c\u6210\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5927\u5927\u7b80\u5316\u5e94\u7528\u7684\u914d\u7f6e\u7ba1\u7406\u590d\u6742\u5ea6\u3002","title":"\u58f0\u660e\u5f0f API"},{"location":"ops-docker-alpine/","text":"\u57fa\u4e8e alpine \u7684\u5bb9\u5668\u5e38\u7528\u624b\u6bb5 \u00b6 \u5728 Dockerfile \u4e2d \u00b6 RUN echo -e \"https://mirrors.ustc.edu.cn/alpine/latest-stable/main\\nhttps://mirrors.ustc.edu.cn/alpine/latest-stable/community\" > /etc/apk/repositories && \\ apk update # \u8bbe\u7f6e\u65f6\u533a RUN apk add --no-cache tzdata ENV TZ=Asia/Shanghai \u5728\u5bb9\u5668\u8fd0\u884c\u65f6 \u00b6 apk add curl apk search htop # How do I list installed packages? apk info apk info -vv | grep 'foo' apk info -vv | sort # Check if PACKAGE is installed apk -e info pkgName # https://www.cyberciti.biz/faq/10-alpine-linux-apk-command-examples/ apk add -u busybox && apk add busybox-extras apk add bind-tools apk add tcpdump # debug dubbo dubbo qos http://dubbo.apache.org/zh-cn/docs/user/references/qos.html apk command options and examples \u00b6 Command Usage Example apk update Update the package list apk update apk upgrade Upgrade the system apk update apt ugrade apk add pkg Add a package apk add apache apk del pkg Delete a package apk del nginx apk search -v Search for packages apk search -v apk search -v -d \u2018nginx \u2019 apk search -v \u2018apache \u2019 apk info List all installed pacakges apk info apk fix Repair package or upgrade it without modifying main dependencies apk fix apk policy pkg Show repository policy for packages apk policy bash apk stats Show statistics about repositories and installations apk stats","title":"\u955c\u50cf\u6784\u5efa"},{"location":"ops-docker-alpine/#alpine","text":"","title":"\u57fa\u4e8e alpine \u7684\u5bb9\u5668\u5e38\u7528\u624b\u6bb5"},{"location":"ops-docker-alpine/#dockerfile","text":"RUN echo -e \"https://mirrors.ustc.edu.cn/alpine/latest-stable/main\\nhttps://mirrors.ustc.edu.cn/alpine/latest-stable/community\" > /etc/apk/repositories && \\ apk update # \u8bbe\u7f6e\u65f6\u533a RUN apk add --no-cache tzdata ENV TZ=Asia/Shanghai","title":"\u5728 Dockerfile \u4e2d"},{"location":"ops-docker-alpine/#_1","text":"apk add curl apk search htop # How do I list installed packages? apk info apk info -vv | grep 'foo' apk info -vv | sort # Check if PACKAGE is installed apk -e info pkgName # https://www.cyberciti.biz/faq/10-alpine-linux-apk-command-examples/ apk add -u busybox && apk add busybox-extras apk add bind-tools apk add tcpdump # debug dubbo dubbo qos http://dubbo.apache.org/zh-cn/docs/user/references/qos.html","title":"\u5728\u5bb9\u5668\u8fd0\u884c\u65f6"},{"location":"ops-docker-alpine/#apk-command-options-and-examples","text":"Command Usage Example apk update Update the package list apk update apk upgrade Upgrade the system apk update apt ugrade apk add pkg Add a package apk add apache apk del pkg Delete a package apk del nginx apk search -v Search for packages apk search -v apk search -v -d \u2018nginx \u2019 apk search -v \u2018apache \u2019 apk info List all installed pacakges apk info apk fix Repair package or upgrade it without modifying main dependencies apk fix apk policy pkg Show repository policy for packages apk policy bash apk stats Show statistics about repositories and installations apk stats","title":"apk command options and examples"},{"location":"ops-docker/","text":"Docker \u00b6 # rabbitmq \u5355\u5b9e\u4f8b docker run -d --name rabbitmq -e RABBITMQ_USERNAME=user -e RABBITMQ_PASSWORD=pass -p 4369:4369 -p 5672:5672 -p 25672:25672 -p 15672:15672 bitnami/rabbitmq:3.8.3 # redis \u5355\u5b9e\u4f8b docker run -d --name redis -e ALLOW_EMPTY_PASSWORD=yes -p 6379:6379 bitnami/redis:5.0.8 /opt/bitnami/scripts/redis/run.sh --maxmemory 512mb # zookeeper solo docker run -d --name zookeeper -v ~/docker-data/zookeeper:/bitnami/zookeeper -v ~/docker-config/zookeeper/zoo.cfg:/opt/bitnami/zookeeper/conf/zoo.cfg -e ALLOW_ANONYMOUS_LOGIN=yes -p 2181:2181 bitnami/zookeeper:3.6.0 docker run -d --name zookeeper -v /opt/docker-data/zookeeper/data:/bitnami/zookeeper -v /opt/docker-data/zookeeper/conf/zoo.cfg:/opt/bitnami/zookeeper/conf/zoo.cfg -e ALLOW_ANONYMOUS_LOGIN=yes -p 2181:2181 bitnami/zookeeper:3.6.0 docker run -it --rm \\ bitnami/zookeeper:3.6.0 zkCli.sh -server zookeeper:2181 get / # skywalking docker pull apache/skywalking-base:7.0.0-es7 docker pull apache/skywalking-ui:7.0.0 docker pull apache/skywalking-oap-server:7.0.0-es7 docker run --name oap --restart always -d -e SW_OAP_ADDRESS=oap:12800 apache/skywalking-ui:7.0.0 docker run --name oap --restart always -d -e SW_STORAGE=elasticsearch -e SW_STORAGE_ES_CLUSTER_NODES=elasticsearch:9200 apache/skywalking-oap-server:7.0.0-es7 docker run \\ -v ~/docker-data/elasticsearch:/bitnami/elasticsearch/data \\ bitnami/elasticsearch:7.6.2 docker-compose \u00b6 # update docker-compose pull docker-compose up -d --remove-orphans docker image prune","title":"docker"},{"location":"ops-docker/#docker","text":"# rabbitmq \u5355\u5b9e\u4f8b docker run -d --name rabbitmq -e RABBITMQ_USERNAME=user -e RABBITMQ_PASSWORD=pass -p 4369:4369 -p 5672:5672 -p 25672:25672 -p 15672:15672 bitnami/rabbitmq:3.8.3 # redis \u5355\u5b9e\u4f8b docker run -d --name redis -e ALLOW_EMPTY_PASSWORD=yes -p 6379:6379 bitnami/redis:5.0.8 /opt/bitnami/scripts/redis/run.sh --maxmemory 512mb # zookeeper solo docker run -d --name zookeeper -v ~/docker-data/zookeeper:/bitnami/zookeeper -v ~/docker-config/zookeeper/zoo.cfg:/opt/bitnami/zookeeper/conf/zoo.cfg -e ALLOW_ANONYMOUS_LOGIN=yes -p 2181:2181 bitnami/zookeeper:3.6.0 docker run -d --name zookeeper -v /opt/docker-data/zookeeper/data:/bitnami/zookeeper -v /opt/docker-data/zookeeper/conf/zoo.cfg:/opt/bitnami/zookeeper/conf/zoo.cfg -e ALLOW_ANONYMOUS_LOGIN=yes -p 2181:2181 bitnami/zookeeper:3.6.0 docker run -it --rm \\ bitnami/zookeeper:3.6.0 zkCli.sh -server zookeeper:2181 get / # skywalking docker pull apache/skywalking-base:7.0.0-es7 docker pull apache/skywalking-ui:7.0.0 docker pull apache/skywalking-oap-server:7.0.0-es7 docker run --name oap --restart always -d -e SW_OAP_ADDRESS=oap:12800 apache/skywalking-ui:7.0.0 docker run --name oap --restart always -d -e SW_STORAGE=elasticsearch -e SW_STORAGE_ES_CLUSTER_NODES=elasticsearch:9200 apache/skywalking-oap-server:7.0.0-es7 docker run \\ -v ~/docker-data/elasticsearch:/bitnami/elasticsearch/data \\ bitnami/elasticsearch:7.6.2","title":"Docker"},{"location":"ops-docker/#docker-compose","text":"# update docker-compose pull docker-compose up -d --remove-orphans docker image prune","title":"docker-compose"},{"location":"ops-dubbo/","text":"monitor \u00b6 \u901a\u8fc7 dubbo filter \u548c micrometer \u5b9e\u73b0 prometheaus \u683c\u5f0f\u7684\u76d1\u63a7\u8f93\u51fa \u00b6 \u4ee3\u7801\uff1a https://github.com/linux-china/spring-boot-apache-dubbo/tree/master/spring-boot-starter-apache-dubbo/src/main/java/org/mvnsearch/spring/boot/dubbo/listener \u6765\u6e90\uff1ahttps://github.com/apache/dubbo/issues/483#issuecomment-409039233 alibaba metrcis \u5b9e\u73b0\u4e86 prometheaus \u683c\u5f0f\u7684\u8f93\u51fa \u00b6 \u4ee3\u7801\uff1ahttps://github.com/alibaba/metrics/tree/master/metrics-prometheus \u6765\u6e90\uff1ahttps://github.com/alibaba/metrics/issues/28#issuecomment-530675211 dubbo admin \u4e2d\u901a\u8fc7\u6ce8\u518c\u4e2d\u5fc3\u6536\u96c6\u76d1\u63a7\u4fe1\u606f \u00b6 \u4ee3\u7801\uff1ahttps://github.com/apache/dubbo-admin/blob/develop/dubbo-admin-server/src/main/java/org/apache/dubbo/admin/service/impl/MetrcisCollectServiceImpl.java alibaba metrics \u673a\u5236\u89e3\u8bfb \u00b6 \u6587\u7ae0 https://developer.aliyun.com/article/693569","title":"Ops dubbo"},{"location":"ops-dubbo/#monitor","text":"","title":"monitor"},{"location":"ops-dubbo/#dubbo-filter-micrometer-prometheaus","text":"\u4ee3\u7801\uff1a https://github.com/linux-china/spring-boot-apache-dubbo/tree/master/spring-boot-starter-apache-dubbo/src/main/java/org/mvnsearch/spring/boot/dubbo/listener \u6765\u6e90\uff1ahttps://github.com/apache/dubbo/issues/483#issuecomment-409039233","title":"\u901a\u8fc7 dubbo filter \u548c micrometer \u5b9e\u73b0 prometheaus \u683c\u5f0f\u7684\u76d1\u63a7\u8f93\u51fa"},{"location":"ops-dubbo/#alibaba-metrcis-prometheaus","text":"\u4ee3\u7801\uff1ahttps://github.com/alibaba/metrics/tree/master/metrics-prometheus \u6765\u6e90\uff1ahttps://github.com/alibaba/metrics/issues/28#issuecomment-530675211","title":"alibaba metrcis \u5b9e\u73b0\u4e86 prometheaus \u683c\u5f0f\u7684\u8f93\u51fa"},{"location":"ops-dubbo/#dubbo-admin","text":"\u4ee3\u7801\uff1ahttps://github.com/apache/dubbo-admin/blob/develop/dubbo-admin-server/src/main/java/org/apache/dubbo/admin/service/impl/MetrcisCollectServiceImpl.java","title":"dubbo admin \u4e2d\u901a\u8fc7\u6ce8\u518c\u4e2d\u5fc3\u6536\u96c6\u76d1\u63a7\u4fe1\u606f"},{"location":"ops-dubbo/#alibaba-metrics","text":"\u6587\u7ae0 https://developer.aliyun.com/article/693569","title":"alibaba metrics \u673a\u5236\u89e3\u8bfb"},{"location":"ops-elasticsearch/","text":"# \u975e\u963b\u585e\u65b9\u5f0f\uff0c\u901a\u8fc7\u540e\u53f0\u4efb\u52a1 reindex POST _reindex?wait_for_completion=false { \"source\": { \"index\": \"standard-product-v7\" }, \"dest\": { \"index\": \"standard-product-v8\" } } # \u6839\u636e\u8fd4\u56de\u4e2d\u7684 task id \u67e5\u770b\u8fdb\u5ea6 GET _tasks/LFMDOiFzQ9CbgyMiDuapwA:5597595 POST /_aliases { \"actions\" : [ {\"remove\": {\"index\": \"standard-product-v7\", \"alias\": \"standard-product\"}}, {\"add\": {\"index\": \"standard-product-v8\", \"alias\": \"standard-product\"}} ] }","title":"Ops elasticsearch"},{"location":"ops-jenkins/","text":"jenkins \u7b14\u8bb0 \u00b6 \u5e38\u7528\u63d2\u4ef6 \u00b6 Pipeline Utility Steps Email Extension Template Plugin Git Parameter Plug-In Generic Webhook Trigger Kubernetes CLI Plugin Role-based Authorization Strategy SCM Sync Configuration Plugin Ansible plugin \u4f7f\u7528 docker \u7248 jenkins \u00b6 \u5f53Jenkins\u8fd0\u884c\u5728\u5bb9\u5668\u4e2d\u65f6\uff0c\u56e0\u4e3aJenkins\u8981\u6267\u884c\u5f88\u591aDocker\u547d\u4ee4\uff0c\u6bd4\u5982build\u955c\u50cf\u3001push\u955c\u50cf\u7b49\uff0c\u8fd9\u5c31\u8981\u9762\u4e34\u4e00\u4e2a\u95ee\u9898\u2014\u2014\u5982\u4f55\u5728\u5bb9\u5668\u5316\u7684Jenkins\u4e2d\u8fd0\u884cDocker\u3002\u901a\u5e38\u6211\u4eec\u4f1a\u5efa\u8bae\u5927\u5bb6\u4f7f\u7528\u5bb9\u5668\u8fd0\u884c\u6240\u5728\u5bbf\u4e3b\u673a\u7684Docker\u73af\u5883\uff0c\u800c\u4e0d\u662f\u518d\u5728\u5bb9\u5668\u5185\u542f\u52a8\u4e00\u5957 \u5fc5\u5907\u65b9\u6848 \u00b6 jenkins \u56fd\u5185\u52a0\u901f # \u8fdb\u5165\u66f4\u65b0\u914d\u7f6e\u4f4d\u7f6e cd {/var/lib/jenkins}/updates # \u65b9\u6848 1 : \u901a\u8fc7 vim \u66ff\u6362\u5730\u5740 \u4f7f\u7528vim\u7684\u547d\u4ee4\uff0c\u5982\u4e0b\uff0c\u66ff\u6362\u6240\u6709\u63d2\u4ef6\u4e0b\u8f7d\u7684url :1,$s/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g # \u65b9\u6848 2 : \u901a\u8fc7 sed \u66ff\u6362\u5730\u5740 sed -i 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' default.json sed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' default.json FAQ \u00b6 \u5728\u54ea\u53ef\u4ee5\u627e\u5230\u5b98\u65b9\u5b89\u88c5\u5305 https://updates.jenkins-ci.org/download/plugins/","title":"\u8fd0\u7ef4 - jenkins"},{"location":"ops-jenkins/#jenkins","text":"","title":"jenkins \u7b14\u8bb0"},{"location":"ops-jenkins/#_1","text":"Pipeline Utility Steps Email Extension Template Plugin Git Parameter Plug-In Generic Webhook Trigger Kubernetes CLI Plugin Role-based Authorization Strategy SCM Sync Configuration Plugin Ansible plugin","title":"\u5e38\u7528\u63d2\u4ef6"},{"location":"ops-jenkins/#docker-jenkins","text":"\u5f53Jenkins\u8fd0\u884c\u5728\u5bb9\u5668\u4e2d\u65f6\uff0c\u56e0\u4e3aJenkins\u8981\u6267\u884c\u5f88\u591aDocker\u547d\u4ee4\uff0c\u6bd4\u5982build\u955c\u50cf\u3001push\u955c\u50cf\u7b49\uff0c\u8fd9\u5c31\u8981\u9762\u4e34\u4e00\u4e2a\u95ee\u9898\u2014\u2014\u5982\u4f55\u5728\u5bb9\u5668\u5316\u7684Jenkins\u4e2d\u8fd0\u884cDocker\u3002\u901a\u5e38\u6211\u4eec\u4f1a\u5efa\u8bae\u5927\u5bb6\u4f7f\u7528\u5bb9\u5668\u8fd0\u884c\u6240\u5728\u5bbf\u4e3b\u673a\u7684Docker\u73af\u5883\uff0c\u800c\u4e0d\u662f\u518d\u5728\u5bb9\u5668\u5185\u542f\u52a8\u4e00\u5957","title":"\u4f7f\u7528 docker \u7248 jenkins"},{"location":"ops-jenkins/#_2","text":"jenkins \u56fd\u5185\u52a0\u901f # \u8fdb\u5165\u66f4\u65b0\u914d\u7f6e\u4f4d\u7f6e cd {/var/lib/jenkins}/updates # \u65b9\u6848 1 : \u901a\u8fc7 vim \u66ff\u6362\u5730\u5740 \u4f7f\u7528vim\u7684\u547d\u4ee4\uff0c\u5982\u4e0b\uff0c\u66ff\u6362\u6240\u6709\u63d2\u4ef6\u4e0b\u8f7d\u7684url :1,$s/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g # \u65b9\u6848 2 : \u901a\u8fc7 sed \u66ff\u6362\u5730\u5740 sed -i 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' default.json sed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' default.json","title":"\u5fc5\u5907\u65b9\u6848"},{"location":"ops-jenkins/#faq","text":"\u5728\u54ea\u53ef\u4ee5\u627e\u5230\u5b98\u65b9\u5b89\u88c5\u5305 https://updates.jenkins-ci.org/download/plugins/","title":"FAQ"},{"location":"ops-kafka/","text":"# \u5e73\u8861 leader bin/kafka-preferred-replica-election.sh --bootstrap-server localhost:9092 # \u538b\u6d4b\u5de5\u5177 bin/kafka-producer-perf-test.sh --topic test --num-records 100 --record-size 1 --throughput 100 --producer-props bootstrap.servers=localhost:9092 # \u542f\u52a8 bin/kafka-server-start.sh -daemon config/server.properties JMX_PORT=9991 bin/kafka-server-start.sh -daemon config/server.properties # \u505c\u6b62 bin/kafka-server-stop.sh # \u751f\u4ea7 bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test # \u6d88\u8d39 bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --offset latest --partition 0 bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --offset latest --partition 0 --max-messages 1 # \u5206\u7ec4\u6d88\u8d39 bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test -group test_group --from-beginning bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --list bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group test_group --describe bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group test_group --topic test --delete bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group test_group --delete # \u521b\u5efa Topic bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test # \u5982\u679c\u914d\u7f6e\u6587\u4ef6 server.properties \u6307\u5b9a\u4e86 Kafka \u5728 zookeeper \u4e0a\u7684\u76ee\u5f55\uff0c\u5219\u53c2\u6570\u4e5f\u8981\u6307\u5b9a\uff0c\u5426\u5219\u4f1a\u62a5\u65e0\u53ef\u7528\u7684 brokers bin/kafka-topics.sh --create --zookeeper localhost:2181/kafka --replication-factor 1 --partitions 1 --topic test # \u5220\u9664 Topic bin/kafka-topics.sh --zookeeper localhost:2181 --topic test --delete bin/kafka-topics.sh --list --zookeeper localhost:2181 bin/kafka-topics.sh --describe --zookeeper localhost:2181 --topic test # \u589e\u52a0 Topic \u7684 partition \u6570 bin/kafka-topics.sh --zookeeper localhost:2181 --alter --topic test --partitions 5 # \u67e5\u770b topic \u6307\u5b9a\u5206\u533a offset \u7684\u6700\u5927\u503c\u6216\u6700\u5c0f\u503c time \u4e3a -1 \u65f6\u8868\u793a\u6700\u5927\u503c\uff0c\u4e3a -2 \u65f6\u8868\u793a\u6700\u5c0f\u503c\uff1a bin/kafka-run-class.sh kafka.tools.GetOffsetShell --topic test --time -1 --broker-list localhost:9092 --partitions 0 # \u67e5\u770btopic\u6d88\u8d39\u8bb0\u5f55 bin/kafka-run-class.sh kafka.tools.ConsumerOffsetChecker --zookeeper localhost:2181 --group test_group --topic test","title":"\u8fd0\u7ef4 - kafka"},{"location":"ops-kubernetes/","text":"Kubernetes Ops \u00b6 \u5e38\u7528\u65e5\u5fd7 \u00b6 # Centos \u673a\u5668\u67e5\u770b\u65e5\u5fd7 journalctl -l -u kube-apiserver journalctl -l -u kube-controller-manager journalctl -l -u kube-scheduler journalctl -l -u kubelet journalctl -l -u kube-proxy /var/log/kube-apiserver.log /var/log/kube-scheduler.log /var/log/kube-controller-manager.log /var/log/kubelet.log /var/log/kube-proxy.log # \u5047\u8bbe\u63a7\u5236\u5e73\u9762\u4ee5 Kubernetes \u9759\u6001 Pod \u7684\u5f62\u5f0f\u6765\u8fd0\u884c # kube-apiserver \u65e5\u5fd7 PODNAME=$(kubectl -n kube-system get pod -l component=kube-apiserver -o jsonpath='{.items[0].metadata.name}') kubectl -n kube-system logs $PODNAME --tail 100 # kube-controller-manager \u65e5\u5fd7 PODNAME=$(kubectl -n kube-system get pod -l component=kube-controller-manager -o jsonpath='{.items[0].metadata.name}') kubectl -n kube-system logs $PODNAME --tail 100 # kube-scheduler \u65e5\u5fd7 PODNAME=$(kubectl -n kube-system get pod -l component=kube-scheduler -o jsonpath='{.items[0].metadata.name}') kubectl -n kube-system logs $PODNAME --tail 100 # kube-dns \u65e5\u5fd7, kube-dns \u901a\u5e38\u4ee5 Addon \u7684\u65b9\u5f0f\u90e8\u7f72\uff0c\u6bcf\u4e2a Pod \u5305\u542b\u4e09\u4e2a\u5bb9\u5668\uff0c\u6700\u5173\u952e\u7684\u662f kubedns \u5bb9\u5668\u7684\u65e5\u5fd7 PODNAME=$(kubectl -n kube-system get pod -l k8s-app=kube-dns -o jsonpath='{.items[0].metadata.name}') kubectl -n kube-system logs $PODNAME -c kubedns # Kubelet \u65e5\u5fd7 journalctl -l -u kubelet journalctl -u kube-controller-manage journalctl --since 15:00:00 -u kubelet # Kube-proxy \u65e5\u5fd7 kubectl -n kube-system get pod -l component=kube-proxy kubectl -n kube-system logs kube-proxy-42zpn \u5feb\u901f\u67e5\u627e pod \u00b6 # \u67e5\u770b\u67d0\u4e2a\u8282\u70b9\u4e0a\u7684\u6240\u6709pod kubectl get pods --all-namespaces -o wide --field-selector spec.nodeName=cn-beijing.10.8.205.207 # \u6309\u6240\u5728 node \u67e5\u770b pod kubectl get pods --all-namespaces -o wide --sort-by=\"{.spec.nodeName}\" # \u6309\u91cd\u542f\u6b21\u6570\u964d\u5e8f\u67e5\u770b pod kubectl get pods --all-namespaces --sort-by=\"{.status.containerStatuses[:1].restartCount}\" # \u67e5\u770b pod \u548c\u5176\u6240\u5728\u7684 node kubectl get pod -o=custom-columns=NAME:.metadata.name,STATUS:.status.phase,NODE:.spec.nodeName --all-namespaces kubectl get pod -o=custom-columns=NODE:.spec.nodeName,NAME:.metadata.name --all-namespaces # \u67e5\u770b pod \u6700\u8fd1\u72b6\u6001 kubectl -n solrcloud get pod -o go-template='{{range.status.containerStatuses}}{{\"Container Name: \"}}{{.name}}{{\"\\r\\nLastState: \"}}{{.lastState}}{{end}}' solrcloud-pro-2-2 # \u67e5\u770b pod \u4e0a\u4e00\u6b21\u7684\u65e5\u5fd7 kubectl -n solrcloud logs solrcloud-pro-2-0 --previous --tail 200 # \u67e5\u770b namespace \u4e0b\u7684\u4e8b\u4ef6\u4fe1\u606f kubectl -n solrcloud get events -n solrcloud --sort-by='.metadata.creationTimestamp' kubectl -n pro get events --sort-by='.metadata.creationTimestamp' \u95ee\u9898\u5904\u7406 \u00b6 # Orphaned pod found - but volume paths are still present on disk cd /var/lib/kubelet/pods/86d60ee9-9fae-11e8-8cfc-525400290b20 rm -rf 86d60ee9-9fae-11e8-8cfc-525400290b20 \u53c2\u8003\u94fe\u63a5 \u00b6 https://www.bookstack.cn/read/kubernetes-practice-guide/troubleshooting-problems-pod-README.md https://kubernetes.feisky.xyz/troubleshooting/index https://kubernetes.io/docs/reference/kubectl/cheatsheet/ https://www.cnblogs.com/duanxz/p/6148534.html","title":"Kubernetes"},{"location":"ops-kubernetes/#kubernetes-ops","text":"","title":"Kubernetes Ops"},{"location":"ops-kubernetes/#_1","text":"# Centos \u673a\u5668\u67e5\u770b\u65e5\u5fd7 journalctl -l -u kube-apiserver journalctl -l -u kube-controller-manager journalctl -l -u kube-scheduler journalctl -l -u kubelet journalctl -l -u kube-proxy /var/log/kube-apiserver.log /var/log/kube-scheduler.log /var/log/kube-controller-manager.log /var/log/kubelet.log /var/log/kube-proxy.log # \u5047\u8bbe\u63a7\u5236\u5e73\u9762\u4ee5 Kubernetes \u9759\u6001 Pod \u7684\u5f62\u5f0f\u6765\u8fd0\u884c # kube-apiserver \u65e5\u5fd7 PODNAME=$(kubectl -n kube-system get pod -l component=kube-apiserver -o jsonpath='{.items[0].metadata.name}') kubectl -n kube-system logs $PODNAME --tail 100 # kube-controller-manager \u65e5\u5fd7 PODNAME=$(kubectl -n kube-system get pod -l component=kube-controller-manager -o jsonpath='{.items[0].metadata.name}') kubectl -n kube-system logs $PODNAME --tail 100 # kube-scheduler \u65e5\u5fd7 PODNAME=$(kubectl -n kube-system get pod -l component=kube-scheduler -o jsonpath='{.items[0].metadata.name}') kubectl -n kube-system logs $PODNAME --tail 100 # kube-dns \u65e5\u5fd7, kube-dns \u901a\u5e38\u4ee5 Addon \u7684\u65b9\u5f0f\u90e8\u7f72\uff0c\u6bcf\u4e2a Pod \u5305\u542b\u4e09\u4e2a\u5bb9\u5668\uff0c\u6700\u5173\u952e\u7684\u662f kubedns \u5bb9\u5668\u7684\u65e5\u5fd7 PODNAME=$(kubectl -n kube-system get pod -l k8s-app=kube-dns -o jsonpath='{.items[0].metadata.name}') kubectl -n kube-system logs $PODNAME -c kubedns # Kubelet \u65e5\u5fd7 journalctl -l -u kubelet journalctl -u kube-controller-manage journalctl --since 15:00:00 -u kubelet # Kube-proxy \u65e5\u5fd7 kubectl -n kube-system get pod -l component=kube-proxy kubectl -n kube-system logs kube-proxy-42zpn","title":"\u5e38\u7528\u65e5\u5fd7"},{"location":"ops-kubernetes/#pod","text":"# \u67e5\u770b\u67d0\u4e2a\u8282\u70b9\u4e0a\u7684\u6240\u6709pod kubectl get pods --all-namespaces -o wide --field-selector spec.nodeName=cn-beijing.10.8.205.207 # \u6309\u6240\u5728 node \u67e5\u770b pod kubectl get pods --all-namespaces -o wide --sort-by=\"{.spec.nodeName}\" # \u6309\u91cd\u542f\u6b21\u6570\u964d\u5e8f\u67e5\u770b pod kubectl get pods --all-namespaces --sort-by=\"{.status.containerStatuses[:1].restartCount}\" # \u67e5\u770b pod \u548c\u5176\u6240\u5728\u7684 node kubectl get pod -o=custom-columns=NAME:.metadata.name,STATUS:.status.phase,NODE:.spec.nodeName --all-namespaces kubectl get pod -o=custom-columns=NODE:.spec.nodeName,NAME:.metadata.name --all-namespaces # \u67e5\u770b pod \u6700\u8fd1\u72b6\u6001 kubectl -n solrcloud get pod -o go-template='{{range.status.containerStatuses}}{{\"Container Name: \"}}{{.name}}{{\"\\r\\nLastState: \"}}{{.lastState}}{{end}}' solrcloud-pro-2-2 # \u67e5\u770b pod \u4e0a\u4e00\u6b21\u7684\u65e5\u5fd7 kubectl -n solrcloud logs solrcloud-pro-2-0 --previous --tail 200 # \u67e5\u770b namespace \u4e0b\u7684\u4e8b\u4ef6\u4fe1\u606f kubectl -n solrcloud get events -n solrcloud --sort-by='.metadata.creationTimestamp' kubectl -n pro get events --sort-by='.metadata.creationTimestamp'","title":"\u5feb\u901f\u67e5\u627e pod"},{"location":"ops-kubernetes/#_2","text":"# Orphaned pod found - but volume paths are still present on disk cd /var/lib/kubelet/pods/86d60ee9-9fae-11e8-8cfc-525400290b20 rm -rf 86d60ee9-9fae-11e8-8cfc-525400290b20","title":"\u95ee\u9898\u5904\u7406"},{"location":"ops-kubernetes/#_3","text":"https://www.bookstack.cn/read/kubernetes-practice-guide/troubleshooting-problems-pod-README.md https://kubernetes.feisky.xyz/troubleshooting/index https://kubernetes.io/docs/reference/kubectl/cheatsheet/ https://www.cnblogs.com/duanxz/p/6148534.html","title":"\u53c2\u8003\u94fe\u63a5"},{"location":"ops-linux/","text":"Linux Ops \u00b6 \u8fdb\u7a0b/\u7ebf\u7a0b \u76f8\u5173 \u00b6 # \u67e5\u8be2\u7cfb\u7edf\u6700\u5927\u652f\u6301\u7ebf\u7a0b\u6570 cat /proc/sys/kernel/threads-max # \u67e5\u8be2\u5f53\u524d\u5df2\u7528\u7ebf\u7a0b\u6570\u91cf pstree -p | wc -l # \u6253\u5370\u6240\u6709\u8fdb\u7a0b\u53ca\u5176\u7ebf\u7a0b pstree -p # \u6253\u5370\u67d0\u4e2a\u8fdb\u7a0b\u7684\u7ebf\u7a0b\u6570 pstree -p {pid} | wc -l ps -Flww -p 3130 pgrep java | xargs -I {} sh -c \"echo -n {}:; pstree -p {} | wc -l\" # https://askubuntu.com/questions/88972/how-to-get-from-terminal-total-number-of-threads-per-process-and-total-for-al ps -eo nlwp | tail -n +2 | awk '{ num_threads += $1 } END { print num_threads }' # \u67e5\u770b\u4e0d\u540c\u72b6\u6001\u7684\u8fde\u63a5\u6570\u6570\u91cf netstat -ant | awk '/^tcp/ {++y[$NF]} END {for(w in y) print w, y[w]}' # \u67e5\u770b\u6bcf\u4e2aip\u8ddfserver\u5efa\u7acb\u7684\u8fde\u63a5\u6570 netstat -napto|egrep -v \"and|Address\" | awk '{print$5}'|awk -F : '{print$1}'|sort|uniq -c|sort -rn # \u8fd9\u4e2a\u8ddfip\u7684\u8fde\u63a5\u6700\u591a netstat -napto|grep 9.14.6.183","title":"Linux"},{"location":"ops-linux/#linux-ops","text":"","title":"Linux Ops"},{"location":"ops-linux/#_1","text":"# \u67e5\u8be2\u7cfb\u7edf\u6700\u5927\u652f\u6301\u7ebf\u7a0b\u6570 cat /proc/sys/kernel/threads-max # \u67e5\u8be2\u5f53\u524d\u5df2\u7528\u7ebf\u7a0b\u6570\u91cf pstree -p | wc -l # \u6253\u5370\u6240\u6709\u8fdb\u7a0b\u53ca\u5176\u7ebf\u7a0b pstree -p # \u6253\u5370\u67d0\u4e2a\u8fdb\u7a0b\u7684\u7ebf\u7a0b\u6570 pstree -p {pid} | wc -l ps -Flww -p 3130 pgrep java | xargs -I {} sh -c \"echo -n {}:; pstree -p {} | wc -l\" # https://askubuntu.com/questions/88972/how-to-get-from-terminal-total-number-of-threads-per-process-and-total-for-al ps -eo nlwp | tail -n +2 | awk '{ num_threads += $1 } END { print num_threads }' # \u67e5\u770b\u4e0d\u540c\u72b6\u6001\u7684\u8fde\u63a5\u6570\u6570\u91cf netstat -ant | awk '/^tcp/ {++y[$NF]} END {for(w in y) print w, y[w]}' # \u67e5\u770b\u6bcf\u4e2aip\u8ddfserver\u5efa\u7acb\u7684\u8fde\u63a5\u6570 netstat -napto|egrep -v \"and|Address\" | awk '{print$5}'|awk -F : '{print$1}'|sort|uniq -c|sort -rn # \u8fd9\u4e2a\u8ddfip\u7684\u8fde\u63a5\u6700\u591a netstat -napto|grep 9.14.6.183","title":"\u8fdb\u7a0b/\u7ebf\u7a0b \u76f8\u5173"},{"location":"ops-mongo/","text":"\u5b58\u50a8\u5f15\u64ce\u66f4\u6362 \u00b6 Starting in version 4.0, MongoDB deprecates the MMAPv1 storage Engine and will remove MMAPv1 in a future release. mongostat -h host:port -u username -p password \u2013authenticationDatabase=admin","title":"Ops mongo"},{"location":"ops-mongo/#_1","text":"Starting in version 4.0, MongoDB deprecates the MMAPv1 storage Engine and will remove MMAPv1 in a future release. mongostat -h host:port -u username -p password \u2013authenticationDatabase=admin","title":"\u5b58\u50a8\u5f15\u64ce\u66f4\u6362"},{"location":"ops-oss/","text":"OSS \u5bf9\u8c61\u5b58\u50a8 \u00b6 \u4e03\u725b \u00b6 # \u767b\u5f55, \u4f1a\u8bdd\u7684\u6709\u6548\u671f\u662f 3600 \u79d2\uff08\u4e00\u4e2a\u5c0f\u65f6\uff09\uff0c\u4e00\u4e2a\u5c0f\u65f6\u540e\u9700\u8981\u91cd\u65b0\u767b\u5f55\u3002 qrsctl login <User> <Passwd> # \u67e5\u770b\u5e10\u53f7\u4fe1\u606f qrsctl info # \u67e5\u770b\u5bc6\u94a5(AccessKey/SecretKey), \u7f51\u7ad9\u4e0a\u9ed8\u8ba4\u4f7f\u7528\u7684\u5e94\u7528\u540d\u79f0\u662f\uff1adefault qrsctl appinfo <AppName> # \u521b\u5efa\u7a7a\u95f4(Bucket) qrsctl mkbucket2 <Bucket> # \u5c06\u7a7a\u95f4\u8bbe\u7f6e\u4e3a\u516c\u5f00 qrsctl private <Bucket> 0 # \u5c06\u7a7a\u95f4\u8bbe\u7f6e\u4e3a\u79c1\u6709 qrsctl private <Bucket> 1 # \u5217\u51fa\u6240\u6709\u7a7a\u95f4(Buckets) qrsctl buckets # \u67e5\u770b\u6307\u5b9a\u7a7a\u95f4(Bucket)\u4fe1\u606f qrsctl bucketinfo <Bucket> # \u7a7a\u95f4\u6388\u6743 qrsctl share <Bucket> <Uid> <Permission> # \u8bbe\u7f6e\u955c\u50cf\u5b58\u50a8\uff08\u6e90\u7ad9\u52a0\u901f\uff09 qrsctl img <Bucket> <SrcUrl>[,<SrcUrl2>,...] [SrcHost] # \u53d6\u6d88\u955c\u50cf\u5b58\u50a8 qrsctl unimg <Bucket> # \u8bbe\u7f6e\u955c\u50cf\u5b58\u50a8\u56de\u6e90\u5bb9\u9519\u5c5e\u6027 qrsctl imgsft <Bucket> <imgsft> # \u6e05\u9664cdn\u7f13\u5b58, \u6700\u591a\u6307\u5b9a10\u4e2a Url qrsctl cdn/refresh <Url1> <Url2>...<UrlN> # \u8bbe\u7f6eAPI\u89c4\u683c\u522b\u540d qrsctl style <Bucket> <aliasName> <fop> # \u53d6\u6d88API\u89c4\u683c\u522b\u540d qrsctl unstyle <Bucket> <Name> # \u8bbe\u7f6e\u53cb\u597dURL\u5206\u9694\u7b26 qrsctl separator <Bucket> <Sep> # \u8bbe\u7f6e\u539f\u6587\u4ef6/\u56fe\u4fdd\u62a4 qrsctl protected <Bucket> <Protected> # \u4e0a\u4f20\u6587\u4ef6 qrsctl put <Bucket> <Key> <SrcFile> # \u4e0a\u4f20\u4e00\u4e2a\u5927\u6587\u4ef6\uff08\u8d85\u8fc7 4MB\uff09\uff0c\u52a0\u4e0a\u9009\u9879 c\u3000\u4f1a\u542f\u7528\u5207\u7247\u5e76\u884c\u4e0a\u4f20\u4e00\u4e2a\u5927\u6587\u4ef6\u3002\uff08\u8d85\u8fc7 4MB\uff09 qrsctl put -c <Bucket> <Key> <SrcFile> # \u4e0b\u8f7d\u6587\u4ef6 qrsctl get <Bucket> <Key> <DestFile> # \u67e5\u770b\u6587\u4ef6 qrsctl stat <Bucket> <Key> # \u590d\u5236\u6587\u4ef6\uff0c\u5c06 Bucket1 \u4e2d\u7684 KeySrc \u590d\u5236\u5230 Bucket2 \u5e76\u547d\u540d\u4e3a KeyDest, Bucket1 \u548c Bucket2 \u53ef\u4ee5\u662f\u540c\u4e00\u4e2a\u3002 qrsctl cp <Bucket1:KeySrc> <Bucket2:KeyDest> # \u79fb\u52a8\u6587\u4ef6\uff0c\u5c06 Bucket1 \u4e2d\u7684 KeyOld \u79fb\u52a8\u5230 Bucket2 \u5e76\u547d\u540d\u4e3a KeyNew, Bucket1 \u548c Bucket2 \u53ef\u4ee5\u662f\u540c\u4e00\u4e2a\u3002 qrsctl mv <Bucket1:KeyOld> <Bucket2:KeyNew> # \u5220\u9664\u6587\u4ef6 qrsctl del <Bucket> <Key> # \u5982\u6267\u884c\u8fc7\u7a0b\u4e2d\u65e0\u9519\u8bef\uff0c\u5219\u4f1a\u5728\u5c4f\u5e55\u4e0a\u8f93\u51faOK\u5b57\u6837\u3002 qrsctl command [arguments] && echo \"OK\"","title":"OSS \u5bf9\u8c61\u5b58\u50a8"},{"location":"ops-oss/#oss","text":"","title":"OSS \u5bf9\u8c61\u5b58\u50a8"},{"location":"ops-oss/#_1","text":"# \u767b\u5f55, \u4f1a\u8bdd\u7684\u6709\u6548\u671f\u662f 3600 \u79d2\uff08\u4e00\u4e2a\u5c0f\u65f6\uff09\uff0c\u4e00\u4e2a\u5c0f\u65f6\u540e\u9700\u8981\u91cd\u65b0\u767b\u5f55\u3002 qrsctl login <User> <Passwd> # \u67e5\u770b\u5e10\u53f7\u4fe1\u606f qrsctl info # \u67e5\u770b\u5bc6\u94a5(AccessKey/SecretKey), \u7f51\u7ad9\u4e0a\u9ed8\u8ba4\u4f7f\u7528\u7684\u5e94\u7528\u540d\u79f0\u662f\uff1adefault qrsctl appinfo <AppName> # \u521b\u5efa\u7a7a\u95f4(Bucket) qrsctl mkbucket2 <Bucket> # \u5c06\u7a7a\u95f4\u8bbe\u7f6e\u4e3a\u516c\u5f00 qrsctl private <Bucket> 0 # \u5c06\u7a7a\u95f4\u8bbe\u7f6e\u4e3a\u79c1\u6709 qrsctl private <Bucket> 1 # \u5217\u51fa\u6240\u6709\u7a7a\u95f4(Buckets) qrsctl buckets # \u67e5\u770b\u6307\u5b9a\u7a7a\u95f4(Bucket)\u4fe1\u606f qrsctl bucketinfo <Bucket> # \u7a7a\u95f4\u6388\u6743 qrsctl share <Bucket> <Uid> <Permission> # \u8bbe\u7f6e\u955c\u50cf\u5b58\u50a8\uff08\u6e90\u7ad9\u52a0\u901f\uff09 qrsctl img <Bucket> <SrcUrl>[,<SrcUrl2>,...] [SrcHost] # \u53d6\u6d88\u955c\u50cf\u5b58\u50a8 qrsctl unimg <Bucket> # \u8bbe\u7f6e\u955c\u50cf\u5b58\u50a8\u56de\u6e90\u5bb9\u9519\u5c5e\u6027 qrsctl imgsft <Bucket> <imgsft> # \u6e05\u9664cdn\u7f13\u5b58, \u6700\u591a\u6307\u5b9a10\u4e2a Url qrsctl cdn/refresh <Url1> <Url2>...<UrlN> # \u8bbe\u7f6eAPI\u89c4\u683c\u522b\u540d qrsctl style <Bucket> <aliasName> <fop> # \u53d6\u6d88API\u89c4\u683c\u522b\u540d qrsctl unstyle <Bucket> <Name> # \u8bbe\u7f6e\u53cb\u597dURL\u5206\u9694\u7b26 qrsctl separator <Bucket> <Sep> # \u8bbe\u7f6e\u539f\u6587\u4ef6/\u56fe\u4fdd\u62a4 qrsctl protected <Bucket> <Protected> # \u4e0a\u4f20\u6587\u4ef6 qrsctl put <Bucket> <Key> <SrcFile> # \u4e0a\u4f20\u4e00\u4e2a\u5927\u6587\u4ef6\uff08\u8d85\u8fc7 4MB\uff09\uff0c\u52a0\u4e0a\u9009\u9879 c\u3000\u4f1a\u542f\u7528\u5207\u7247\u5e76\u884c\u4e0a\u4f20\u4e00\u4e2a\u5927\u6587\u4ef6\u3002\uff08\u8d85\u8fc7 4MB\uff09 qrsctl put -c <Bucket> <Key> <SrcFile> # \u4e0b\u8f7d\u6587\u4ef6 qrsctl get <Bucket> <Key> <DestFile> # \u67e5\u770b\u6587\u4ef6 qrsctl stat <Bucket> <Key> # \u590d\u5236\u6587\u4ef6\uff0c\u5c06 Bucket1 \u4e2d\u7684 KeySrc \u590d\u5236\u5230 Bucket2 \u5e76\u547d\u540d\u4e3a KeyDest, Bucket1 \u548c Bucket2 \u53ef\u4ee5\u662f\u540c\u4e00\u4e2a\u3002 qrsctl cp <Bucket1:KeySrc> <Bucket2:KeyDest> # \u79fb\u52a8\u6587\u4ef6\uff0c\u5c06 Bucket1 \u4e2d\u7684 KeyOld \u79fb\u52a8\u5230 Bucket2 \u5e76\u547d\u540d\u4e3a KeyNew, Bucket1 \u548c Bucket2 \u53ef\u4ee5\u662f\u540c\u4e00\u4e2a\u3002 qrsctl mv <Bucket1:KeyOld> <Bucket2:KeyNew> # \u5220\u9664\u6587\u4ef6 qrsctl del <Bucket> <Key> # \u5982\u6267\u884c\u8fc7\u7a0b\u4e2d\u65e0\u9519\u8bef\uff0c\u5219\u4f1a\u5728\u5c4f\u5e55\u4e0a\u8f93\u51faOK\u5b57\u6837\u3002 qrsctl command [arguments] && echo \"OK\"","title":"\u4e03\u725b"},{"location":"ops-rabbitmq/","text":"\u521b\u5efa\u7528\u6237 \u521b\u5efa vhost vhost \u6388\u6743\u7528\u6237\uff0c\u70b9\u51fb vhost -set permission 7 \u79cd\u961f\u5217 \u00b6 https://www.rabbitmq.com/getstarted.html simple queue 1 \u5bf9 1 work queue \u8f6e\u8be2\u5206\u53d1 \u516c\u5e73\u5206\u53d1\uff08\u80fd\u8005\u591a\u52b3\uff09 \u200b qos=1\u3001\u624b\u52a8 ackg channel exchange queue docker deploy \u65b0\u5efa\u7528\u6237\u4e86\u4e00\u5b9a\u8981\u7ed9\u8fd9\u4e2a\u7528\u6237\u8bbe\u7f6evhost\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u521a\u5f00\u59cb\u5c31\u662f\u56e0\u4e3a\u8fd9\u4e2a\u539f\u56e0\u5bfc\u81f4\u4e00\u76f4\u51fa\u73b0Connection Refuse\u8fd9\u6837\u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u7528\u547d\u4ee4\u884c\u4e5f\u53ef\u4ee5\u7528\u90a3\u4e2a\u7ba1\u7406\u754c\u9762\uff0c\u63a8\u8350\u7528\u547d\u4ee4\u884c\u3002 \u4f7f\u7528\u5bf9\u8c61\u4f20\u8f93\u7684\u65f6\u5019\u5bf9\u8c61\u4e00\u5b9a\u8981\u5b9e\u73b0Serializable\u63a5\u53e3\uff0c\u5426\u5219\u4e0d\u80fd\u4f20\u8f93 \u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u961f\u5217\u4e2d\u51fa\u73b0\u4e86\u4e0d\u80fd\u5904\u7406\u7684\u6d88\u606f\uff0c\u6574\u4e2avhost\u5c31\u7528\u4e0d\u4e86\u4e86\uff0c\u6240\u4ee5\u5efa\u8bae\u628a\u4e0d\u540c\u7684queue\u548cexchange\u653e\u5728\u4e0d\u540c\u7684vhost\u4e0b\u9762\uff0c\u4fdd\u8bc1\u4e92\u4e0d\u5e72\u6270\u3002\uff08\u6211\u5c31\u662f\u597d\u5947\u4e00\u4e0b\uff0c\u628aUser\u7684\u90a3\u4e2aSerializable\u7ed9\u53bb\u6389\u4e86\uff0c\u7136\u540e\u5c31\u4e00\u76f4\u62a5\u9519\uff0c\u540e\u6765\u53d1\u73b0\u662fqueue\u4e0d\u80fd\u5904\u7406\u672a\u5e8f\u5217\u5316\u7684\u5bf9\u8c61\u5bfc\u81f4listener\u5931\u6548\u5bfc\u81f4\u7684\u9519\u8bef\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u5bfc\u81f4\u4e00\u4e2avhost\u4e0b\u7684\u6240\u6709queue\u90fd\u4e0d\u80fd\u7528\u4e86\uff0c\u5c34\u5c2c\uff09\u3002","title":"rabbitmq"},{"location":"ops-rabbitmq/#7","text":"https://www.rabbitmq.com/getstarted.html simple queue 1 \u5bf9 1 work queue \u8f6e\u8be2\u5206\u53d1 \u516c\u5e73\u5206\u53d1\uff08\u80fd\u8005\u591a\u52b3\uff09 \u200b qos=1\u3001\u624b\u52a8 ackg channel exchange queue docker deploy \u65b0\u5efa\u7528\u6237\u4e86\u4e00\u5b9a\u8981\u7ed9\u8fd9\u4e2a\u7528\u6237\u8bbe\u7f6evhost\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u521a\u5f00\u59cb\u5c31\u662f\u56e0\u4e3a\u8fd9\u4e2a\u539f\u56e0\u5bfc\u81f4\u4e00\u76f4\u51fa\u73b0Connection Refuse\u8fd9\u6837\u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u7528\u547d\u4ee4\u884c\u4e5f\u53ef\u4ee5\u7528\u90a3\u4e2a\u7ba1\u7406\u754c\u9762\uff0c\u63a8\u8350\u7528\u547d\u4ee4\u884c\u3002 \u4f7f\u7528\u5bf9\u8c61\u4f20\u8f93\u7684\u65f6\u5019\u5bf9\u8c61\u4e00\u5b9a\u8981\u5b9e\u73b0Serializable\u63a5\u53e3\uff0c\u5426\u5219\u4e0d\u80fd\u4f20\u8f93 \u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u961f\u5217\u4e2d\u51fa\u73b0\u4e86\u4e0d\u80fd\u5904\u7406\u7684\u6d88\u606f\uff0c\u6574\u4e2avhost\u5c31\u7528\u4e0d\u4e86\u4e86\uff0c\u6240\u4ee5\u5efa\u8bae\u628a\u4e0d\u540c\u7684queue\u548cexchange\u653e\u5728\u4e0d\u540c\u7684vhost\u4e0b\u9762\uff0c\u4fdd\u8bc1\u4e92\u4e0d\u5e72\u6270\u3002\uff08\u6211\u5c31\u662f\u597d\u5947\u4e00\u4e0b\uff0c\u628aUser\u7684\u90a3\u4e2aSerializable\u7ed9\u53bb\u6389\u4e86\uff0c\u7136\u540e\u5c31\u4e00\u76f4\u62a5\u9519\uff0c\u540e\u6765\u53d1\u73b0\u662fqueue\u4e0d\u80fd\u5904\u7406\u672a\u5e8f\u5217\u5316\u7684\u5bf9\u8c61\u5bfc\u81f4listener\u5931\u6548\u5bfc\u81f4\u7684\u9519\u8bef\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u5bfc\u81f4\u4e00\u4e2avhost\u4e0b\u7684\u6240\u6709queue\u90fd\u4e0d\u80fd\u7528\u4e86\uff0c\u5c34\u5c2c\uff09\u3002","title":"7 \u79cd\u961f\u5217"},{"location":"ops-redis/","text":"docker deploy","title":"Ops redis"},{"location":"ops-scrapy/","text":"# default username scrapy, default password auto generate and print in console log. telnet 127.0.0.1 6023 >>> est() Execution engine status time()-engine.start_time : 699.5300390720367 engine.has_capacity() : False len(engine.downloader.active) : 0 engine.scraper.is_idle() : False engine.spider.name : aplum-detail engine.spider_is_idle(engine.spider) : False engine.slot.closing : False len(engine.slot.inprogress) : 16 len(engine.slot.scheduler.dqs or []) : AttributeError (exception) len(engine.slot.scheduler.mqs) : AttributeError (exception) len(engine.scraper.slot.queue) : 0 len(engine.scraper.slot.active) : 16 engine.scraper.slot.active_size : 185814 engine.scraper.slot.itemproc_size : 0 engine.scraper.slot.needs_backout() : False >>> p(stats.get_stats()) {'downloader/request_bytes': 650734, 'downloader/request_count': 1220, 'downloader/request_method_count/GET': 1220, 'downloader/response_bytes': 6636366, 'downloader/response_count': 1220, 'downloader/response_status_count/200': 1220, 'item_scraped_count': 1218, 'log_count/DEBUG': 7401, 'log_count/INFO': 18, 'log_count/WARNING': 1, 'memusage/max': 77443072, 'memusage/startup': 65294336, 'response_received_count': 1220, 'scheduler/dequeued/redis': 1220, 'scheduler/enqueued/redis': 1280, 'start_time': datetime.datetime(2020, 8, 26, 7, 33, 36, 962797)} # engine manage: engine.pause() / engine.unpause() / engine.stop() >>> engine.pause()","title":"Ops scrapy"},{"location":"ops-traceroute/","text":"route -n get 192.168.3.22 route -n get default # \u67e5\u770b\u8def\u7531\u8868 netstat -rn sudo route -n add -net 10.129.0.0 -netmask 255.255.0.0 192.168.3.22 sudo route -n add -net 10.129.0.0/16 192.168.3.22 # \u91cd\u7f6e\u8def\u7531\u8868 sudo route -n flush # \u5220\u9664\u8def\u7531\u8868 sudo route delete 10.129.0.0 traceroute 10.129.217.71","title":"Ops traceroute"},{"location":"ops-zk/","text":"ZooKeeper \u5e38\u7528\u547d\u4ee4 \u00b6 \u7528\u9014 \u547d\u4ee4 \u5907\u6ce8 \u542f\u52a8ZK\u670d\u52a1 sh bin/zkServer.sh start \u67e5\u770bZK\u670d\u52a1\u72b6\u6001 sh bin/zkServer.sh status \u505c\u6b62ZK\u670d\u52a1 sh bin/zkServer.sh stop \u91cd\u542fZK\u670d\u52a1 sh bin/zkServer.sh restart \u8fde\u63a5\u670d\u52a1\u5668 sh bin/zkCli.sh -server 127.0.0.1:2181 \u67e5\u770b\u54ea\u4e2a\u8282\u70b9\u88ab\u9009\u62e9\u4f5c\u4e3afollower\u6216\u8005leader echo stat | nc 127.0.0.1 2181 \u6d4b\u8bd5\u662f\u5426\u542f\u52a8\u4e86\u8be5Server echo ruok | nc 127.0.0.1 2181 \u82e5\u56de\u590dimok\u8868\u793a\u5df2\u7ecf\u542f\u52a8 \u5217\u51fa\u672a\u7ecf\u5904\u7406\u7684\u4f1a\u8bdd\u548c\u4e34\u65f6\u8282\u70b9 echo dump | nc 127.0.0.1 2181 \u5173\u6389server echo kill | nc 127.0.0.1 2181 \u8f93\u51fa\u76f8\u5173\u670d\u52a1\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f echo conf | nc 127.0.0.1 2181 \u5217\u51fa\u6240\u6709\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\u7684\u5b8c\u5168\u7684\u8fde\u63a5 / \u4f1a\u8bdd\u7684\u8be6\u7ec6\u4fe1\u606f echo cons | nc 127.0.0.1 2181 \u8f93\u51fa\u5173\u4e8e\u670d\u52a1\u73af\u5883\u7684\u8be6\u7ec6\u4fe1\u606f echo envi |nc 127.0.0.1 2181 \u533a\u522b\u4e8e conf \u547d\u4ee4 \u5217\u51fa\u672a\u7ecf\u5904\u7406\u7684\u8bf7\u6c42 echo reqs | nc 127.0.0.1 2181 \u5217\u51fa\u670d\u52a1\u5668 watch \u7684\u8be6\u7ec6\u4fe1\u606f echo wchs | nc 127.0.0.1 2181 \u901a\u8fc7 session \u5217\u51fa\u670d\u52a1\u5668 watch \u7684\u8be6\u7ec6\u4fe1\u606f echo wchc | nc 127.0.0.1 2181 \u8f93\u51fa\u662f\u4e00\u4e2a\u4e0e watch \u76f8\u5173\u7684\u4f1a\u8bdd\u7684\u5217\u8868 \u901a\u8fc7\u8def\u5f84\u5217\u51fa\u670d\u52a1\u5668 watch \u7684\u8be6\u7ec6\u4fe1\u606f echo wchp | nc 127.0.0.1 2181 \u8f93\u51fa\u4e00\u4e2a\u4e0e session \u76f8\u5173\u7684\u8def\u5f84\u3002","title":"\u8fd0\u7ef4 - zookeeper"},{"location":"ops-zk/#zookeeper","text":"\u7528\u9014 \u547d\u4ee4 \u5907\u6ce8 \u542f\u52a8ZK\u670d\u52a1 sh bin/zkServer.sh start \u67e5\u770bZK\u670d\u52a1\u72b6\u6001 sh bin/zkServer.sh status \u505c\u6b62ZK\u670d\u52a1 sh bin/zkServer.sh stop \u91cd\u542fZK\u670d\u52a1 sh bin/zkServer.sh restart \u8fde\u63a5\u670d\u52a1\u5668 sh bin/zkCli.sh -server 127.0.0.1:2181 \u67e5\u770b\u54ea\u4e2a\u8282\u70b9\u88ab\u9009\u62e9\u4f5c\u4e3afollower\u6216\u8005leader echo stat | nc 127.0.0.1 2181 \u6d4b\u8bd5\u662f\u5426\u542f\u52a8\u4e86\u8be5Server echo ruok | nc 127.0.0.1 2181 \u82e5\u56de\u590dimok\u8868\u793a\u5df2\u7ecf\u542f\u52a8 \u5217\u51fa\u672a\u7ecf\u5904\u7406\u7684\u4f1a\u8bdd\u548c\u4e34\u65f6\u8282\u70b9 echo dump | nc 127.0.0.1 2181 \u5173\u6389server echo kill | nc 127.0.0.1 2181 \u8f93\u51fa\u76f8\u5173\u670d\u52a1\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f echo conf | nc 127.0.0.1 2181 \u5217\u51fa\u6240\u6709\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\u7684\u5b8c\u5168\u7684\u8fde\u63a5 / \u4f1a\u8bdd\u7684\u8be6\u7ec6\u4fe1\u606f echo cons | nc 127.0.0.1 2181 \u8f93\u51fa\u5173\u4e8e\u670d\u52a1\u73af\u5883\u7684\u8be6\u7ec6\u4fe1\u606f echo envi |nc 127.0.0.1 2181 \u533a\u522b\u4e8e conf \u547d\u4ee4 \u5217\u51fa\u672a\u7ecf\u5904\u7406\u7684\u8bf7\u6c42 echo reqs | nc 127.0.0.1 2181 \u5217\u51fa\u670d\u52a1\u5668 watch \u7684\u8be6\u7ec6\u4fe1\u606f echo wchs | nc 127.0.0.1 2181 \u901a\u8fc7 session \u5217\u51fa\u670d\u52a1\u5668 watch \u7684\u8be6\u7ec6\u4fe1\u606f echo wchc | nc 127.0.0.1 2181 \u8f93\u51fa\u662f\u4e00\u4e2a\u4e0e watch \u76f8\u5173\u7684\u4f1a\u8bdd\u7684\u5217\u8868 \u901a\u8fc7\u8def\u5f84\u5217\u51fa\u670d\u52a1\u5668 watch \u7684\u8be6\u7ec6\u4fe1\u606f echo wchp | nc 127.0.0.1 2181 \u8f93\u51fa\u4e00\u4e2a\u4e0e session \u76f8\u5173\u7684\u8def\u5f84\u3002","title":"ZooKeeper \u5e38\u7528\u547d\u4ee4"},{"location":"ppt-agile-and-scrum/","text":"","title":"Ppt agile and scrum"},{"location":"ppt-git-tutorial/","text":"Git Tutorial \u00b6 Why Git \u00b6 Git tracks content rather than files Branches are lightweight and merging is easy , and I mean really easy . distributed It doesn\u2019t impose any workflow Git repositories are much smaller in file size than Subversion repositories. The staging area is awesome, it allows you to see the changes you will commit, commit partial changes and do various other stuff. You can rewrite history , which is great for preparing patch sets and fixing your mistakes ( before you publish the commits) Git vs SVN etc. \u00b6 Git is not better than Subversion. But is also not worse. It\u2019s different. SVN has the advantage that it\u2019s MUCH simpler to learn: There is your repository, all changes to towards it, if you know how to create, commit and checkout and you\u2019re ready to go and can pickup stuff like branching, update etc. later on. Git has the advantage that it\u2019s MUCH better suited if some developers are not always connected to the master repository. What are the differences between Subversion and Git? Git Basic \u00b6 GitFlow \u00b6 A successful Git branching model https://nvie.com/posts/a-successful-git-branching-model Introducing GitFlow https://datasift.github.io/gitflow/IntroducingGitFlow.html gitignore \u00b6 https://github.com/github/gitignore Generating a new SSH key and adding it to the ssh-agent \u00b6 https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent Commit Message \u00b6 Closing issues using keywords https://help.github.com/en/github/managing-your-work-on-github/closing-issues-using-keywords angular contributing commit message guidelines https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-guidelines Code Style \u00b6 Google Java Style Guide https://google.github.io/styleguide/javaguide.html google/styleguide https://github.com/google/styleguide styleguide/intellij-java-google-style.xml https://github.com/google/styleguide/blob/gh-pages/intellij-java-google-style.xml styleguide/eclipse-java-google-style.xml https://google.github.io/styleguide/javaguide.html Reformat and rearrange code https://www.jetbrains.com/help/idea/reformat-and-rearrange-code.html About pull request merges \u00b6 https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-request-merges # 1. To rebase and squash based on the remote branch git rebase -i /master # merge commits via `fixup`, etc # 2. Create a new branch and merge these commits into one git checkout -b /master git merge --squash","title":"Git \u5165\u95e8\u624b\u518c"},{"location":"ppt-git-tutorial/#git-tutorial","text":"","title":"Git Tutorial"},{"location":"ppt-git-tutorial/#why-git","text":"Git tracks content rather than files Branches are lightweight and merging is easy , and I mean really easy . distributed It doesn\u2019t impose any workflow Git repositories are much smaller in file size than Subversion repositories. The staging area is awesome, it allows you to see the changes you will commit, commit partial changes and do various other stuff. You can rewrite history , which is great for preparing patch sets and fixing your mistakes ( before you publish the commits)","title":"Why Git"},{"location":"ppt-git-tutorial/#git-vs-svn-etc","text":"Git is not better than Subversion. But is also not worse. It\u2019s different. SVN has the advantage that it\u2019s MUCH simpler to learn: There is your repository, all changes to towards it, if you know how to create, commit and checkout and you\u2019re ready to go and can pickup stuff like branching, update etc. later on. Git has the advantage that it\u2019s MUCH better suited if some developers are not always connected to the master repository. What are the differences between Subversion and Git?","title":"Git vs SVN etc."},{"location":"ppt-git-tutorial/#git-basic","text":"","title":"Git Basic"},{"location":"ppt-git-tutorial/#gitflow","text":"A successful Git branching model https://nvie.com/posts/a-successful-git-branching-model Introducing GitFlow https://datasift.github.io/gitflow/IntroducingGitFlow.html","title":"GitFlow"},{"location":"ppt-git-tutorial/#gitignore","text":"https://github.com/github/gitignore","title":"gitignore"},{"location":"ppt-git-tutorial/#generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent","text":"https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent","title":"Generating a new SSH key and adding it to the ssh-agent"},{"location":"ppt-git-tutorial/#commit-message","text":"Closing issues using keywords https://help.github.com/en/github/managing-your-work-on-github/closing-issues-using-keywords angular contributing commit message guidelines https://github.com/angular/angular/blob/master/CONTRIBUTING.md#-commit-message-guidelines","title":"Commit Message"},{"location":"ppt-git-tutorial/#code-style","text":"Google Java Style Guide https://google.github.io/styleguide/javaguide.html google/styleguide https://github.com/google/styleguide styleguide/intellij-java-google-style.xml https://github.com/google/styleguide/blob/gh-pages/intellij-java-google-style.xml styleguide/eclipse-java-google-style.xml https://google.github.io/styleguide/javaguide.html Reformat and rearrange code https://www.jetbrains.com/help/idea/reformat-and-rearrange-code.html","title":"Code Style"},{"location":"ppt-git-tutorial/#about-pull-request-merges","text":"https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-request-merges # 1. To rebase and squash based on the remote branch git rebase -i /master # merge commits via `fixup`, etc # 2. Create a new branch and merge these commits into one git checkout -b /master git merge --squash","title":"About pull request merges"},{"location":"ppt-kpi-management/","text":"","title":"Ppt kpi management"},{"location":"ppt-metrics-driven-development/","text":"MDD \u00b6 \u6765\u6e90 \u00b6 Mantas Klasavi\u010dius , NOV 30, 2012, https://www.infoq.com/articles/metrics-driven-development/ \u7406\u89e3 \u00b6 Kevin Sookocheff, August 9, 2016, Metrics-Driven Development https://sookocheff.com/post/mdd/mdd/ \u7406\u89e3 DevOps \u00b6 https://itrevolution.com/the-three-ways-principles-underpinning-devops/","title":"MDD"},{"location":"ppt-metrics-driven-development/#mdd","text":"","title":"MDD"},{"location":"ppt-metrics-driven-development/#_1","text":"Mantas Klasavi\u010dius , NOV 30, 2012, https://www.infoq.com/articles/metrics-driven-development/","title":"\u6765\u6e90"},{"location":"ppt-metrics-driven-development/#_2","text":"Kevin Sookocheff, August 9, 2016, Metrics-Driven Development https://sookocheff.com/post/mdd/mdd/","title":"\u7406\u89e3"},{"location":"ppt-metrics-driven-development/#devops","text":"https://itrevolution.com/the-three-ways-principles-underpinning-devops/","title":"\u7406\u89e3 DevOps"},{"location":"ppt-okr-management/","text":"","title":"Ppt okr management"},{"location":"tips-network-optimize/","text":"\u79d1\u5b66\u4e0a\u7f51 \u00b6 OneNote \u52a0\u901f \u00b6 \u539f\u59cb\u89c4\u5219\uff1a \u6765\u81ea\u7f51\u53cb\u7684\u5206\u4eab \u89c4\u5219\u8f6c\u6362\u5668\uff1a tindy2013/subconverter","title":"\u79d1\u5b66\u4e0a\u7f51"},{"location":"tips-network-optimize/#_1","text":"","title":"\u79d1\u5b66\u4e0a\u7f51"},{"location":"tips-network-optimize/#onenote","text":"\u539f\u59cb\u89c4\u5219\uff1a \u6765\u81ea\u7f51\u53cb\u7684\u5206\u4eab \u89c4\u5219\u8f6c\u6362\u5668\uff1a tindy2013/subconverter","title":"OneNote \u52a0\u901f"},{"location":"tips-restful-api-design/","text":"some blogs https://stackoverflow.com/questions/389169/best-practices-for-api-versioning https://www.mixmax.com/engineering/api-paging-built-the-right-way/ https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/ json API http://stateless.co/hal_specification.html https://jsonapi.org/ microsoft https://docs.microsoft.com/en-us/azure/architecture/best-practices/api-design https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md https://mathieu.fenniak.net/the-api-checklist/ swagger / openapi http://spec.openapis.org/oas/v3.0.3 https://swagger.io/specification/ Google / whitehouse https://github.com/WhiteHouse/api-standards/blob/master/README.md https://cloud.google.com/apigee/ Cool URIs don\u2019t change - Tim Berners-Lee","title":"Tips restful api design"},{"location":"mysql/tips-mysql-index/","text":"MySQL\u6570\u636e\u5e93\u8bbe\u8ba1\u89c4\u8303 \u00b6 1. \u89c4\u8303\u80cc\u666f\u4e0e\u76ee\u7684 \u00b6 MySQL\u6570\u636e\u5e93\u4e0e Oracle\u3001 SQL Server \u7b49\u6570\u636e\u5e93\u76f8\u6bd4\uff0c\u6709\u5176\u5185\u6838\u4e0a\u7684\u4f18\u52bf\u4e0e\u52a3\u52bf\u3002\u6211\u4eec\u5728\u4f7f\u7528MySQL\u6570\u636e\u5e93\u7684\u65f6\u5019\u9700\u8981\u9075\u5faa\u4e00\u5b9a\u89c4\u8303\uff0c\u626c\u957f\u907f\u77ed\u3002\u672c\u89c4\u8303\u65e8\u5728\u5e2e\u52a9\u6216\u6307\u5bfcRD\u3001QA\u3001OP\u7b49\u6280\u672f\u4eba\u5458\u505a\u51fa\u9002\u5408\u7ebf\u4e0a\u4e1a\u52a1\u7684\u6570\u636e\u5e93\u8bbe\u8ba1\u3002\u5728\u6570\u636e\u5e93\u53d8\u66f4\u548c\u5904\u7406\u6d41\u7a0b\u3001\u6570\u636e\u5e93\u8868\u8bbe\u8ba1\u3001SQL\u7f16\u5199\u7b49\u65b9\u9762\u4e88\u4ee5\u89c4\u8303\uff0c\u4ece\u800c\u4e3a\u516c\u53f8\u4e1a\u52a1\u7cfb\u7edf\u7a33\u5b9a\u3001\u5065\u5eb7\u5730\u8fd0\u884c\u63d0\u4f9b\u4fdd\u969c\u3002 2. \u8bbe\u8ba1\u89c4\u8303 \u00b6 2.1 \u6570\u636e\u5e93\u8bbe\u8ba1 \u00b6 \u4ee5\u4e0b\u6240\u6709\u89c4\u8303\u4f1a\u6309\u7167\u3010\u9ad8\u5371\u3011\u3001\u3010\u5f3a\u5236\u3011\u3001\u3010\u5efa\u8bae\u3011\u4e09\u4e2a\u7ea7\u522b\u8fdb\u884c\u6807\u6ce8\uff0c\u9075\u5b88\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u3002 \u5bf9\u4e8e\u4e0d\u6ee1\u8db3\u3010\u9ad8\u5371\u3011\u548c\u3010\u5f3a\u5236\u3011\u4e24\u4e2a\u7ea7\u522b\u7684\u8bbe\u8ba1\uff0cDBA\u4f1a\u5f3a\u5236\u6253\u56de\u8981\u6c42\u4fee\u6539\u3002 2.1.1 \u5e93\u540d \u00b6 \u3010\u5f3a\u5236\u3011\u5e93\u7684\u540d\u79f0\u5fc5\u987b\u63a7\u5236\u572832\u4e2a\u5b57\u7b26\u4ee5\u5185\uff0c\u76f8\u5173\u6a21\u5757\u7684\u8868\u540d\u4e0e\u8868\u540d\u4e4b\u95f4\u5c3d\u91cf\u4f53\u73b0join\u7684\u5173\u7cfb\uff0c\u5982user\u8868\u548cuser_login\u8868\u3002 \u3010\u5f3a\u5236\u3011\u5e93\u7684\u540d\u79f0\u683c\u5f0f\uff1a\u4e1a\u52a1\u7cfb\u7edf\u540d\u79f0_\u5b50\u7cfb\u7edf\u540d\uff0c\u540c\u4e00\u6a21\u5757\u4f7f\u7528\u7684\u8868\u540d\u5c3d\u91cf\u4f7f\u7528\u7edf\u4e00\u524d\u7f00\u3002 \u3010\u5f3a\u5236\u3011\u4e00\u822c\u5206\u5e93\u540d\u79f0\u547d\u540d\u683c\u5f0f\u662f \u5e93\u901a\u914d\u540d_\u7f16\u53f7 \uff0c\u7f16\u53f7\u4ece0\u5f00\u59cb\u9012\u589e\uff0c\u6bd4\u5982 wenda_001 \u4ee5\u65f6\u95f4\u8fdb\u884c\u5206\u5e93\u7684\u540d\u79f0\u683c\u5f0f\u662f\u201c\u5e93\u901a\u914d\u540d_\u65f6\u95f4\u201d \u3010\u5f3a\u5236\u3011\u521b\u5efa\u6570\u636e\u5e93\u65f6\u5fc5\u987b\u663e\u5f0f\u6307\u5b9a\u5b57\u7b26\u96c6\uff0c\u5e76\u4e14\u5b57\u7b26\u96c6\u53ea\u80fd\u662futf8\u6216\u8005utf8mb4\u3002\u521b\u5efa\u6570\u636e\u5e93SQL\u4e3e\u4f8b\uff1a create database db1 default character set utf8; \u3002 2.1.2 \u8868\u7ed3\u6784 \u00b6 \u3010\u5f3a\u5236\u3011\u8868\u548c\u5217\u7684\u540d\u79f0\u5fc5\u987b\u63a7\u5236\u572832\u4e2a\u5b57\u7b26\u4ee5\u5185\uff0c\u8868\u540d\u53ea\u80fd\u4f7f\u7528\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\uff0c\u4e00\u5f8b\u5c0f\u5199\u3002 \u3010\u5f3a\u5236\u3011\u8868\u540d\u8981\u6c42\u6a21\u5757\u540d\u5f3a\u76f8\u5173\uff0c\u5982\u5e08\u8d44\u7cfb\u7edf\u91c7\u7528\u201dsz\u201d\u4f5c\u4e3a\u524d\u7f00\uff0c\u6e20\u9053\u7cfb\u7edf\u91c7\u7528\u201dqd\u201d\u4f5c\u4e3a\u524d\u7f00\u7b49\u3002 \u3010\u5f3a\u5236\u3011\u521b\u5efa\u8868\u65f6\u5fc5\u987b\u663e\u5f0f\u6307\u5b9a\u5b57\u7b26\u96c6\u4e3autf8\u6216utf8mb4\u3002 \u3010\u5f3a\u5236\u3011\u521b\u5efa\u8868\u65f6\u5fc5\u987b\u663e\u5f0f\u6307\u5b9a\u8868\u5b58\u50a8\u5f15\u64ce\u7c7b\u578b\uff0c\u5982\u65e0\u7279\u6b8a\u9700\u6c42\uff0c\u4e00\u5f8b\u4e3aInnoDB\u3002\u5f53\u9700\u8981\u4f7f\u7528\u9664InnoDB/MyISAM/Memory\u4ee5\u5916\u7684\u5b58\u50a8\u5f15\u64ce\u65f6\uff0c\u5fc5\u987b\u901a\u8fc7DBA\u5ba1\u6838\u624d\u80fd\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002\u56e0\u4e3aInnodb\u8868\u652f\u6301\u4e8b\u52a1\u3001\u884c\u9501\u3001\u5b95\u673a\u6062\u590d\u3001MVCC\u7b49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u91cd\u8981\u7279\u6027\uff0c\u4e3a\u4e1a\u754c\u4f7f\u7528\u6700\u591a\u7684MySQL\u5b58\u50a8\u5f15\u64ce\u3002\u800c\u8fd9\u662f\u5176\u4ed6\u5927\u591a\u6570\u5b58\u50a8\u5f15\u64ce\u4e0d\u5177\u5907\u7684\uff0c\u56e0\u6b64\u9996\u63a8InnoDB\u3002 \u3010\u5f3a\u5236\u3011\u5efa\u8868\u5fc5\u987b\u6709comment \u3010\u5efa\u8bae\u3011\u5efa\u8868\u65f6\u5173\u4e8e\u4e3b\u952e\uff1a(1)\u5f3a\u5236\u8981\u6c42\u4e3b\u952e\u4e3aid\uff0c\u7c7b\u578b\u4e3aint\u6216bigint\uff0c\u4e14\u4e3a auto_increment(2) \u6807\u8bc6\u8868\u91cc\u6bcf\u4e00\u884c\u4e3b\u4f53\u7684\u5b57\u6bb5\u4e0d\u8981\u8bbe\u4e3a\u4e3b\u952e\uff0c\u5efa\u8bae\u8bbe\u4e3a\u5176\u4ed6\u5b57\u6bb5\u5982 user_id \uff0c order_id \u7b49\uff0c\u5e76\u5efa\u7acbunique key\u7d22\u5f15\uff08\u53ef\u53c2\u8003 cdb.teacher \u8868\u8bbe\u8ba1\uff09\u3002\u56e0\u4e3a\u5982\u679c\u8bbe\u4e3a\u4e3b\u952e\u4e14\u4e3b\u952e\u503c\u4e3a\u968f\u673a\u63d2\u5165\uff0c\u5219\u4f1a\u5bfc\u81f4innodb\u5185\u90e8page\u5206\u88c2\u548c\u5927\u91cf\u968f\u673aI/O\uff0c\u6027\u80fd\u4e0b\u964d\u3002 \u3010\u5efa\u8bae\u3011\u6838\u5fc3\u8868\uff08\u5982\u7528\u6237\u8868\uff0c\u91d1\u94b1\u76f8\u5173\u7684\u8868\uff09\u5fc5\u987b\u6709\u884c\u6570\u636e\u7684\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5 create_time \u548c\u6700\u540e\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5 update_time \uff0c\u4fbf\u4e8e\u67e5\u95ee\u9898\u3002 \u3010\u5efa\u8bae\u3011\u8868\u4e2d\u6240\u6709\u5b57\u6bb5\u5fc5\u987b\u90fd\u662f NOT NULL \u5c5e\u6027\uff0c\u4e1a\u52a1\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b9a\u4e49 DEFAULT \u503c\u3002\u56e0\u4e3a\u4f7f\u7528NULL\u503c\u4f1a\u5b58\u5728\u6bcf\u4e00\u884c\u90fd\u4f1a\u5360\u7528\u989d\u5916\u5b58\u50a8\u7a7a\u95f4\u3001\u6570\u636e\u8fc1\u79fb\u5bb9\u6613\u51fa\u9519\u3001\u805a\u5408\u51fd\u6570\u8ba1\u7b97\u7ed3\u679c\u504f\u5dee\u7b49\u95ee\u9898\u3002 \u3010\u5efa\u8bae\u3011\u5efa\u8bae\u5bf9\u8868\u91cc\u7684 blob \u3001 text \u7b49\u5927\u5b57\u6bb5\uff0c\u5782\u76f4\u62c6\u5206\u5230\u5176\u4ed6\u8868\u91cc\uff0c\u4ec5\u5728\u9700\u8981\u8bfb\u8fd9\u4e9b\u5bf9\u8c61\u7684\u65f6\u5019\u624d\u53bbselect\u3002 \u3010\u5efa\u8bae\u3011\u53cd\u8303\u5f0f\u8bbe\u8ba1\uff1a\u628a\u7ecf\u5e38\u9700\u8981join\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u5728\u5176\u4ed6\u8868\u91cc\u5197\u4f59\u4e00\u4efd\u3002\u5982 user_name \u5c5e\u6027\u5728 user_account \uff0c user_login_log \u7b49\u8868\u91cc\u5197\u4f59\u4e00\u4efd\uff0c\u51cf\u5c11join\u67e5\u8be2\u3002 \u3010\u5f3a\u5236\u3011\u4e2d\u95f4\u8868\u7528\u4e8e\u4fdd\u7559\u4e2d\u95f4\u7ed3\u679c\u96c6\uff0c\u540d\u79f0\u5fc5\u987b\u4ee5 tmp_ \u5f00\u5934\u3002\u5907\u4efd\u8868\u7528\u4e8e\u5907\u4efd\u6216\u6293\u53d6\u6e90\u8868\u5feb\u7167\uff0c\u540d\u79f0\u5fc5\u987b\u4ee5 bak_ \u5f00\u5934\u3002\u4e2d\u95f4\u8868\u548c\u5907\u4efd\u8868\u5b9a\u671f\u6e05\u7406\u3002 \u3010\u5f3a\u5236\u3011\u5bf9\u4e8e\u8d85\u8fc7100W\u884c\u7684\u5927\u8868\u8fdb\u884c alter table \uff0c\u5fc5\u987b\u7ecf\u8fc7DBA\u5ba1\u6838\uff0c\u5e76\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u6267\u884c\u3002\u56e0\u4e3a alter table \u4f1a\u4ea7\u751f\u8868\u9501\uff0c\u671f\u95f4\u963b\u585e\u5bf9\u4e8e\u8be5\u8868\u7684\u6240\u6709\u5199\u5165\uff0c\u5bf9\u4e8e\u4e1a\u52a1\u53ef\u80fd\u4f1a\u4ea7\u751f\u6781\u5927\u5f71\u54cd\u3002 2.1.2.1 \u8868\u7ed3\u6784(\u963f\u91cc\u5df4\u5df4\u534e\u5c71\u7248) \u00b6 \u3010\u5f3a\u5236\u3011\u8868\u8fbe\u662f\u4e0e\u5426\u6982\u5ff5\u7684\u5b57\u6bb5\uff0c\u5fc5\u987b\u4f7f\u7528is_xxx\u7684\u65b9\u5f0f\u547d\u540d\uff0c\u6570\u636e\u7c7b\u578b\u662funsigned tinyint\uff08 1\u8868\u793a\u662f\uff0c0\u8868\u793a\u5426\uff09\u3002 \u8bf4\u660e \uff1a\u4efb\u4f55\u5b57\u6bb5\u5982\u679c\u4e3a\u975e\u8d1f\u6570\uff0c\u5fc5\u987b\u662f unsigned \u3002 \u6b63\u4f8b \uff1a\u8868\u8fbe\u903b\u8f91\u5220\u9664\u7684\u5b57\u6bb5\u540d is_deleted \uff0c1\u8868\u793a\u5220\u9664\uff0c0\u8868\u793a\u672a\u5220\u9664\u3002 \u3010\u5f3a\u5236\u3011\u8868\u540d\u3001\u5b57\u6bb5\u540d\u5fc5\u987b\u4f7f\u7528\u5c0f\u5199\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u7981\u6b62\u51fa\u73b0\u6570\u5b57\u5f00\u5934\uff0c\u7981\u6b62\u4e24\u4e2a\u4e0b\u5212\u7ebf\u4e2d\u95f4\u53ea\u51fa\u73b0\u6570\u5b57\u3002\u6570\u636e\u5e93\u5b57\u6bb5\u540d\u7684\u4fee\u6539\u4ee3\u4ef7\u5f88\u5927\uff0c\u56e0\u4e3a\u65e0\u6cd5\u8fdb\u884c\u9884\u53d1\u5e03\uff0c\u6240\u4ee5\u5b57\u6bb5\u540d\u79f0\u9700\u8981\u614e\u91cd\u8003\u8651\u3002 \u8bf4\u660e \uff1aMySQL\u5728Windows\u4e0b\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4f46\u5728Linux\u4e0b\u9ed8\u8ba4\u662f\u533a\u5206\u5927\u5c0f\u5199\u3002\u56e0\u6b64\uff0c\u6570\u636e\u5e93\u540d\u3001\u8868\u540d\u3001\u5b57\u6bb5\u540d\uff0c\u90fd\u4e0d\u5141\u8bb8\u51fa\u73b0\u4efb\u4f55\u5927\u5199\u5b57\u6bcd\uff0c\u907f\u514d\u8282\u5916\u751f\u679d\u3002 \u6b63\u4f8b \uff1aaliyun_admin\uff0crdc_config\uff0clevel3_name \u53cd\u4f8b \uff1aAliyunAdmin\uff0crdcConfig\uff0clevel_3_name \u3010\u5f3a\u5236\u3011\u8868\u540d\u4e0d\u4f7f\u7528\u590d\u6570\u540d\u8bcd\u3002 \u8bf4\u660e \uff1a\u8868\u540d\u5e94\u8be5\u4ec5\u4ec5\u8868\u793a\u8868\u91cc\u9762\u7684\u5b9e\u4f53\u5185\u5bb9\uff0c\u4e0d\u5e94\u8be5\u8868\u793a\u5b9e\u4f53\u6570\u91cf\uff0c\u5bf9\u5e94\u4e8eDO\u7c7b\u540d\u4e5f\u662f\u5355\u6570\u5f62\u5f0f\uff0c\u7b26\u5408\u8868\u8fbe\u4e60\u60ef\u3002 \u3010\u5f3a\u5236\u3011\u7981\u7528\u4fdd\u7559\u5b57\uff0c\u5982 desc \u3001 range \u3001 match \u3001 delayed \u7b49\uff0c\u8bf7\u53c2\u8003MySQL\u5b98\u65b9\u4fdd\u7559\u5b57\u3002 \u3010\u5f3a\u5236\u3011\u4e3b\u952e\u7d22\u5f15\u540d\u4e3apk_\u5b57\u6bb5\u540d\uff1b\u552f\u4e00\u7d22\u5f15\u540d\u4e3auk_\u5b57\u6bb5\u540d\uff1b\u666e\u901a\u7d22\u5f15\u540d\u5219\u4e3aidx_\u5b57\u6bb5\u540d\u3002 \u8bf4\u660e \uff1apk_ \u5373primary key\uff1buk_ \u5373 unique key\uff1bidx_ \u5373index\u7684\u7b80\u79f0\u3002 \u3010\u5f3a\u5236\u3011\u5c0f\u6570\u7c7b\u578b\u4e3adecimal\uff0c\u7981\u6b62\u4f7f\u7528float\u548cdouble\u3002 \u8bf4\u660e \uff1afloat\u548cdouble\u5728\u5b58\u50a8\u7684\u65f6\u5019\uff0c\u5b58\u5728\u7cbe\u5ea6\u635f\u5931\u7684\u95ee\u9898\uff0c\u5f88\u53ef\u80fd\u5728\u503c\u7684\u6bd4\u8f83\u65f6\uff0c\u5f97\u5230\u4e0d\u6b63\u786e\u7684\u7ed3\u679c\u3002\u5982\u679c\u5b58\u50a8\u7684\u6570\u636e\u8303\u56f4\u8d85\u8fc7decimal\u7684\u8303\u56f4\uff0c\u5efa\u8bae\u5c06\u6570\u636e\u62c6\u6210\u6574\u6570\u548c\u5c0f\u6570\u5206\u5f00\u5b58\u50a8\u3002 \u3010\u5f3a\u5236\u3011\u5982\u679c\u5b58\u50a8\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u51e0\u4e4e\u76f8\u7b49\uff0c\u4f7f\u7528char\u5b9a\u957f\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 \u3010\u5f3a\u5236\u3011varchar\u662f\u53ef\u53d8\u957f\u5b57\u7b26\u4e32\uff0c\u4e0d\u9884\u5148\u5206\u914d\u5b58\u50a8\u7a7a\u95f4\uff0c\u957f\u5ea6\u4e0d\u8981\u8d85\u8fc75000\uff0c\u5982\u679c\u5b58\u50a8\u957f\u5ea6\u5927\u4e8e\u6b64\u503c\uff0c\u5b9a\u4e49\u5b57\u6bb5\u7c7b\u578b\u4e3atext\uff0c\u72ec\u7acb\u51fa\u6765\u4e00\u5f20\u8868\uff0c\u7528\u4e3b\u952e\u6765\u5bf9\u5e94\uff0c\u907f\u514d\u5f71\u54cd\u5176\u5b83\u5b57\u6bb5\u7d22\u5f15\u6548\u7387\u3002 \u3010\u5f3a\u5236\u3011\u8868\u5fc5\u5907\u4e09\u5b57\u6bb5\uff1aid, gmt_create, gmt_modified\u3002 \u8bf4\u660e \uff1a\u5176\u4e2did\u5fc5\u4e3a\u4e3b\u952e\uff0c\u7c7b\u578b\u4e3aunsigned bigint\u3001\u5355\u8868\u65f6\u81ea\u589e\u3001\u6b65\u957f\u4e3a1\u3002gmt_create, gmt_modified\u7684\u7c7b\u578b\u5747\u4e3adatetime\u7c7b\u578b\uff0c\u524d\u8005\u73b0\u5728\u65f6\u8868\u793a\u4e3b\u52a8\u521b\u5efa\uff0c\u540e\u8005\u8fc7\u53bb\u5206\u8bcd\u8868\u793a\u88ab\u52a8\u66f4\u65b0\u3002 \u3010\u63a8\u8350\u3011\u8868\u7684\u547d\u540d\u6700\u597d\u662f\u52a0\u4e0a\u201c\u4e1a\u52a1\u540d\u79f0_\u8868\u7684\u4f5c\u7528\u201d\u3002 \u6b63\u4f8b \uff1aalipay_task / force_project / trade_config \u3010\u63a8\u8350\u3011\u5e93\u540d\u4e0e\u5e94\u7528\u540d\u79f0\u5c3d\u91cf\u4e00\u81f4\u3002 \u3010\u63a8\u8350\u3011\u5982\u679c\u4fee\u6539\u5b57\u6bb5\u542b\u4e49\u6216\u5bf9\u5b57\u6bb5\u8868\u793a\u7684\u72b6\u6001\u8ffd\u52a0\u65f6\uff0c\u9700\u8981\u53ca\u65f6\u66f4\u65b0\u5b57\u6bb5\u6ce8\u91ca\u3002 \u3010\u63a8\u8350\u3011\u5b57\u6bb5\u5141\u8bb8\u9002\u5f53\u5197\u4f59\uff0c\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u4f46\u5fc5\u987b\u8003\u8651\u6570\u636e\u4e00\u81f4\u3002\u5197\u4f59\u5b57\u6bb5\u5e94\u9075\u5faa\uff1a 1\uff09\u4e0d\u662f\u9891\u7e41\u4fee\u6539\u7684\u5b57\u6bb5\u3002 2\uff09\u4e0d\u662fvarchar\u8d85\u957f\u5b57\u6bb5\uff0c\u66f4\u4e0d\u80fd\u662ftext\u5b57\u6bb5\u3002 \u6b63\u4f8b \uff1a\u5546\u54c1\u7c7b\u76ee\u540d\u79f0\u4f7f\u7528\u9891\u7387\u9ad8\uff0c\u5b57\u6bb5\u957f\u5ea6\u77ed\uff0c\u540d\u79f0\u57fa\u672c\u4e00\u6210\u4e0d\u53d8\uff0c\u53ef\u5728\u76f8\u5173\u8054\u7684\u8868\u4e2d\u5197\u4f59\u5b58\u50a8\u7c7b\u76ee\u540d\u79f0\uff0c\u907f\u514d\u5173\u8054\u67e5\u8be2\u3002 \u3010\u63a8\u8350\u3011\u5355\u8868\u884c\u6570\u8d85\u8fc7500\u4e07\u884c\u6216\u8005\u5355\u8868\u5bb9\u91cf\u8d85\u8fc72GB\uff0c\u624d\u63a8\u8350\u8fdb\u884c\u5206\u5e93\u5206\u8868\u3002 \u8bf4\u660e \uff1a\u5982\u679c\u9884\u8ba1\u4e09\u5e74\u540e\u7684\u6570\u636e\u91cf\u6839\u672c\u8fbe\u4e0d\u5230\u8fd9\u4e2a\u7ea7\u522b\uff0c\u8bf7\u4e0d\u8981\u5728\u521b\u5efa\u8868\u65f6\u5c31\u5206\u5e93\u5206\u8868\u3002 \u3010\u53c2\u8003\u3011\u5408\u9002\u7684\u5b57\u7b26\u5b58\u50a8\u957f\u5ea6\uff0c\u4e0d\u4f46\u8282\u7ea6\u6570\u636e\u5e93\u8868\u7a7a\u95f4\u3001\u8282\u7ea6\u7d22\u5f15\u5b58\u50a8\uff0c\u66f4\u91cd\u8981\u7684\u662f\u63d0\u5347\u68c0\u7d22\u901f\u5ea6\u3002 \u6b63\u4f8b \uff1a\u5982\u4e0b\u8868\uff0c\u5176\u4e2d\u65e0\u7b26\u53f7\u503c\u53ef\u4ee5\u907f\u514d\u8bef\u5b58\u8d1f\u6570\uff0c\u4e14\u6269\u5927\u4e86\u8868\u793a\u8303\u56f4\u3002 \u5bf9\u8c61 \u5e74\u9f84\u533a\u95f4 \u7c7b\u578b \u5b57\u8282 \u4eba 150\u5c81\u4e4b\u5185 unsigned tinyint 1 \u9f9f \u6570\u767e\u5c81 unsigned smallint 2 \u6050\u9f99\u5316\u77f3 \u6570\u5343\u4e07\u5c81 unsigned int 4 \u592a\u9633 \u7ea650\u4ebf\u5e74 unsigned bigint 8 2.1.3 \u5217\u6570\u636e\u7c7b\u578b\u4f18\u5316 \u00b6 \u3010\u5efa\u8bae\u3011\u8868\u4e2d\u7684\u81ea\u589e\u5217\uff08 auto_increment \u5c5e\u6027\uff09\uff0c\u63a8\u8350\u4f7f\u7528 bigint \u7c7b\u578b\u3002\u56e0\u4e3a\u65e0\u7b26\u53f7 int \u5b58\u50a8\u8303\u56f4\u4e3a -2147483648~2147483647 \uff08\u5927\u7ea621\u4ebf\u5de6\u53f3\uff09\uff0c\u6ea2\u51fa\u540e\u4f1a\u5bfc\u81f4\u62a5\u9519\u3002 \u3010\u5efa\u8bae\u3011\u4e1a\u52a1\u4e2d\u9009\u62e9\u6027\u5f88\u5c11\u7684\u72b6\u6001 status \u3001\u7c7b\u578b type \u7b49\u5b57\u6bb5\u63a8\u8350\u4f7f\u7528 tinytint \u6216\u8005 smallint \u7c7b\u578b\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\u3002 \u3010\u5efa\u8bae\u3011\u4e1a\u52a1\u4e2dIP\u5730\u5740\u5b57\u6bb5\u63a8\u8350\u4f7f\u7528 int \u7c7b\u578b\uff0c\u4e0d\u63a8\u8350\u7528 char(15) \u3002\u56e0\u4e3a int \u53ea\u53604\u5b57\u8282\uff0c\u53ef\u4ee5\u7528\u5982\u4e0b\u51fd\u6570\u76f8\u4e92\u8f6c\u6362\uff0c\u800c char(15) \u5360\u7528\u81f3\u5c1115\u5b57\u8282\u3002\u4e00\u65e6\u8868\u6570\u636e\u884c\u6570\u5230\u4e861\u4ebf\uff0c\u90a3\u4e48\u8981\u591a\u75281.1G\u5b58\u50a8\u7a7a\u95f4\u3002 SQL\uff1a select inet_aton('192.168.2.12'); select inet_ntoa(3232236044); PHP: ip2long(\u2018192.168.2.12\u2019); long2ip(3530427185); \u3010\u5efa\u8bae\u3011\u4e0d\u63a8\u8350\u4f7f\u7528 enum \uff0c set \u3002 \u56e0\u4e3a\u5b83\u4eec\u6d6a\u8d39\u7a7a\u95f4\uff0c\u4e14\u679a\u4e3e\u503c\u5199\u6b7b\u4e86\uff0c\u53d8\u66f4\u4e0d\u65b9\u4fbf\u3002\u63a8\u8350\u4f7f\u7528 tinyint \u6216 smallint \u3002 \u3010\u5efa\u8bae\u3011\u4e0d\u63a8\u8350\u4f7f\u7528 blob \uff0c text \u7b49\u7c7b\u578b\u3002\u5b83\u4eec\u90fd\u6bd4\u8f83\u6d6a\u8d39\u786c\u76d8\u548c\u5185\u5b58\u7a7a\u95f4\u3002\u5728\u52a0\u8f7d\u8868\u6570\u636e\u65f6\uff0c\u4f1a\u8bfb\u53d6\u5927\u5b57\u6bb5\u5230\u5185\u5b58\u91cc\u4ece\u800c\u6d6a\u8d39\u5185\u5b58\u7a7a\u95f4\uff0c\u5f71\u54cd\u7cfb\u7edf\u6027\u80fd\u3002\u5efa\u8bae\u548cPM\u3001RD\u6c9f\u901a\uff0c\u662f\u5426\u771f\u7684\u9700\u8981\u8fd9\u4e48\u5927\u5b57\u6bb5\u3002Innodb\u4e2d\u5f53\u4e00\u884c\u8bb0\u5f55\u8d85\u8fc78098\u5b57\u8282\u65f6\uff0c\u4f1a\u5c06\u8be5\u8bb0\u5f55\u4e2d\u9009\u53d6\u6700\u957f\u7684\u4e00\u4e2a\u5b57\u6bb5\u5c06\u5176768\u5b57\u8282\u653e\u5728\u539f\u59cbpage\u91cc\uff0c\u8be5\u5b57\u6bb5\u4f59\u4e0b\u5185\u5bb9\u653e\u5728 overflow-page \u91cc\u3002\u4e0d\u5e78\u7684\u662f\u5728 compact \u884c\u683c\u5f0f\u4e0b\uff0c\u539f\u59cb page \u548c overflow-page \u90fd\u4f1a\u52a0\u8f7d\u3002 \u3010\u5efa\u8bae\u3011\u5b58\u50a8\u91d1\u94b1\u7684\u5b57\u6bb5\uff0c\u5efa\u8bae\u7528 int \uff0c\u7a0b\u5e8f\u7aef\u4e58\u4ee5100\u548c\u9664\u4ee5100\u8fdb\u884c\u5b58\u53d6\u3002\u56e0\u4e3a int \u5360\u75284\u5b57\u8282\uff0c\u800c double \u5360\u75288\u5b57\u8282\uff0c\u7a7a\u95f4\u6d6a\u8d39\u3002 \u3010\u5efa\u8bae\u3011\u6587\u672c\u6570\u636e\u5c3d\u91cf\u7528 varchar \u5b58\u50a8\u3002\u56e0\u4e3a varchar \u662f\u53d8\u957f\u5b58\u50a8\uff0c\u6bd4 char \u66f4\u7701\u7a7a\u95f4\u3002MySQL server\u5c42\u89c4\u5b9a\u4e00\u884c\u6240\u6709\u6587\u672c\u6700\u591a\u5b5865535\u5b57\u8282\uff0c\u56e0\u6b64\u5728utf8\u5b57\u7b26\u96c6\u4e0b\u6700\u591a\u5b5821844\u4e2a\u5b57\u7b26\uff0c\u8d85\u8fc7\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a mediumtext \u5b57\u6bb5\u3002\u800c text \u5728utf8\u5b57\u7b26\u96c6\u4e0b\u6700\u591a\u5b5821844\u4e2a\u5b57\u7b26\uff0c mediumtext \u6700\u591a\u5b582^24/3\u4e2a\u5b57\u7b26\uff0c longtext \u6700\u591a\u5b582^32\u4e2a\u5b57\u7b26\u3002\u4e00\u822c\u5efa\u8bae\u7528 varchar \u7c7b\u578b\uff0c\u5b57\u7b26\u6570\u4e0d\u8981\u8d85\u8fc72700\u3002 \u3010\u5efa\u8bae\u3011\u65f6\u95f4\u7c7b\u578b\u5c3d\u91cf\u9009\u53d6 timestamp \u3002\u56e0\u4e3a datetime \u5360\u75288\u5b57\u8282\uff0c timestamp \u4ec5\u5360\u75284\u5b57\u8282\uff0c\u4f46\u662f\u8303\u56f4\u4e3a 1970-01-01 00:00:01 \u5230 2038-01-01 00:00:00 \u3002\u66f4\u4e3a\u9ad8\u9636\u7684\u65b9\u6cd5\uff0c\u9009\u7528 int \u6765\u5b58\u50a8\u65f6\u95f4\uff0c\u4f7f\u7528SQL\u51fd\u6570 unix_timestamp() \u548c from_unixtime() \u6765\u8fdb\u884c\u8f6c\u6362\u3002 2.1.4 \u7d22\u5f15\u8bbe\u8ba1 \u00b6 \u3010\u5f3a\u5236\u3011InnoDB\u8868\u5fc5\u987b\u4e3b\u952e\u4e3a id int/bigint auto_increment ,\u4e14\u4e3b\u952e\u503c\u7981\u6b62\u88ab\u66f4\u65b0\u3002 \u3010\u5efa\u8bae\u3011\u4e3b\u952e\u7684\u540d\u79f0\u4ee5\u201c pk_ \u201d\u5f00\u5934\uff0c\u552f\u4e00\u952e\u4ee5\u201c uk_ \u201d\u6216\u201c uq_ \u201d\u5f00\u5934\uff0c\u666e\u901a\u7d22\u5f15\u4ee5\u201c idx_ \u201d\u5f00\u5934\uff0c\u4e00\u5f8b\u4f7f\u7528\u5c0f\u5199\u683c\u5f0f\uff0c\u4ee5\u8868\u540d/\u5b57\u6bb5\u7684\u540d\u79f0\u6216\u7f29\u5199\u4f5c\u4e3a\u540e\u7f00\u3002 \u3010\u5f3a\u5236\u3011InnoDB\u548cMyISAM\u5b58\u50a8\u5f15\u64ce\u8868\uff0c\u7d22\u5f15\u7c7b\u578b\u5fc5\u987b\u4e3a BTREE \uff1bMEMORY\u8868\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9 HASH \u6216\u8005 BTREE \u7c7b\u578b\u7d22\u5f15\u3002 \u3010\u5f3a\u5236\u3011\u5355\u4e2a\u7d22\u5f15\u4e2d\u6bcf\u4e2a\u7d22\u5f15\u8bb0\u5f55\u7684\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc764KB\u3002 \u3010\u5efa\u8bae\u3011\u5355\u4e2a\u8868\u4e0a\u7684\u7d22\u5f15\u4e2a\u6570\u4e0d\u80fd\u8d85\u8fc77\u4e2a\u3002 \u3010\u5efa\u8bae\u3011\u5728\u5efa\u7acb\u7d22\u5f15\u65f6\uff0c\u591a\u8003\u8651\u5efa\u7acb\u8054\u5408\u7d22\u5f15\uff0c\u5e76\u628a\u533a\u5206\u5ea6\u6700\u9ad8\u7684\u5b57\u6bb5\u653e\u5728\u6700\u524d\u9762\u3002\u5982\u5217 userid \u7684\u533a\u5206\u5ea6\u53ef\u7531 select count(distinct userid) \u8ba1\u7b97\u51fa\u6765\u3002 \u3010\u5efa\u8bae\u3011\u5728\u591a\u8868join\u7684SQL\u91cc\uff0c\u4fdd\u8bc1\u88ab\u9a71\u52a8\u8868\u7684\u8fde\u63a5\u5217\u4e0a\u6709\u7d22\u5f15\uff0c\u8fd9\u6837join\u6267\u884c\u6548\u7387\u6700\u9ad8\u3002 \u3010\u5efa\u8bae\u3011\u5efa\u8868\u6216\u52a0\u7d22\u5f15\u65f6\uff0c\u4fdd\u8bc1\u8868\u91cc\u4e92\u76f8\u4e0d\u5b58\u5728\u5197\u4f59\u7d22\u5f15\u3002\u5bf9\u4e8eMySQL\u6765\u8bf4\uff0c\u5982\u679c\u8868\u91cc\u5df2\u7ecf\u5b58\u5728 key(a,b) \uff0c\u5219 key(a) \u4e3a\u5197\u4f59\u7d22\u5f15\uff0c\u9700\u8981\u5220\u9664\u3002 2.1.4.1 \u7d22\u5f15\u89c4\u7ea6(\u963f\u91cc\u5df4\u5df4\u534e\u5c71\u7248) \u00b6 \u3010\u5f3a\u5236\u3011\u4e1a\u52a1\u4e0a\u5177\u6709\u552f\u4e00\u7279\u6027\u7684\u5b57\u6bb5\uff0c\u5373\u4f7f\u662f\u591a\u4e2a\u5b57\u6bb5\u7684\u7ec4\u5408\uff0c\u4e5f\u5fc5\u987b\u5efa\u6210\u552f\u4e00\u7d22\u5f15\u3002 \u8bf4\u660e \uff1a\u4e0d\u8981\u4ee5\u4e3a\u552f\u4e00\u7d22\u5f15\u5f71\u54cd\u4e86insert\u901f\u5ea6\uff0c\u8fd9\u4e2a\u901f\u5ea6\u635f\u8017\u53ef\u4ee5\u5ffd\u7565\uff0c\u4f46\u63d0\u9ad8\u67e5\u627e\u901f\u5ea6\u662f\u660e\u663e\u7684\uff1b\u53e6\u5916\uff0c\u5373\u4f7f\u5728\u5e94\u7528\u5c42\u505a\u4e86\u975e\u5e38\u5b8c\u5584\u7684\u6821\u9a8c\u63a7\u5236\uff0c\u53ea\u8981\u6ca1\u6709\u552f\u4e00\u7d22\u5f15\uff0c\u6839\u636e\u58a8\u83f2\u5b9a\u5f8b\uff0c\u5fc5\u7136\u6709\u810f\u6570\u636e\u4ea7\u751f\u3002 \u3010\u5f3a\u5236\u3011\u8d85\u8fc7\u4e09\u4e2a\u8868\u7981\u6b62join\u3002\u9700\u8981join\u7684\u5b57\u6bb5\uff0c\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u7edd\u5bf9\u4e00\u81f4\uff1b\u591a\u8868\u5173\u8054\u67e5\u8be2\u65f6\uff0c\u4fdd\u8bc1\u88ab\u5173\u8054\u7684\u5b57\u6bb5\u9700\u8981\u6709\u7d22\u5f15\u3002 \u8bf4\u660e \uff1a\u5373\u4f7f\u53cc\u8868join\u4e5f\u8981\u6ce8\u610f\u8868\u7d22\u5f15\u3001SQL\u6027\u80fd\u3002 \u3010\u5f3a\u5236\u3011\u5728varchar\u5b57\u6bb5\u4e0a\u5efa\u7acb\u7d22\u5f15\u65f6\uff0c\u5fc5\u987b\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\uff0c\u6ca1\u5fc5\u8981\u5bf9\u5168\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15\uff0c\u6839\u636e\u5b9e\u9645\u6587\u672c\u533a\u5206\u5ea6\u51b3\u5b9a\u7d22\u5f15\u957f\u5ea6\u5373\u53ef\u3002 \u8bf4\u660e \uff1a\u7d22\u5f15\u7684\u957f\u5ea6\u4e0e\u533a\u5206\u5ea6\u662f\u4e00\u5bf9\u77db\u76fe\u4f53\uff0c\u4e00\u822c\u5bf9\u5b57\u7b26\u4e32\u7c7b\u578b\u6570\u636e\uff0c\u957f\u5ea6\u4e3a20\u7684\u7d22\u5f15\uff0c\u533a\u5206\u5ea6\u4f1a\u9ad8\u8fbe90%\u4ee5\u4e0a\uff0c\u53ef\u4ee5\u4f7f\u7528count(distinct left(\u5217\u540d, \u7d22\u5f15\u957f\u5ea6))/count(*)\u7684\u533a\u5206\u5ea6\u6765\u786e\u5b9a\u3002 \u3010\u5f3a\u5236\u3011\u9875\u9762\u641c\u7d22\u4e25\u7981\u5de6\u6a21\u7cca\u6216\u8005\u5168\u6a21\u7cca\uff0c\u5982\u679c\u9700\u8981\u8bf7\u8d70\u641c\u7d22\u5f15\u64ce\u6765\u89e3\u51b3\u3002 \u8bf4\u660e \uff1a\u7d22\u5f15\u6587\u4ef6\u5177\u6709B-Tree\u7684\u6700\u5de6\u524d\u7f00\u5339\u914d\u7279\u6027\uff0c\u5982\u679c\u5de6\u8fb9\u7684\u503c\u672a\u786e\u5b9a\uff0c\u90a3\u4e48\u65e0\u6cd5\u4f7f\u7528\u6b64\u7d22\u5f15\u3002 \u3010\u63a8\u8350\u3011\u5982\u679c\u6709order by\u7684\u573a\u666f\uff0c\u8bf7\u6ce8\u610f\u5229\u7528\u7d22\u5f15\u7684\u6709\u5e8f\u6027\u3002order by \u6700\u540e\u7684\u5b57\u6bb5\u662f\u7ec4\u5408\u7d22\u5f15\u7684\u4e00\u90e8\u5206\uff0c\u5e76\u4e14\u653e\u5728\u7d22\u5f15\u7ec4\u5408\u987a\u5e8f\u7684\u6700\u540e\uff0c\u907f\u514d\u51fa\u73b0file_sort\u7684\u60c5\u51b5\uff0c\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\u3002 \u6b63\u4f8b \uff1awhere a=? and b=? order by c; \u7d22\u5f15\uff1aa_b_c \u53cd\u4f8b \uff1a\u7d22\u5f15\u4e2d\u6709\u8303\u56f4\u67e5\u627e\uff0c\u90a3\u4e48\u7d22\u5f15\u6709\u5e8f\u6027\u65e0\u6cd5\u5229\u7528\uff0c\u5982\uff1aWHERE a>10 ORDER BY b; \u7d22\u5f15a_b\u65e0\u6cd5\u6392\u5e8f\u3002 \u3010\u63a8\u8350\u3011\u5229\u7528\u8986\u76d6\u7d22\u5f15\u6765\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c\uff0c\u907f\u514d\u56de\u8868\u3002 \u8bf4\u660e \uff1a\u5982\u679c\u4e00\u672c\u4e66\u9700\u8981\u77e5\u9053\u7b2c11\u7ae0\u662f\u4ec0\u4e48\u6807\u9898\uff0c\u4f1a\u7ffb\u5f00\u7b2c11\u7ae0\u5bf9\u5e94\u7684\u90a3\u4e00\u9875\u5417\uff1f\u76ee\u5f55\u6d4f\u89c8\u4e00\u4e0b\u5c31\u597d\uff0c\u8fd9\u4e2a\u76ee\u5f55\u5c31\u662f\u8d77\u5230\u8986\u76d6\u7d22\u5f15\u7684\u4f5c\u7528\u3002 \u6b63\u4f8b \uff1a\u80fd\u591f\u5efa\u7acb\u7d22\u5f15\u7684\u79cd\u7c7b\u5206\u4e3a\u4e3b\u952e\u7d22\u5f15\u3001\u552f\u4e00\u7d22\u5f15\u3001\u666e\u901a\u7d22\u5f15\u4e09\u79cd\uff0c\u800c\u8986\u76d6\u7d22\u5f15\u53ea\u662f\u4e00\u79cd\u67e5\u8be2\u7684\u4e00\u79cd\u6548\u679c\uff0c\u7528explain\u7684\u7ed3\u679c\uff0cextra\u5217\u4f1a\u51fa\u73b0\uff1ausing index\u3002 \u3010\u63a8\u8350\u3011\u5229\u7528\u5ef6\u8fdf\u5173\u8054\u6216\u8005\u5b50\u67e5\u8be2\u4f18\u5316\u8d85\u591a\u5206\u9875\u573a\u666f\u3002 \u8bf4\u660e \uff1aMySQL\u5e76\u4e0d\u662f\u8df3\u8fc7offset\u884c\uff0c\u800c\u662f\u53d6offset+N\u884c\uff0c\u7136\u540e\u8fd4\u56de\u653e\u5f03\u524doffset\u884c\uff0c\u8fd4\u56deN\u884c\uff0c\u90a3\u5f53offset\u7279\u522b\u5927\u7684\u65f6\u5019\uff0c\u6548\u7387\u5c31\u975e\u5e38\u7684\u4f4e\u4e0b\uff0c\u8981\u4e48\u63a7\u5236\u8fd4\u56de\u7684\u603b\u9875\u6570\uff0c\u8981\u4e48\u5bf9\u8d85\u8fc7\u7279\u5b9a\u9608\u503c\u7684\u9875\u6570\u8fdb\u884cSQL\u6539\u5199\u3002 \u6b63\u4f8b \uff1a\u5148\u5feb\u901f\u5b9a\u4f4d\u9700\u8981\u83b7\u53d6\u7684id\u6bb5\uff0c\u7136\u540e\u518d\u5173\u8054\uff1a SELECT a.* FROM \u88681 a, (select id from \u88681 where \u6761\u4ef6 LIMIT 100000,20 ) b where a.id=b.id \u3010\u63a8\u8350\u3011 SQL\u6027\u80fd\u4f18\u5316\u7684\u76ee\u6807\uff1a\u81f3\u5c11\u8981\u8fbe\u5230 range \u7ea7\u522b\uff0c\u8981\u6c42\u662fref\u7ea7\u522b\uff0c\u5982\u679c\u53ef\u4ee5\u662fconsts\u6700\u597d\u3002 \u8bf4\u660e \uff1a 1\uff09consts \u5355\u8868\u4e2d\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u5339\u914d\u884c\uff08\u4e3b\u952e\u6216\u8005\u552f\u4e00\u7d22\u5f15\uff09\uff0c\u5728\u4f18\u5316\u9636\u6bb5\u5373\u53ef\u8bfb\u53d6\u5230\u6570\u636e\u3002 2\uff09ref \u6307\u7684\u662f\u4f7f\u7528\u666e\u901a\u7684\u7d22\u5f15\uff08normal index\uff09\u3002 3\uff09range \u5bf9\u7d22\u5f15\u8fdb\u884c\u8303\u56f4\u68c0\u7d22\u3002 \u53cd\u4f8b \uff1aexplain\u8868\u7684\u7ed3\u679c\uff0ctype=index\uff0c\u7d22\u5f15\u7269\u7406\u6587\u4ef6\u5168\u626b\u63cf\uff0c\u901f\u5ea6\u975e\u5e38\u6162\uff0c\u8fd9\u4e2aindex\u7ea7\u522b\u6bd4\u8f83range\u8fd8\u4f4e\uff0c\u4e0e\u5168\u8868\u626b\u63cf\u662f\u5c0f\u5deb\u89c1\u5927\u5deb\u3002 \u3010\u63a8\u8350\u3011\u5efa\u7ec4\u5408\u7d22\u5f15\u7684\u65f6\u5019\uff0c\u533a\u5206\u5ea6\u6700\u9ad8\u7684\u5728\u6700\u5de6\u8fb9\u3002 \u6b63\u4f8b \uff1a\u5982\u679cwhere a=? and b=? \uff0ca\u5217\u7684\u51e0\u4e4e\u63a5\u8fd1\u4e8e\u552f\u4e00\u503c\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u5355\u5efaidx_a\u7d22\u5f15\u5373\u53ef\u3002 \u8bf4\u660e \uff1a\u5b58\u5728\u975e\u7b49\u53f7\u548c\u7b49\u53f7\u6df7\u5408\u5224\u65ad\u6761\u4ef6\u65f6\uff0c\u5728\u5efa\u7d22\u5f15\u65f6\uff0c\u8bf7\u628a\u7b49\u53f7\u6761\u4ef6\u7684\u5217\u524d\u7f6e\u3002\u5982\uff1awhere a>? and b=? \u90a3\u4e48\u5373\u4f7fa\u7684\u533a\u5206\u5ea6\u66f4\u9ad8\uff0c\u4e5f\u5fc5\u987b\u628ab\u653e\u5728\u7d22\u5f15\u7684\u6700\u524d\u5217\u3002 \u3010\u63a8\u8350\u3011\u9632\u6b62\u56e0\u5b57\u6bb5\u7c7b\u578b\u4e0d\u540c\u9020\u6210\u7684\u9690\u5f0f\u8f6c\u6362\uff0c\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\u3002 \u3010\u53c2\u8003\u3011\u521b\u5efa\u7d22\u5f15\u65f6\u907f\u514d\u6709\u5982\u4e0b\u6781\u7aef\u8bef\u89e3\uff1a 1\uff09\u5b81\u6ee5\u52ff\u7f3a\u3002\u8ba4\u4e3a\u4e00\u4e2a\u67e5\u8be2\u5c31\u9700\u8981\u5efa\u4e00\u4e2a\u7d22\u5f15\u3002 2\uff09\u5b81\u7f3a\u52ff\u6ee5\u3002\u8ba4\u4e3a\u7d22\u5f15\u4f1a\u6d88\u8017\u7a7a\u95f4\u3001\u4e25\u91cd\u62d6\u6162\u66f4\u65b0\u548c\u65b0\u589e\u901f\u5ea6\u3002 3\uff09\u62b5\u5236\u60df\u4e00\u7d22\u5f15\u3002\u8ba4\u4e3a\u4e1a\u52a1\u7684\u60df\u4e00\u6027\u4e00\u5f8b\u9700\u8981\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u201c\u5148\u67e5\u540e\u63d2\u201d\u65b9\u5f0f\u89e3\u51b3\u3002 2.1.5 \u5206\u5e93\u5206\u8868\u3001\u5206\u533a\u8868 \u00b6 \u3010\u5f3a\u5236\u3011\u5206\u533a\u8868\u7684\u5206\u533a\u5b57\u6bb5\uff08 partition-key \uff09\u5fc5\u987b\u6709\u7d22\u5f15\uff0c\u6216\u8005\u662f\u7ec4\u5408\u7d22\u5f15\u7684\u9996\u5217\u3002 \u3010\u5f3a\u5236\u3011\u5355\u4e2a\u5206\u533a\u8868\u4e2d\u7684\u5206\u533a\uff08\u5305\u62ec\u5b50\u5206\u533a\uff09\u4e2a\u6570\u4e0d\u80fd\u8d85\u8fc71024\u3002 \u3010\u5f3a\u5236\u3011\u4e0a\u7ebf\u524dRD\u6216\u8005DBA\u5fc5\u987b\u6307\u5b9a\u5206\u533a\u8868\u7684\u521b\u5efa\u3001\u6e05\u7406\u7b56\u7565\u3002 \u3010\u5f3a\u5236\u3011\u8bbf\u95ee\u5206\u533a\u8868\u7684SQL\u5fc5\u987b\u5305\u542b\u5206\u533a\u952e\u3002 \u3010\u5efa\u8bae\u3011\u5355\u4e2a\u5206\u533a\u6587\u4ef6\u4e0d\u8d85\u8fc72G\uff0c\u603b\u5927\u5c0f\u4e0d\u8d85\u8fc750G\u3002\u5efa\u8bae\u603b\u5206\u533a\u6570\u4e0d\u8d85\u8fc720\u4e2a\u3002 \u3010\u5f3a\u5236\u3011\u5bf9\u4e8e\u5206\u533a\u8868\u6267\u884c alter table \u64cd\u4f5c\uff0c\u5fc5\u987b\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u6267\u884c\u3002 \u3010\u5f3a\u5236\u3011\u91c7\u7528\u5206\u5e93\u7b56\u7565\u7684\uff0c\u5e93\u7684\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc71024 \u3010\u5f3a\u5236\u3011\u91c7\u7528\u5206\u8868\u7b56\u7565\u7684\uff0c\u8868\u7684\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc74096 \u3010\u5efa\u8bae\u3011\u5355\u4e2a\u5206\u8868\u4e0d\u8d85\u8fc7500W\u884c\uff0cibd\u6587\u4ef6\u5927\u5c0f\u4e0d\u8d85\u8fc72G\uff0c\u8fd9\u6837\u624d\u80fd\u8ba9\u6570\u636e\u5206\u5e03\u5f0f\u53d8\u5f97\u6027\u80fd\u66f4\u4f73\u3002 \u3010\u5efa\u8bae\u3011\u6c34\u5e73\u5206\u8868\u5c3d\u91cf\u7528\u53d6\u6a21\u65b9\u5f0f\uff0c\u65e5\u5fd7\u3001\u62a5\u8868\u7c7b\u6570\u636e\u5efa\u8bae\u91c7\u7528\u65e5\u671f\u8fdb\u884c\u5206\u8868\u3002 2.1.6 \u5b57\u7b26\u96c6 \u00b6 \u3010\u5f3a\u5236\u3011\u6570\u636e\u5e93\u672c\u8eab\u5e93\u3001\u8868\u3001\u5217\u6240\u6709\u5b57\u7b26\u96c6\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\uff0c\u4e3a utf8 \u6216 utf8mb4 \u3002 \u3010\u5f3a\u5236\u3011\u524d\u7aef\u7a0b\u5e8f\u5b57\u7b26\u96c6\u6216\u8005\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u5b57\u7b26\u96c6\uff0c\u4e0e\u6570\u636e\u5e93\u3001\u8868\u7684\u5b57\u7b26\u96c6\u5fc5\u987b\u4e00\u81f4\uff0c\u7edf\u4e00\u4e3a utf8 \u3002 2.1.7 \u7a0b\u5e8f\u5c42DAO\u8bbe\u8ba1\u5efa\u8bae \u00b6 \u3010\u5efa\u8bae\u3011\u65b0\u7684\u4ee3\u7801\u4e0d\u8981\u7528model\uff0c\u63a8\u8350\u4f7f\u7528\u624b\u52a8\u62fcSQL+\u7ed1\u5b9a\u53d8\u91cf\u4f20\u5165\u53c2\u6570\u7684\u65b9\u5f0f\u3002\u56e0\u4e3amodel\u867d\u7136\u53ef\u4ee5\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u64cd\u4f5cdb\uff0c\u4f46\u662f\u5176\u4f7f\u7528\u4e0d\u5f53\u5f88\u5bb9\u6613\u9020\u6210\u751f\u6210\u7684SQL\u975e\u5e38\u590d\u6742\uff0c\u4e14model\u5c42\u81ea\u5df1\u505a\u7684\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u6027\u80fd\u8f83\u5dee\uff0c\u6700\u7ec8\u5bfc\u81f4\u6570\u636e\u5e93\u6027\u80fd\u4e0b\u964d\u3002 \u3010\u5efa\u8bae\u3011\u524d\u7aef\u7a0b\u5e8f\u8fde\u63a5MySQL\u6216\u8005redis\uff0c\u5fc5\u987b\u8981\u6709\u8fde\u63a5\u8d85\u65f6\u548c\u5931\u8d25\u91cd\u8fde\u673a\u5236\uff0c\u4e14\u5931\u8d25\u91cd\u8bd5\u5fc5\u987b\u6709\u95f4\u9694\u65f6\u95f4\u3002 \u3010\u5efa\u8bae\u3011\u524d\u7aef\u7a0b\u5e8f\u62a5\u9519\u91cc\u5c3d\u91cf\u80fd\u591f\u63d0\u793aMySQL\u6216redis\u539f\u751f\u6001\u7684\u62a5\u9519\u4fe1\u606f\uff0c\u4fbf\u4e8e\u6392\u67e5\u9519\u8bef\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8e\u6709\u8fde\u63a5\u6c60\u7684\u524d\u7aef\u7a0b\u5e8f\uff0c\u5fc5\u987b\u6839\u636e\u4e1a\u52a1\u9700\u8981\u914d\u7f6e\u521d\u59cb\u3001\u6700\u5c0f\u3001\u6700\u5927\u8fde\u63a5\u6570\uff0c\u8d85\u65f6\u65f6\u95f4\u4ee5\u53ca\u8fde\u63a5\u56de\u6536\u673a\u5236\uff0c\u5426\u5219\u4f1a\u8017\u5c3d\u6570\u636e\u5e93\u8fde\u63a5\u8d44\u6e90\uff0c\u9020\u6210\u7ebf\u4e0a\u4e8b\u6545\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8elog\u6216history\u7c7b\u578b\u7684\u8868\uff0c\u968f\u65f6\u95f4\u589e\u957f\u5bb9\u6613\u8d8a\u6765\u8d8a\u5927\uff0c\u56e0\u6b64\u4e0a\u7ebf\u524dRD\u6216\u8005DBA\u5fc5\u987b\u5efa\u7acb\u8868\u6570\u636e\u6e05\u7406\u6216\u5f52\u6863\u65b9\u6848\u3002 \u3010\u5efa\u8bae\u3011\u5728\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u9636\u6bb5\uff0cRD\u5fc5\u987b\u8003\u8651\u5e76\u89c4\u907f\u6570\u636e\u5e93\u4e2d\u4e3b\u4ece\u5ef6\u8fdf\u5bf9\u4e8e\u4e1a\u52a1\u7684\u5f71\u54cd\u3002\u5c3d\u91cf\u907f\u514d\u4ece\u5e93\u77ed\u65f6\u5ef6\u8fdf\uff0820\u79d2\u4ee5\u5185\uff09\u5bf9\u4e1a\u52a1\u9020\u6210\u5f71\u54cd\uff0c\u5efa\u8bae\u5f3a\u5236\u4e00\u81f4\u6027\u7684\u8bfb\u5f00\u542f\u4e8b\u52a1\u8d70\u4e3b\u5e93\uff0c\u6216\u66f4\u65b0\u540e\u8fc7\u4e00\u6bb5\u65f6\u95f4\u518d\u53bb\u8bfb\u4ece\u5e93\u3002 \u3010\u5efa\u8bae\u3011\u591a\u4e2a\u5e76\u53d1\u4e1a\u52a1\u903b\u8f91\u8bbf\u95ee\u540c\u4e00\u5757\u6570\u636e\uff08innodb\u8868\uff09\u65f6\uff0c\u4f1a\u5728\u6570\u636e\u5e93\u7aef\u4ea7\u751f\u884c\u9501\u751a\u81f3\u8868\u9501\u5bfc\u81f4\u5e76\u53d1\u4e0b\u964d\uff0c\u56e0\u6b64\u5efa\u8bae\u66f4\u65b0\u7c7bSQL\u5c3d\u91cf\u57fa\u4e8e\u4e3b\u952e\u53bb\u66f4\u65b0\u3002 \u3010\u5efa\u8bae\u3011\u4e1a\u52a1\u903b\u8f91\u4e4b\u95f4\u52a0\u9501\u987a\u5e8f\u5c3d\u91cf\u4fdd\u6301\u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6b7b\u9501\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8e\u5355\u8868\u8bfb\u5199\u6bd4\u5927\u4e8e10:1\u7684\u6570\u636e\u884c\u6216\u5355\u4e2a\u5217\uff0c\u53ef\u4ee5\u5c06\u70ed\u70b9\u6570\u636e\u653e\u5728\u7f13\u5b58\u91cc\uff08\u5982mecache\u6216redis\uff09\uff0c\u52a0\u5feb\u8bbf\u95ee\u901f\u5ea6\uff0c\u964d\u4f4eMySQL\u538b\u529b\u3002 2.1.8 \u4e00\u4e2a\u89c4\u8303\u7684\u5efa\u8868\u8bed\u53e5\u793a\u4f8b \u00b6 \u4e00\u4e2a\u8f83\u4e3a\u89c4\u8303\u7684\u5efa\u8868\u8bed\u53e5\u4e3a\uff1a CREATE TABLE user ( `id` bigint(11) NOT NULL AUTO_INCREMENT, `user_id` bigint(11) NOT NULL COMMENT \u2018\u7528\u6237id\u2019 `username` varchar(45) NOT NULL COMMENT '\u771f\u5b9e\u59d3\u540d', `email` varchar(30) NOT NULL COMMENT \u2018\u7528\u6237\u90ae\u7bb1\u2019, `nickname` varchar(45) NOT NULL COMMENT '\u6635\u79f0', `avatar` int(11) NOT NULL COMMENT '\u5934\u50cf', `birthday` date NOT NULL COMMENT '\u751f\u65e5', `sex` tinyint(4) DEFAULT '0' COMMENT '\u6027\u522b', `short_introduce` varchar(150) DEFAULT NULL COMMENT '\u4e00\u53e5\u8bdd\u4ecb\u7ecd\u81ea\u5df1\uff0c\u6700\u591a50\u4e2a\u6c49\u5b57', `user_resume` varchar(300) NOT NULL COMMENT '\u7528\u6237\u63d0\u4ea4\u7684\u7b80\u5386\u5b58\u653e\u5730\u5740', `user_register_ip` int NOT NULL COMMENT \u2018\u7528\u6237\u6ce8\u518c\u65f6\u7684\u6e90ip\u2019, `create_time` timestamp NOT NULL COMMENT \u2018\u7528\u6237\u8bb0\u5f55\u521b\u5efa\u7684\u65f6\u95f4\u2019, `update_time` timestamp NOT NULL COMMENT \u2018\u7528\u6237\u8d44\u6599\u4fee\u6539\u7684\u65f6\u95f4\u2019, `user_review_status` tinyint NOT NULL COMMENT \u2018\u7528\u6237\u8d44\u6599\u5ba1\u6838\u72b6\u6001\uff0c1\u4e3a\u901a\u8fc7\uff0c2\u4e3a\u5ba1\u6838\u4e2d\uff0c3\u4e3a\u672a\u901a\u8fc7\uff0c4\u4e3a\u8fd8\u672a\u63d0\u4ea4\u5ba1\u6838\u2019, PRIMARY KEY (`id`), UNIQUE KEY `idx_user_id` (`user_id`), KEY `idx_username`(`username`), KEY `idx_create_time`(`create_time`,`user_review_status`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='\u7f51\u7ad9\u7528\u6237\u57fa\u672c\u4fe1\u606f'; 2.1.9 ORM\u6620\u5c04(\u963f\u91cc\u5df4\u5df4\u534e\u5c71\u7248) \u00b6 \u3010\u5f3a\u5236\u3011\u5728\u8868\u67e5\u8be2\u4e2d\uff0c\u4e00\u5f8b\u4e0d\u8981\u4f7f\u7528 * \u4f5c\u4e3a\u67e5\u8be2\u7684\u5b57\u6bb5\u5217\u8868\uff0c\u9700\u8981\u54ea\u4e9b\u5b57\u6bb5\u5fc5\u987b\u660e\u786e\u5199\u660e\u3002 \u8bf4\u660e \uff1a1\uff09\u589e\u52a0\u67e5\u8be2\u5206\u6790\u5668\u89e3\u6790\u6210\u672c\u30022\uff09\u589e\u51cf\u5b57\u6bb5\u5bb9\u6613\u4e0eresultMap\u914d\u7f6e\u4e0d\u4e00\u81f4\u3002 \u3010\u5f3a\u5236\u3011POJO\u7c7b\u7684\u5e03\u5c14\u5c5e\u6027\u4e0d\u80fd\u52a0is\uff0c\u800c\u6570\u636e\u5e93\u5b57\u6bb5\u5fc5\u987b\u52a0is_\uff0c\u8981\u6c42\u5728resultMap\u4e2d\u8fdb\u884c\u5b57\u6bb5\u4e0e\u5c5e\u6027\u4e4b\u95f4\u7684\u6620\u5c04\u3002 \u8bf4\u660e \uff1a\u53c2\u89c1\u5b9a\u4e49POJO\u7c7b\u4ee5\u53ca\u6570\u636e\u5e93\u5b57\u6bb5\u5b9a\u4e49\u89c4\u5b9a\uff0c\u5728 \u4e2d\u589e\u52a0\u6620\u5c04\uff0c\u662f\u5fc5\u987b\u7684\u3002\u5728MyBatis Generator\u751f\u6210\u7684\u4ee3\u7801\u4e2d\uff0c\u9700\u8981\u8fdb\u884c\u5bf9\u5e94\u7684\u4fee\u6539\u3002 \u3010\u5f3a\u5236\u3011\u4e0d\u8981\u7528resultClass\u5f53\u8fd4\u56de\u53c2\u6570\uff0c\u5373\u4f7f\u6240\u6709\u7c7b\u5c5e\u6027\u540d\u4e0e\u6570\u636e\u5e93\u5b57\u6bb5\u4e00\u4e00\u5bf9\u5e94\uff0c\u4e5f\u9700\u8981\u5b9a\u4e49\uff1b\u53cd\u8fc7\u6765\uff0c\u6bcf\u4e00\u4e2a\u8868\u4e5f\u5fc5\u7136\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5bf9\u5e94\u3002 \u8bf4\u660e \uff1a\u914d\u7f6e\u6620\u5c04\u5173\u7cfb\uff0c\u4f7f\u5b57\u6bb5\u4e0eDO\u7c7b\u89e3\u8026\uff0c\u65b9\u4fbf\u7ef4\u62a4\u3002 \u3010\u5f3a\u5236\u3011sql.xml\u914d\u7f6e\u53c2\u6570\u4f7f\u7528\uff1a#{}\uff0c#param# \u4e0d\u8981\u4f7f\u7528${} \u6b64\u79cd\u65b9\u5f0f\u5bb9\u6613\u51fa\u73b0SQL\u6ce8\u5165\u3002 \u3010\u5f3a\u5236\u3011iBATIS\u81ea\u5e26\u7684queryForList(String statementName,int start,int size)\u4e0d\u63a8\u8350\u4f7f\u7528\u3002 \u8bf4\u660e \uff1a\u5176\u5b9e\u73b0\u65b9\u5f0f\u662f\u5728\u6570\u636e\u5e93\u53d6\u5230statementName\u5bf9\u5e94\u7684SQL\u8bed\u53e5\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u518d\u901a\u8fc7subList\u53d6start,size\u7684\u5b50\u96c6\u5408\u3002 \u6b63\u4f8b \uff1a Map<String, Object> map = new HashMap<String, Object>(); map.put(\"start\", start); map.put(\"size\", size); \u3010\u5f3a\u5236\u3011\u4e0d\u5141\u8bb8\u76f4\u63a5\u62ffHashMap\u4e0eHashtable\u4f5c\u4e3a\u67e5\u8be2\u7ed3\u679c\u96c6\u7684\u8f93\u51fa\u3002 \u8bf4\u660e \uff1aresultClass=\u201dHashtable\u201d\uff0c\u4f1a\u7f6e\u5165\u5b57\u6bb5\u540d\u548c\u5c5e\u6027\u503c\uff0c\u4f46\u662f\u503c\u7684\u7c7b\u578b\u4e0d\u53ef\u63a7\u3002 \u3010\u5f3a\u5236\u3011\u66f4\u65b0\u6570\u636e\u8868\u8bb0\u5f55\u65f6\uff0c\u5fc5\u987b\u540c\u65f6\u66f4\u65b0\u8bb0\u5f55\u5bf9\u5e94\u7684gmt_modified\u5b57\u6bb5\u503c\u4e3a\u5f53\u524d\u65f6\u95f4\u3002 \u3010\u63a8\u8350\u3011\u4e0d\u8981\u5199\u4e00\u4e2a\u5927\u800c\u5168\u7684\u6570\u636e\u66f4\u65b0\u63a5\u53e3\u3002\u4f20\u5165\u4e3aPOJO\u7c7b\uff0c\u4e0d\u7ba1\u662f\u4e0d\u662f\u81ea\u5df1\u7684\u76ee\u6807\u66f4\u65b0\u5b57\u6bb5\uff0c\u90fd\u8fdb\u884cupdate table set c1=value1,c2=value2,c3=value3; \u8fd9\u662f\u4e0d\u5bf9\u7684\u3002\u6267\u884cSQL\u65f6\uff0c\u4e0d\u8981\u66f4\u65b0\u65e0\u6539\u52a8\u7684\u5b57\u6bb5\uff0c\u4e00\u662f\u6613\u51fa\u9519\uff1b\u4e8c\u662f\u6548\u7387\u4f4e\uff1b\u4e09\u662f\u589e\u52a0binlog\u5b58\u50a8\u3002 \u3010\u53c2\u8003\u3011 @Transactional \u4e8b\u52a1\u4e0d\u8981\u6ee5\u7528\u3002\u4e8b\u52a1\u4f1a\u5f71\u54cd\u6570\u636e\u5e93\u7684QPS\uff0c\u53e6\u5916\u4f7f\u7528\u4e8b\u52a1\u7684\u5730\u65b9\u9700\u8981\u8003\u8651\u5404\u65b9\u9762\u7684\u56de\u6eda\u65b9\u6848\uff0c\u5305\u62ec\u7f13\u5b58\u56de\u6eda\u3001\u641c\u7d22\u5f15\u64ce\u56de\u6eda\u3001\u6d88\u606f\u8865\u507f\u3001\u7edf\u8ba1\u4fee\u6b63\u7b49\u3002 \u3010\u53c2\u8003\u3011 <isEqual> \u4e2d\u7684compareValue\u662f\u4e0e\u5c5e\u6027\u503c\u5bf9\u6bd4\u7684\u5e38\u91cf\uff0c\u4e00\u822c\u662f\u6570\u5b57\uff0c\u8868\u793a\u76f8\u7b49\u65f6\u5e26\u4e0a\u6b64\u6761\u4ef6\uff1b <isNotEmpty> \u8868\u793a\u4e0d\u4e3a\u7a7a\u4e14\u4e0d\u4e3anull\u65f6\u6267\u884c\uff1b <isNotNull> \u8868\u793a\u4e0d\u4e3anull\u503c\u65f6\u6267\u884c\u3002 2.2 SQL\u7f16\u5199 \u00b6 2.2.1 DML\u8bed\u53e5 \u00b6 \u3010\u5f3a\u5236\u3011SELECT\u8bed\u53e5\u5fc5\u987b\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5\u540d\u79f0\uff0c\u7981\u6b62\u5199\u6210 * \u3002\u56e0\u4e3a select * \u4f1a\u5c06\u4e0d\u8be5\u8bfb\u7684\u6570\u636e\u4e5f\u4eceMySQL\u91cc\u8bfb\u51fa\u6765\uff0c\u9020\u6210\u7f51\u5361\u538b\u529b\u3002\u4e14\u8868\u5b57\u6bb5\u4e00\u65e6\u66f4\u65b0\uff0c\u4f46model\u5c42\u6ca1\u6709\u6765\u5f97\u53ca\u66f4\u65b0\u7684\u8bdd\uff0c\u7cfb\u7edf\u4f1a\u62a5\u9519\u3002 \u3010\u5f3a\u5236\u3011insert\u8bed\u53e5\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5\u540d\u79f0\uff0c\u4e0d\u8981\u5199\u6210 insert into t1 values(\u2026) \uff0c\u9053\u7406\u540c\u4e0a\u3002 \u3010\u5efa\u8bae\u3011 insert into\u2026values(XX),(XX),(XX)\u2026 \u3002\u8fd9\u91ccXX\u7684\u503c\u4e0d\u8981\u8d85\u8fc75000\u4e2a\u3002\u503c\u8fc7\u591a\u867d\u7136\u4e0a\u7ebf\u5f88\u5f88\u5feb\uff0c\u4f46\u4f1a\u5f15\u8d77\u4e3b\u4ece\u540c\u6b65\u5ef6\u8fdf\u3002 \u3010\u5efa\u8bae\u3011SELECT\u8bed\u53e5\u4e0d\u8981\u4f7f\u7528 UNION \uff0c\u63a8\u8350\u4f7f\u7528 UNION ALL \uff0c\u5e76\u4e14 UNION \u5b50\u53e5\u4e2a\u6570\u9650\u5236\u57285\u4e2a\u4ee5\u5185\u3002\u56e0\u4e3a union all \u4e0d\u9700\u8981\u53bb\u91cd\uff0c\u8282\u7701\u6570\u636e\u5e93\u8d44\u6e90\uff0c\u63d0\u9ad8\u6027\u80fd\u3002 \u3010\u5efa\u8bae\u3011in\u503c\u5217\u8868\u9650\u5236\u5728500\u4ee5\u5185\u3002\u4f8b\u5982 select\u2026 where userid in(\u2026.500\u4e2a\u4ee5\u5185\u2026) \uff0c\u8fd9\u4e48\u505a\u662f\u4e3a\u4e86\u51cf\u5c11\u5e95\u5c42\u626b\u63cf\uff0c\u51cf\u8f7b\u6570\u636e\u5e93\u538b\u529b\u4ece\u800c\u52a0\u901f\u67e5\u8be2\u3002 \u3010\u5efa\u8bae\u3011\u4e8b\u52a1\u91cc\u6279\u91cf\u66f4\u65b0\u6570\u636e\u9700\u8981\u63a7\u5236\u6570\u91cf\uff0c\u8fdb\u884c\u5fc5\u8981\u7684sleep\uff0c\u505a\u5230\u5c11\u91cf\u591a\u6b21\u3002 \u3010\u5f3a\u5236\u3011\u4e8b\u52a1\u6d89\u53ca\u7684\u8868\u5fc5\u987b\u5168\u90e8\u662finnodb\u8868\u3002\u5426\u5219\u4e00\u65e6\u5931\u8d25\u4e0d\u4f1a\u5168\u90e8\u56de\u6eda\uff0c\u4e14\u6613\u9020\u6210\u4e3b\u4ece\u5e93\u540c\u6b65\u7ec8\u7aef\u3002 \u3010\u5f3a\u5236\u3011\u5199\u5165\u548c\u4e8b\u52a1\u53d1\u5f80\u4e3b\u5e93\uff0c\u53ea\u8bfbSQL\u53d1\u5f80\u4ece\u5e93\u3002 \u3010\u5f3a\u5236\u3011\u9664\u9759\u6001\u8868\u6216\u5c0f\u8868\uff08100\u884c\u4ee5\u5185\uff09\uff0cDML\u8bed\u53e5\u5fc5\u987b\u6709where\u6761\u4ef6\uff0c\u4e14\u4f7f\u7528\u7d22\u5f15\u67e5\u627e\u3002 \u3010\u5f3a\u5236\u3011\u751f\u4ea7\u73af\u5883\u7981\u6b62\u4f7f\u7528 hint \uff0c\u5982 sql_no_cache \uff0c force index \uff0c ignore key \uff0c straight join \u7b49\u3002\u56e0\u4e3a hint \u662f\u7528\u6765\u5f3a\u5236SQL\u6309\u7167\u67d0\u4e2a\u6267\u884c\u8ba1\u5212\u6765\u6267\u884c\uff0c\u4f46\u968f\u7740\u6570\u636e\u91cf\u53d8\u5316\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u81ea\u5df1\u5f53\u521d\u7684\u9884\u5224\u662f\u6b63\u786e\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u76f8\u4fe1MySQL\u4f18\u5316\u5668\uff01 \u3010\u5f3a\u5236\u3011where\u6761\u4ef6\u91cc\u7b49\u53f7\u5de6\u53f3\u5b57\u6bb5\u7c7b\u578b\u5fc5\u987b\u4e00\u81f4\uff0c\u5426\u5219\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u3002 \u3010\u5efa\u8bae\u3011 SELECT|UPDATE|DELETE|REPLACE \u8981\u6709WHERE\u5b50\u53e5\uff0c\u4e14WHERE\u5b50\u53e5\u7684\u6761\u4ef6\u5fc5\u9700\u4f7f\u7528\u7d22\u5f15\u67e5\u627e\u3002 \u3010\u5f3a\u5236\u3011\u751f\u4ea7\u6570\u636e\u5e93\u4e2d\u5f3a\u70c8\u4e0d\u63a8\u8350\u5927\u8868\u4e0a\u53d1\u751f\u5168\u8868\u626b\u63cf\uff0c\u4f46\u5bf9\u4e8e100\u884c\u4ee5\u4e0b\u7684\u9759\u6001\u8868\u53ef\u4ee5\u5168\u8868\u626b\u63cf\u3002\u67e5\u8be2\u6570\u636e\u91cf\u4e0d\u8981\u8d85\u8fc7\u8868\u884c\u6570\u768425%\uff0c\u5426\u5219\u4e0d\u4f1a\u5229\u7528\u7d22\u5f15\u3002 \u3010\u5f3a\u5236\u3011WHERE \u5b50\u53e5\u4e2d\u7981\u6b62\u53ea\u4f7f\u7528\u5168\u6a21\u7cca\u7684LIKE\u6761\u4ef6\u8fdb\u884c\u67e5\u627e\uff0c\u5fc5\u987b\u6709\u5176\u4ed6\u7b49\u503c\u6216\u8303\u56f4\u67e5\u8be2\u6761\u4ef6\uff0c\u5426\u5219\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u3002 \u3010\u5efa\u8bae\u3011\u7d22\u5f15\u5217\u4e0d\u8981\u4f7f\u7528\u51fd\u6570\u6216\u8868\u8fbe\u5f0f\uff0c\u5426\u5219\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u3002\u5982 where length(name)='Admin' \u6216 where user_id+2=10023 \u3002 \u3010\u5efa\u8bae\u3011\u51cf\u5c11\u4f7f\u7528or\u8bed\u53e5\uff0c\u53ef\u5c06or\u8bed\u53e5\u4f18\u5316\u4e3aunion\uff0c\u7136\u540e\u5728\u5404\u4e2awhere\u6761\u4ef6\u4e0a\u5efa\u7acb\u7d22\u5f15\u3002\u5982 where a=1 or b=2 \u4f18\u5316\u4e3a where a=1\u2026 union \u2026where b=2, key(a),key(b) \u3002 \u3010\u5efa\u8bae\u3011\u5206\u9875\u67e5\u8be2\uff0c\u5f53limit\u8d77\u70b9\u8f83\u9ad8\u65f6\uff0c\u53ef\u5148\u7528\u8fc7\u6ee4\u6761\u4ef6\u8fdb\u884c\u8fc7\u6ee4\u3002\u5982 select a,b,c from t1 limit 10000,20; \u4f18\u5316\u4e3a: select a,b,c from t1 where id>10000 limit 20; \u3002 2.2.2 \u591a\u8868\u8fde\u63a5 \u00b6 \u3010\u5f3a\u5236\u3011\u7981\u6b62\u8de8db\u7684join\u8bed\u53e5\u3002\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u6a21\u5757\u95f4\u8026\u5408\uff0c\u4e3a\u6570\u636e\u5e93\u62c6\u5206\u5960\u5b9a\u575a\u5b9e\u57fa\u7840\u3002 \u3010\u5f3a\u5236\u3011\u7981\u6b62\u5728\u4e1a\u52a1\u7684\u66f4\u65b0\u7c7bSQL\u8bed\u53e5\u4e2d\u4f7f\u7528join\uff0c\u6bd4\u5982 update t1 join t2\u2026 \u3002 \u3010\u5efa\u8bae\u3011\u4e0d\u5efa\u8bae\u4f7f\u7528\u5b50\u67e5\u8be2\uff0c\u5efa\u8bae\u5c06\u5b50\u67e5\u8be2SQL\u62c6\u5f00\u7ed3\u5408\u7a0b\u5e8f\u591a\u6b21\u67e5\u8be2\uff0c\u6216\u4f7f\u7528join\u6765\u4ee3\u66ff\u5b50\u67e5\u8be2\u3002 \u3010\u5efa\u8bae\u3011\u7ebf\u4e0a\u73af\u5883\uff0c\u591a\u8868join\u4e0d\u8981\u8d85\u8fc73\u4e2a\u8868\u3002 \u3010\u5efa\u8bae\u3011\u591a\u8868\u8fde\u63a5\u67e5\u8be2\u63a8\u8350\u4f7f\u7528\u522b\u540d\uff0c\u4e14SELECT\u5217\u8868\u4e2d\u8981\u7528\u522b\u540d\u5f15\u7528\u5b57\u6bb5\uff0c\u6570\u636e\u5e93.\u8868\u683c\u5f0f\uff0c\u5982 select a from db1.table1 alias1 where \u2026 \u3002 \u3010\u5efa\u8bae\u3011\u5728\u591a\u8868join\u4e2d\uff0c\u5c3d\u91cf\u9009\u53d6\u7ed3\u679c\u96c6\u8f83\u5c0f\u7684\u8868\u4f5c\u4e3a\u9a71\u52a8\u8868\uff0c\u6765join\u5176\u4ed6\u8868\u3002 2.2.3 \u4e8b\u52a1 \u00b6 \u3010\u5efa\u8bae\u3011\u4e8b\u52a1\u4e2d INSERT|UPDATE|DELETE|REPLACE \u8bed\u53e5\u64cd\u4f5c\u7684\u884c\u6570\u63a7\u5236\u57282000\u4ee5\u5185\uff0c\u4ee5\u53caWHERE\u5b50\u53e5\u4e2dIN\u5217\u8868\u7684\u4f20\u53c2\u4e2a\u6570\u63a7\u5236\u5728500\u4ee5\u5185\u3002 \u3010\u5efa\u8bae\u3011\u6279\u91cf\u64cd\u4f5c\u6570\u636e\u65f6\uff0c\u9700\u8981\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u95f4\u9694\u65f6\u95f4\uff0c\u8fdb\u884c\u5fc5\u8981\u7684sleep\uff0c\u4e00\u822c\u5efa\u8bae\u503c5-10\u79d2\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8e\u6709 auto_increment \u5c5e\u6027\u5b57\u6bb5\u7684\u8868\u7684\u63d2\u5165\u64cd\u4f5c\uff0c\u5e76\u53d1\u9700\u8981\u63a7\u5236\u5728200\u4ee5\u5185\u3002 \u3010\u5f3a\u5236\u3011\u7a0b\u5e8f\u8bbe\u8ba1\u5fc5\u987b\u8003\u8651\u201c\u6570\u636e\u5e93\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u201d\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u5305\u62ec\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u3002\u7ebf\u4e0a\u5efa\u8bae\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u4e3a repeatable-read \u3002 \u3010\u5efa\u8bae\u3011\u4e8b\u52a1\u91cc\u5305\u542bSQL\u4e0d\u8d85\u8fc75\u4e2a\uff08\u652f\u4ed8\u4e1a\u52a1\u9664\u5916\uff09\u3002\u56e0\u4e3a\u8fc7\u957f\u7684\u4e8b\u52a1\u4f1a\u5bfc\u81f4\u9501\u6570\u636e\u8f83\u4e45\uff0cMySQL\u5185\u90e8\u7f13\u5b58\u3001\u8fde\u63a5\u6d88\u8017\u8fc7\u591a\u7b49\u96ea\u5d29\u95ee\u9898\u3002 \u3010\u5efa\u8bae\u3011\u4e8b\u52a1\u91cc\u66f4\u65b0\u8bed\u53e5\u5c3d\u91cf\u57fa\u4e8e\u4e3b\u952e\u6216 unique key \uff0c\u5982 update \u2026 where id=XX ; \u5426\u5219\u4f1a\u4ea7\u751f\u95f4\u9699\u9501\uff0c\u5185\u90e8\u6269\u5927\u9501\u5b9a\u8303\u56f4\uff0c\u5bfc\u81f4\u7cfb\u7edf\u6027\u80fd\u4e0b\u964d\uff0c\u4ea7\u751f\u6b7b\u9501\u3002 \u3010\u5efa\u8bae\u3011\u5c3d\u91cf\u628a\u4e00\u4e9b\u5178\u578b\u5916\u90e8\u8c03\u7528\u79fb\u51fa\u4e8b\u52a1\uff0c\u5982\u8c03\u7528webservice\uff0c\u8bbf\u95ee\u6587\u4ef6\u5b58\u50a8\u7b49\uff0c\u4ece\u800c\u907f\u514d\u4e8b\u52a1\u8fc7\u957f\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8eMySQL\u4e3b\u4ece\u5ef6\u8fdf\u4e25\u683c\u654f\u611f\u7684select\u8bed\u53e5\uff0c\u8bf7\u5f00\u542f\u4e8b\u52a1\u5f3a\u5236\u8bbf\u95ee\u4e3b\u5e93\u3002 2.2.4 \u6392\u5e8f\u548c\u5206\u7ec4 \u00b6 \u3010\u5efa\u8bae\u3011\u51cf\u5c11\u4f7f\u7528 order by \uff0c\u548c\u4e1a\u52a1\u6c9f\u901a\u80fd\u4e0d\u6392\u5e8f\u5c31\u4e0d\u6392\u5e8f\uff0c\u6216\u5c06\u6392\u5e8f\u653e\u5230\u7a0b\u5e8f\u7aef\u53bb\u505a\u3002 order by \u3001 group by \u3001 distinct \u8fd9\u4e9b\u8bed\u53e5\u8f83\u4e3a\u8017\u8d39CPU\uff0c\u6570\u636e\u5e93\u7684CPU\u8d44\u6e90\u662f\u6781\u5176\u5b9d\u8d35\u7684\u3002 \u3010\u5efa\u8bae\u3011 order by \u3001 group by \u3001 distinct \u8fd9\u4e9bSQL\u5c3d\u91cf\u5229\u7528\u7d22\u5f15\u76f4\u63a5\u68c0\u7d22\u51fa\u6392\u5e8f\u597d\u7684\u6570\u636e\u3002\u5982 where a=1 order by b \u53ef\u4ee5\u5229\u7528 key(a,b) \u3002 \u3010\u5efa\u8bae\u3011\u5305\u542b\u4e86 order by \u3001 group by \u3001 distinct \u8fd9\u4e9b\u67e5\u8be2\u7684\u8bed\u53e5\uff0cwhere\u6761\u4ef6\u8fc7\u6ee4\u51fa\u6765\u7684\u7ed3\u679c\u96c6\u8bf7\u4fdd\u6301\u57281000\u884c\u4ee5\u5185\uff0c\u5426\u5219SQL\u4f1a\u5f88\u6162\u3002 2.2.5 \u7ebf\u4e0a\u7981\u6b62\u4f7f\u7528\u7684SQL\u8bed\u53e5 \u00b6 \u3010\u9ad8\u5371\u3011\u7981\u7528 update|delete t1 \u2026 where a=XX limit XX; \u8fd9\u79cd\u5e26limit\u7684\u66f4\u65b0\u8bed\u53e5\u3002\u56e0\u4e3a\u4f1a\u5bfc\u81f4\u4e3b\u4ece\u4e0d\u4e00\u81f4\uff0c\u5bfc\u81f4\u6570\u636e\u9519\u4e71\u3002\u5efa\u8bae\u52a0\u4e0a order by PK \u3002 \u3010\u9ad8\u5371\u3011\u7981\u6b62\u4f7f\u7528\u5173\u8054\u5b50\u67e5\u8be2\uff0c\u5982 update t1 set \u2026 where name in(select name from user where\u2026); \u6548\u7387\u6781\u5176\u4f4e\u4e0b\u3002 \u3010\u5f3a\u5236\u3011\u7981\u7528procedure\u3001function\u3001trigger\u3001views\u3001event\u3001\u5916\u952e\u7ea6\u675f\u3002\u56e0\u4e3a\u4ed6\u4eec\u6d88\u8017\u6570\u636e\u5e93\u8d44\u6e90\uff0c\u964d\u4f4e\u6570\u636e\u5e93\u5b9e\u4f8b\u53ef\u6269\u5c55\u6027\u3002\u63a8\u8350\u90fd\u5728\u7a0b\u5e8f\u7aef\u5b9e\u73b0\u3002 \u3010\u5f3a\u5236\u3011\u7981\u7528 insert into \u2026on duplicate key update\u2026 \u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e0b\uff0c\u4f1a\u9020\u6210\u4e3b\u4ece\u4e0d\u4e00\u81f4\u3002 \u3010\u5f3a\u5236\u3011\u7981\u6b62\u8054\u8868\u66f4\u65b0\u8bed\u53e5\uff0c\u5982 update t1,t2 where t1.id=t2.id\u2026 \u3002 2.2.6 SQL\u8bed\u53e5(\u963f\u91cc\u5df4\u5df4\u534e\u5c71\u7248) \u00b6 \u3010\u5f3a\u5236\u3011\u4e0d\u8981\u4f7f\u7528count(\u5217\u540d)\u6216count(\u5e38\u91cf)\u6765\u66ff\u4ee3count( )\uff0ccount( )\u662fSQL92\u5b9a\u4e49\u7684\u6807\u51c6\u7edf\u8ba1\u884c\u6570\u7684\u8bed\u6cd5\uff0c\u8ddf\u6570\u636e\u5e93\u65e0\u5173\uff0c\u8ddfNULL\u548c\u975eNULL\u65e0\u5173\u3002 \u8bf4\u660e \uff1acount(*)\u4f1a\u7edf\u8ba1\u503c\u4e3aNULL\u7684\u884c\uff0c\u800ccount(\u5217\u540d)\u4e0d\u4f1a\u7edf\u8ba1\u6b64\u5217\u4e3aNULL\u503c\u7684\u884c\u3002 \u3010\u5f3a\u5236\u3011count(distinct col) \u8ba1\u7b97\u8be5\u5217\u9664NULL\u4e4b\u5916\u7684\u4e0d\u91cd\u590d\u884c\u6570\uff0c\u6ce8\u610f count(distinct col1, col2) \u5982\u679c\u5176\u4e2d\u4e00\u5217\u5168\u4e3aNULL\uff0c\u90a3\u4e48\u5373\u4f7f\u53e6\u4e00\u5217\u6709\u4e0d\u540c\u7684\u503c\uff0c\u4e5f\u8fd4\u56de\u4e3a0\u3002 \u3010\u5f3a\u5236\u3011\u5f53\u67d0\u4e00\u5217\u7684\u503c\u5168\u662fNULL\u65f6\uff0ccount(col)\u7684\u8fd4\u56de\u7ed3\u679c\u4e3a0\uff0c\u4f46sum(col)\u7684\u8fd4\u56de\u7ed3\u679c\u4e3aNULL\uff0c\u56e0\u6b64\u4f7f\u7528sum()\u65f6\u9700\u6ce8\u610fNPE\u95ee\u9898\u3002 \u6b63\u4f8b \uff1a\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u6765\u907f\u514dsum\u7684NPE\u95ee\u9898\uff1a SELECT IF(ISNULL(SUM(g)),0,SUM(g)) FROM table; \u3010\u5f3a\u5236\u3011\u4f7f\u7528 ISNULL() \u6765\u5224\u65ad\u662f\u5426\u4e3aNULL\u503c\u3002 \u8bf4\u660e\uff1aNULL\u4e0e\u4efb\u4f55\u503c\u7684\u76f4\u63a5\u6bd4\u8f83\u90fd\u4e3aNULL\u3002 1\uff09 NULL<>NULL \u7684\u8fd4\u56de\u7ed3\u679c\u662fNULL\uff0c\u800c\u4e0d\u662f false \u3002 2\uff09 NULL=NULL \u7684\u8fd4\u56de\u7ed3\u679c\u662fNULL\uff0c\u800c\u4e0d\u662f true \u3002 3\uff09 NULL<>1 \u7684\u8fd4\u56de\u7ed3\u679c\u662fNULL\uff0c\u800c\u4e0d\u662f true \u3002 \u3010\u5f3a\u5236\u3011 \u5728\u4ee3\u7801\u4e2d\u5199\u5206\u9875\u67e5\u8be2\u903b\u8f91\u65f6\uff0c\u82e5count\u4e3a0\u5e94\u76f4\u63a5\u8fd4\u56de\uff0c\u907f\u514d\u6267\u884c\u540e\u9762\u7684\u5206\u9875\u8bed\u53e5\u3002 \u3010\u5f3a\u5236\u3011\u4e0d\u5f97\u4f7f\u7528\u5916\u952e\u4e0e\u7ea7\u8054\uff0c\u4e00\u5207\u5916\u952e\u6982\u5ff5\u5fc5\u987b\u5728\u5e94\u7528\u5c42\u89e3\u51b3\u3002 \u8bf4\u660e \uff1a\u4ee5\u5b66\u751f\u548c\u6210\u7ee9\u7684\u5173\u7cfb\u4e3a\u4f8b\uff0c\u5b66\u751f\u8868\u4e2d\u7684student_id\u662f\u4e3b\u952e\uff0c\u90a3\u4e48\u6210\u7ee9\u8868\u4e2d\u7684student_id\u5219\u4e3a\u5916\u952e\u3002\u5982\u679c\u66f4\u65b0\u5b66\u751f\u8868\u4e2d\u7684student_id\uff0c\u540c\u65f6\u89e6\u53d1\u6210\u7ee9\u8868\u4e2d\u7684student_id\u66f4\u65b0\uff0c\u5373\u4e3a\u7ea7\u8054\u66f4\u65b0\u3002\u5916\u952e\u4e0e\u7ea7\u8054\u66f4\u65b0\u9002\u7528\u4e8e\u5355\u673a\u4f4e\u5e76\u53d1\uff0c\u4e0d\u9002\u5408\u5206\u5e03\u5f0f\u3001\u9ad8\u5e76\u53d1\u96c6\u7fa4\uff1b\u7ea7\u8054\u66f4\u65b0\u662f\u5f3a\u963b\u585e\uff0c\u5b58\u5728\u6570\u636e\u5e93\u66f4\u65b0\u98ce\u66b4\u7684\u98ce\u9669\uff1b\u5916\u952e\u5f71\u54cd\u6570\u636e\u5e93\u7684\u63d2\u5165\u901f\u5ea6\u3002 \u3010\u5f3a\u5236\u3011\u7981\u6b62\u4f7f\u7528\u5b58\u50a8\u8fc7\u7a0b\uff0c\u5b58\u50a8\u8fc7\u7a0b\u96be\u4ee5\u8c03\u8bd5\u548c\u6269\u5c55\uff0c\u66f4\u6ca1\u6709\u79fb\u690d\u6027\u3002 \u3010\u5f3a\u5236\u3011\u6570\u636e\u8ba2\u6b63\uff08\u7279\u522b\u662f\u5220\u9664\u3001\u4fee\u6539\u8bb0\u5f55\u64cd\u4f5c\uff09\u65f6\uff0c\u8981\u5148select\uff0c\u907f\u514d\u51fa\u73b0\u8bef\u5220\u9664\uff0c\u786e\u8ba4\u65e0\u8bef\u624d\u80fd\u6267\u884c\u66f4\u65b0\u8bed\u53e5\u3002 \u3010\u63a8\u8350\u3011in\u64cd\u4f5c\u80fd\u907f\u514d\u5219\u907f\u514d\uff0c\u82e5\u5b9e\u5728\u907f\u514d\u4e0d\u4e86\uff0c\u9700\u8981\u4ed4\u7ec6\u8bc4\u4f30in\u540e\u8fb9\u7684\u96c6\u5408\u5143\u7d20\u6570\u91cf\uff0c\u63a7\u5236\u57281000\u4e2a\u4e4b\u5185\u3002 \u3010\u53c2\u8003\u3011\u5982\u679c\u6709\u5168\u7403\u5316\u9700\u8981\uff0c\u6240\u6709\u7684\u5b57\u7b26\u5b58\u50a8\u4e0e\u8868\u793a\uff0c\u5747\u4ee5utf-8\u7f16\u7801\uff0c\u6ce8\u610f\u5b57\u7b26\u7edf\u8ba1\u51fd\u6570\u7684\u533a\u522b\u3002 \u8bf4\u660e \uff1a SELECT LENGTH(\"\u8f7b\u677e\u5de5\u4f5c\")\uff1b \u8fd4\u56de\u4e3a12 SELECT CHARACTER_LENGTH(\"\u8f7b\u677e\u5de5\u4f5c\")\uff1b \u8fd4\u56de\u4e3a4 \u5982\u679c\u9700\u8981\u5b58\u50a8\u8868\u60c5\uff0c\u90a3\u4e48\u9009\u62e9utf8mb4\u6765\u8fdb\u884c\u5b58\u50a8\uff0c\u6ce8\u610f\u5b83\u4e0eutf-8\u7f16\u7801\u7684\u533a\u522b\u3002 11. \u3010\u53c2\u8003\u3011 TRUNCATE TABLE \u6bd4 DELETE \u901f\u5ea6\u5feb\uff0c\u4e14\u4f7f\u7528\u7684\u7cfb\u7edf\u548c\u4e8b\u52a1\u65e5\u5fd7\u8d44\u6e90\u5c11\uff0c\u4f46TRUNCATE\u65e0\u4e8b\u52a1\u4e14\u4e0d\u89e6\u53d1trigger\uff0c\u6709\u53ef\u80fd\u9020\u6210\u4e8b\u6545\uff0c\u6545\u4e0d\u5efa\u8bae\u5728\u5f00\u53d1\u4ee3\u7801\u4e2d\u4f7f\u7528\u6b64\u8bed\u53e5\u3002 \u8bf4\u660e \uff1aTRUNCATE TABLE \u5728\u529f\u80fd\u4e0a\u4e0e\u4e0d\u5e26 WHERE \u5b50\u53e5\u7684 DELETE \u8bed\u53e5\u76f8\u540c\u3002 3. \u53c2\u8003\u8d44\u6599 \u00b6 Archery MySQL \u6570\u636e\u5e93\u8bbe\u8ba1\u89c4\u8303 \u5982\u4f55\u7528\u4e00\u6b3e\u5c0f\u5de5\u5177\u5927\u5927\u52a0\u901fMySQL SQL\u8bed\u53e5\u4f18\u5316 \u963f\u91cc\u5df4\u5df4Java\u5f00\u53d1\u624b\u518c\uff08\u534e\u5c71\u7248\uff09","title":"MySQL \u89c4\u8303"},{"location":"mysql/tips-mysql-index/#mysql","text":"","title":"MySQL\u6570\u636e\u5e93\u8bbe\u8ba1\u89c4\u8303"},{"location":"mysql/tips-mysql-index/#1","text":"MySQL\u6570\u636e\u5e93\u4e0e Oracle\u3001 SQL Server \u7b49\u6570\u636e\u5e93\u76f8\u6bd4\uff0c\u6709\u5176\u5185\u6838\u4e0a\u7684\u4f18\u52bf\u4e0e\u52a3\u52bf\u3002\u6211\u4eec\u5728\u4f7f\u7528MySQL\u6570\u636e\u5e93\u7684\u65f6\u5019\u9700\u8981\u9075\u5faa\u4e00\u5b9a\u89c4\u8303\uff0c\u626c\u957f\u907f\u77ed\u3002\u672c\u89c4\u8303\u65e8\u5728\u5e2e\u52a9\u6216\u6307\u5bfcRD\u3001QA\u3001OP\u7b49\u6280\u672f\u4eba\u5458\u505a\u51fa\u9002\u5408\u7ebf\u4e0a\u4e1a\u52a1\u7684\u6570\u636e\u5e93\u8bbe\u8ba1\u3002\u5728\u6570\u636e\u5e93\u53d8\u66f4\u548c\u5904\u7406\u6d41\u7a0b\u3001\u6570\u636e\u5e93\u8868\u8bbe\u8ba1\u3001SQL\u7f16\u5199\u7b49\u65b9\u9762\u4e88\u4ee5\u89c4\u8303\uff0c\u4ece\u800c\u4e3a\u516c\u53f8\u4e1a\u52a1\u7cfb\u7edf\u7a33\u5b9a\u3001\u5065\u5eb7\u5730\u8fd0\u884c\u63d0\u4f9b\u4fdd\u969c\u3002","title":"1. \u89c4\u8303\u80cc\u666f\u4e0e\u76ee\u7684"},{"location":"mysql/tips-mysql-index/#2","text":"","title":"2. \u8bbe\u8ba1\u89c4\u8303"},{"location":"mysql/tips-mysql-index/#21","text":"\u4ee5\u4e0b\u6240\u6709\u89c4\u8303\u4f1a\u6309\u7167\u3010\u9ad8\u5371\u3011\u3001\u3010\u5f3a\u5236\u3011\u3001\u3010\u5efa\u8bae\u3011\u4e09\u4e2a\u7ea7\u522b\u8fdb\u884c\u6807\u6ce8\uff0c\u9075\u5b88\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u3002 \u5bf9\u4e8e\u4e0d\u6ee1\u8db3\u3010\u9ad8\u5371\u3011\u548c\u3010\u5f3a\u5236\u3011\u4e24\u4e2a\u7ea7\u522b\u7684\u8bbe\u8ba1\uff0cDBA\u4f1a\u5f3a\u5236\u6253\u56de\u8981\u6c42\u4fee\u6539\u3002","title":"2.1 \u6570\u636e\u5e93\u8bbe\u8ba1"},{"location":"mysql/tips-mysql-index/#211","text":"\u3010\u5f3a\u5236\u3011\u5e93\u7684\u540d\u79f0\u5fc5\u987b\u63a7\u5236\u572832\u4e2a\u5b57\u7b26\u4ee5\u5185\uff0c\u76f8\u5173\u6a21\u5757\u7684\u8868\u540d\u4e0e\u8868\u540d\u4e4b\u95f4\u5c3d\u91cf\u4f53\u73b0join\u7684\u5173\u7cfb\uff0c\u5982user\u8868\u548cuser_login\u8868\u3002 \u3010\u5f3a\u5236\u3011\u5e93\u7684\u540d\u79f0\u683c\u5f0f\uff1a\u4e1a\u52a1\u7cfb\u7edf\u540d\u79f0_\u5b50\u7cfb\u7edf\u540d\uff0c\u540c\u4e00\u6a21\u5757\u4f7f\u7528\u7684\u8868\u540d\u5c3d\u91cf\u4f7f\u7528\u7edf\u4e00\u524d\u7f00\u3002 \u3010\u5f3a\u5236\u3011\u4e00\u822c\u5206\u5e93\u540d\u79f0\u547d\u540d\u683c\u5f0f\u662f \u5e93\u901a\u914d\u540d_\u7f16\u53f7 \uff0c\u7f16\u53f7\u4ece0\u5f00\u59cb\u9012\u589e\uff0c\u6bd4\u5982 wenda_001 \u4ee5\u65f6\u95f4\u8fdb\u884c\u5206\u5e93\u7684\u540d\u79f0\u683c\u5f0f\u662f\u201c\u5e93\u901a\u914d\u540d_\u65f6\u95f4\u201d \u3010\u5f3a\u5236\u3011\u521b\u5efa\u6570\u636e\u5e93\u65f6\u5fc5\u987b\u663e\u5f0f\u6307\u5b9a\u5b57\u7b26\u96c6\uff0c\u5e76\u4e14\u5b57\u7b26\u96c6\u53ea\u80fd\u662futf8\u6216\u8005utf8mb4\u3002\u521b\u5efa\u6570\u636e\u5e93SQL\u4e3e\u4f8b\uff1a create database db1 default character set utf8; \u3002","title":"2.1.1 \u5e93\u540d"},{"location":"mysql/tips-mysql-index/#212","text":"\u3010\u5f3a\u5236\u3011\u8868\u548c\u5217\u7684\u540d\u79f0\u5fc5\u987b\u63a7\u5236\u572832\u4e2a\u5b57\u7b26\u4ee5\u5185\uff0c\u8868\u540d\u53ea\u80fd\u4f7f\u7528\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\uff0c\u4e00\u5f8b\u5c0f\u5199\u3002 \u3010\u5f3a\u5236\u3011\u8868\u540d\u8981\u6c42\u6a21\u5757\u540d\u5f3a\u76f8\u5173\uff0c\u5982\u5e08\u8d44\u7cfb\u7edf\u91c7\u7528\u201dsz\u201d\u4f5c\u4e3a\u524d\u7f00\uff0c\u6e20\u9053\u7cfb\u7edf\u91c7\u7528\u201dqd\u201d\u4f5c\u4e3a\u524d\u7f00\u7b49\u3002 \u3010\u5f3a\u5236\u3011\u521b\u5efa\u8868\u65f6\u5fc5\u987b\u663e\u5f0f\u6307\u5b9a\u5b57\u7b26\u96c6\u4e3autf8\u6216utf8mb4\u3002 \u3010\u5f3a\u5236\u3011\u521b\u5efa\u8868\u65f6\u5fc5\u987b\u663e\u5f0f\u6307\u5b9a\u8868\u5b58\u50a8\u5f15\u64ce\u7c7b\u578b\uff0c\u5982\u65e0\u7279\u6b8a\u9700\u6c42\uff0c\u4e00\u5f8b\u4e3aInnoDB\u3002\u5f53\u9700\u8981\u4f7f\u7528\u9664InnoDB/MyISAM/Memory\u4ee5\u5916\u7684\u5b58\u50a8\u5f15\u64ce\u65f6\uff0c\u5fc5\u987b\u901a\u8fc7DBA\u5ba1\u6838\u624d\u80fd\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u3002\u56e0\u4e3aInnodb\u8868\u652f\u6301\u4e8b\u52a1\u3001\u884c\u9501\u3001\u5b95\u673a\u6062\u590d\u3001MVCC\u7b49\u5173\u7cfb\u578b\u6570\u636e\u5e93\u91cd\u8981\u7279\u6027\uff0c\u4e3a\u4e1a\u754c\u4f7f\u7528\u6700\u591a\u7684MySQL\u5b58\u50a8\u5f15\u64ce\u3002\u800c\u8fd9\u662f\u5176\u4ed6\u5927\u591a\u6570\u5b58\u50a8\u5f15\u64ce\u4e0d\u5177\u5907\u7684\uff0c\u56e0\u6b64\u9996\u63a8InnoDB\u3002 \u3010\u5f3a\u5236\u3011\u5efa\u8868\u5fc5\u987b\u6709comment \u3010\u5efa\u8bae\u3011\u5efa\u8868\u65f6\u5173\u4e8e\u4e3b\u952e\uff1a(1)\u5f3a\u5236\u8981\u6c42\u4e3b\u952e\u4e3aid\uff0c\u7c7b\u578b\u4e3aint\u6216bigint\uff0c\u4e14\u4e3a auto_increment(2) \u6807\u8bc6\u8868\u91cc\u6bcf\u4e00\u884c\u4e3b\u4f53\u7684\u5b57\u6bb5\u4e0d\u8981\u8bbe\u4e3a\u4e3b\u952e\uff0c\u5efa\u8bae\u8bbe\u4e3a\u5176\u4ed6\u5b57\u6bb5\u5982 user_id \uff0c order_id \u7b49\uff0c\u5e76\u5efa\u7acbunique key\u7d22\u5f15\uff08\u53ef\u53c2\u8003 cdb.teacher \u8868\u8bbe\u8ba1\uff09\u3002\u56e0\u4e3a\u5982\u679c\u8bbe\u4e3a\u4e3b\u952e\u4e14\u4e3b\u952e\u503c\u4e3a\u968f\u673a\u63d2\u5165\uff0c\u5219\u4f1a\u5bfc\u81f4innodb\u5185\u90e8page\u5206\u88c2\u548c\u5927\u91cf\u968f\u673aI/O\uff0c\u6027\u80fd\u4e0b\u964d\u3002 \u3010\u5efa\u8bae\u3011\u6838\u5fc3\u8868\uff08\u5982\u7528\u6237\u8868\uff0c\u91d1\u94b1\u76f8\u5173\u7684\u8868\uff09\u5fc5\u987b\u6709\u884c\u6570\u636e\u7684\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5 create_time \u548c\u6700\u540e\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5 update_time \uff0c\u4fbf\u4e8e\u67e5\u95ee\u9898\u3002 \u3010\u5efa\u8bae\u3011\u8868\u4e2d\u6240\u6709\u5b57\u6bb5\u5fc5\u987b\u90fd\u662f NOT NULL \u5c5e\u6027\uff0c\u4e1a\u52a1\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b9a\u4e49 DEFAULT \u503c\u3002\u56e0\u4e3a\u4f7f\u7528NULL\u503c\u4f1a\u5b58\u5728\u6bcf\u4e00\u884c\u90fd\u4f1a\u5360\u7528\u989d\u5916\u5b58\u50a8\u7a7a\u95f4\u3001\u6570\u636e\u8fc1\u79fb\u5bb9\u6613\u51fa\u9519\u3001\u805a\u5408\u51fd\u6570\u8ba1\u7b97\u7ed3\u679c\u504f\u5dee\u7b49\u95ee\u9898\u3002 \u3010\u5efa\u8bae\u3011\u5efa\u8bae\u5bf9\u8868\u91cc\u7684 blob \u3001 text \u7b49\u5927\u5b57\u6bb5\uff0c\u5782\u76f4\u62c6\u5206\u5230\u5176\u4ed6\u8868\u91cc\uff0c\u4ec5\u5728\u9700\u8981\u8bfb\u8fd9\u4e9b\u5bf9\u8c61\u7684\u65f6\u5019\u624d\u53bbselect\u3002 \u3010\u5efa\u8bae\u3011\u53cd\u8303\u5f0f\u8bbe\u8ba1\uff1a\u628a\u7ecf\u5e38\u9700\u8981join\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u5728\u5176\u4ed6\u8868\u91cc\u5197\u4f59\u4e00\u4efd\u3002\u5982 user_name \u5c5e\u6027\u5728 user_account \uff0c user_login_log \u7b49\u8868\u91cc\u5197\u4f59\u4e00\u4efd\uff0c\u51cf\u5c11join\u67e5\u8be2\u3002 \u3010\u5f3a\u5236\u3011\u4e2d\u95f4\u8868\u7528\u4e8e\u4fdd\u7559\u4e2d\u95f4\u7ed3\u679c\u96c6\uff0c\u540d\u79f0\u5fc5\u987b\u4ee5 tmp_ \u5f00\u5934\u3002\u5907\u4efd\u8868\u7528\u4e8e\u5907\u4efd\u6216\u6293\u53d6\u6e90\u8868\u5feb\u7167\uff0c\u540d\u79f0\u5fc5\u987b\u4ee5 bak_ \u5f00\u5934\u3002\u4e2d\u95f4\u8868\u548c\u5907\u4efd\u8868\u5b9a\u671f\u6e05\u7406\u3002 \u3010\u5f3a\u5236\u3011\u5bf9\u4e8e\u8d85\u8fc7100W\u884c\u7684\u5927\u8868\u8fdb\u884c alter table \uff0c\u5fc5\u987b\u7ecf\u8fc7DBA\u5ba1\u6838\uff0c\u5e76\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u6267\u884c\u3002\u56e0\u4e3a alter table \u4f1a\u4ea7\u751f\u8868\u9501\uff0c\u671f\u95f4\u963b\u585e\u5bf9\u4e8e\u8be5\u8868\u7684\u6240\u6709\u5199\u5165\uff0c\u5bf9\u4e8e\u4e1a\u52a1\u53ef\u80fd\u4f1a\u4ea7\u751f\u6781\u5927\u5f71\u54cd\u3002","title":"2.1.2 \u8868\u7ed3\u6784"},{"location":"mysql/tips-mysql-index/#2121","text":"\u3010\u5f3a\u5236\u3011\u8868\u8fbe\u662f\u4e0e\u5426\u6982\u5ff5\u7684\u5b57\u6bb5\uff0c\u5fc5\u987b\u4f7f\u7528is_xxx\u7684\u65b9\u5f0f\u547d\u540d\uff0c\u6570\u636e\u7c7b\u578b\u662funsigned tinyint\uff08 1\u8868\u793a\u662f\uff0c0\u8868\u793a\u5426\uff09\u3002 \u8bf4\u660e \uff1a\u4efb\u4f55\u5b57\u6bb5\u5982\u679c\u4e3a\u975e\u8d1f\u6570\uff0c\u5fc5\u987b\u662f unsigned \u3002 \u6b63\u4f8b \uff1a\u8868\u8fbe\u903b\u8f91\u5220\u9664\u7684\u5b57\u6bb5\u540d is_deleted \uff0c1\u8868\u793a\u5220\u9664\uff0c0\u8868\u793a\u672a\u5220\u9664\u3002 \u3010\u5f3a\u5236\u3011\u8868\u540d\u3001\u5b57\u6bb5\u540d\u5fc5\u987b\u4f7f\u7528\u5c0f\u5199\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u7981\u6b62\u51fa\u73b0\u6570\u5b57\u5f00\u5934\uff0c\u7981\u6b62\u4e24\u4e2a\u4e0b\u5212\u7ebf\u4e2d\u95f4\u53ea\u51fa\u73b0\u6570\u5b57\u3002\u6570\u636e\u5e93\u5b57\u6bb5\u540d\u7684\u4fee\u6539\u4ee3\u4ef7\u5f88\u5927\uff0c\u56e0\u4e3a\u65e0\u6cd5\u8fdb\u884c\u9884\u53d1\u5e03\uff0c\u6240\u4ee5\u5b57\u6bb5\u540d\u79f0\u9700\u8981\u614e\u91cd\u8003\u8651\u3002 \u8bf4\u660e \uff1aMySQL\u5728Windows\u4e0b\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4f46\u5728Linux\u4e0b\u9ed8\u8ba4\u662f\u533a\u5206\u5927\u5c0f\u5199\u3002\u56e0\u6b64\uff0c\u6570\u636e\u5e93\u540d\u3001\u8868\u540d\u3001\u5b57\u6bb5\u540d\uff0c\u90fd\u4e0d\u5141\u8bb8\u51fa\u73b0\u4efb\u4f55\u5927\u5199\u5b57\u6bcd\uff0c\u907f\u514d\u8282\u5916\u751f\u679d\u3002 \u6b63\u4f8b \uff1aaliyun_admin\uff0crdc_config\uff0clevel3_name \u53cd\u4f8b \uff1aAliyunAdmin\uff0crdcConfig\uff0clevel_3_name \u3010\u5f3a\u5236\u3011\u8868\u540d\u4e0d\u4f7f\u7528\u590d\u6570\u540d\u8bcd\u3002 \u8bf4\u660e \uff1a\u8868\u540d\u5e94\u8be5\u4ec5\u4ec5\u8868\u793a\u8868\u91cc\u9762\u7684\u5b9e\u4f53\u5185\u5bb9\uff0c\u4e0d\u5e94\u8be5\u8868\u793a\u5b9e\u4f53\u6570\u91cf\uff0c\u5bf9\u5e94\u4e8eDO\u7c7b\u540d\u4e5f\u662f\u5355\u6570\u5f62\u5f0f\uff0c\u7b26\u5408\u8868\u8fbe\u4e60\u60ef\u3002 \u3010\u5f3a\u5236\u3011\u7981\u7528\u4fdd\u7559\u5b57\uff0c\u5982 desc \u3001 range \u3001 match \u3001 delayed \u7b49\uff0c\u8bf7\u53c2\u8003MySQL\u5b98\u65b9\u4fdd\u7559\u5b57\u3002 \u3010\u5f3a\u5236\u3011\u4e3b\u952e\u7d22\u5f15\u540d\u4e3apk_\u5b57\u6bb5\u540d\uff1b\u552f\u4e00\u7d22\u5f15\u540d\u4e3auk_\u5b57\u6bb5\u540d\uff1b\u666e\u901a\u7d22\u5f15\u540d\u5219\u4e3aidx_\u5b57\u6bb5\u540d\u3002 \u8bf4\u660e \uff1apk_ \u5373primary key\uff1buk_ \u5373 unique key\uff1bidx_ \u5373index\u7684\u7b80\u79f0\u3002 \u3010\u5f3a\u5236\u3011\u5c0f\u6570\u7c7b\u578b\u4e3adecimal\uff0c\u7981\u6b62\u4f7f\u7528float\u548cdouble\u3002 \u8bf4\u660e \uff1afloat\u548cdouble\u5728\u5b58\u50a8\u7684\u65f6\u5019\uff0c\u5b58\u5728\u7cbe\u5ea6\u635f\u5931\u7684\u95ee\u9898\uff0c\u5f88\u53ef\u80fd\u5728\u503c\u7684\u6bd4\u8f83\u65f6\uff0c\u5f97\u5230\u4e0d\u6b63\u786e\u7684\u7ed3\u679c\u3002\u5982\u679c\u5b58\u50a8\u7684\u6570\u636e\u8303\u56f4\u8d85\u8fc7decimal\u7684\u8303\u56f4\uff0c\u5efa\u8bae\u5c06\u6570\u636e\u62c6\u6210\u6574\u6570\u548c\u5c0f\u6570\u5206\u5f00\u5b58\u50a8\u3002 \u3010\u5f3a\u5236\u3011\u5982\u679c\u5b58\u50a8\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u51e0\u4e4e\u76f8\u7b49\uff0c\u4f7f\u7528char\u5b9a\u957f\u5b57\u7b26\u4e32\u7c7b\u578b\u3002 \u3010\u5f3a\u5236\u3011varchar\u662f\u53ef\u53d8\u957f\u5b57\u7b26\u4e32\uff0c\u4e0d\u9884\u5148\u5206\u914d\u5b58\u50a8\u7a7a\u95f4\uff0c\u957f\u5ea6\u4e0d\u8981\u8d85\u8fc75000\uff0c\u5982\u679c\u5b58\u50a8\u957f\u5ea6\u5927\u4e8e\u6b64\u503c\uff0c\u5b9a\u4e49\u5b57\u6bb5\u7c7b\u578b\u4e3atext\uff0c\u72ec\u7acb\u51fa\u6765\u4e00\u5f20\u8868\uff0c\u7528\u4e3b\u952e\u6765\u5bf9\u5e94\uff0c\u907f\u514d\u5f71\u54cd\u5176\u5b83\u5b57\u6bb5\u7d22\u5f15\u6548\u7387\u3002 \u3010\u5f3a\u5236\u3011\u8868\u5fc5\u5907\u4e09\u5b57\u6bb5\uff1aid, gmt_create, gmt_modified\u3002 \u8bf4\u660e \uff1a\u5176\u4e2did\u5fc5\u4e3a\u4e3b\u952e\uff0c\u7c7b\u578b\u4e3aunsigned bigint\u3001\u5355\u8868\u65f6\u81ea\u589e\u3001\u6b65\u957f\u4e3a1\u3002gmt_create, gmt_modified\u7684\u7c7b\u578b\u5747\u4e3adatetime\u7c7b\u578b\uff0c\u524d\u8005\u73b0\u5728\u65f6\u8868\u793a\u4e3b\u52a8\u521b\u5efa\uff0c\u540e\u8005\u8fc7\u53bb\u5206\u8bcd\u8868\u793a\u88ab\u52a8\u66f4\u65b0\u3002 \u3010\u63a8\u8350\u3011\u8868\u7684\u547d\u540d\u6700\u597d\u662f\u52a0\u4e0a\u201c\u4e1a\u52a1\u540d\u79f0_\u8868\u7684\u4f5c\u7528\u201d\u3002 \u6b63\u4f8b \uff1aalipay_task / force_project / trade_config \u3010\u63a8\u8350\u3011\u5e93\u540d\u4e0e\u5e94\u7528\u540d\u79f0\u5c3d\u91cf\u4e00\u81f4\u3002 \u3010\u63a8\u8350\u3011\u5982\u679c\u4fee\u6539\u5b57\u6bb5\u542b\u4e49\u6216\u5bf9\u5b57\u6bb5\u8868\u793a\u7684\u72b6\u6001\u8ffd\u52a0\u65f6\uff0c\u9700\u8981\u53ca\u65f6\u66f4\u65b0\u5b57\u6bb5\u6ce8\u91ca\u3002 \u3010\u63a8\u8350\u3011\u5b57\u6bb5\u5141\u8bb8\u9002\u5f53\u5197\u4f59\uff0c\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u4f46\u5fc5\u987b\u8003\u8651\u6570\u636e\u4e00\u81f4\u3002\u5197\u4f59\u5b57\u6bb5\u5e94\u9075\u5faa\uff1a 1\uff09\u4e0d\u662f\u9891\u7e41\u4fee\u6539\u7684\u5b57\u6bb5\u3002 2\uff09\u4e0d\u662fvarchar\u8d85\u957f\u5b57\u6bb5\uff0c\u66f4\u4e0d\u80fd\u662ftext\u5b57\u6bb5\u3002 \u6b63\u4f8b \uff1a\u5546\u54c1\u7c7b\u76ee\u540d\u79f0\u4f7f\u7528\u9891\u7387\u9ad8\uff0c\u5b57\u6bb5\u957f\u5ea6\u77ed\uff0c\u540d\u79f0\u57fa\u672c\u4e00\u6210\u4e0d\u53d8\uff0c\u53ef\u5728\u76f8\u5173\u8054\u7684\u8868\u4e2d\u5197\u4f59\u5b58\u50a8\u7c7b\u76ee\u540d\u79f0\uff0c\u907f\u514d\u5173\u8054\u67e5\u8be2\u3002 \u3010\u63a8\u8350\u3011\u5355\u8868\u884c\u6570\u8d85\u8fc7500\u4e07\u884c\u6216\u8005\u5355\u8868\u5bb9\u91cf\u8d85\u8fc72GB\uff0c\u624d\u63a8\u8350\u8fdb\u884c\u5206\u5e93\u5206\u8868\u3002 \u8bf4\u660e \uff1a\u5982\u679c\u9884\u8ba1\u4e09\u5e74\u540e\u7684\u6570\u636e\u91cf\u6839\u672c\u8fbe\u4e0d\u5230\u8fd9\u4e2a\u7ea7\u522b\uff0c\u8bf7\u4e0d\u8981\u5728\u521b\u5efa\u8868\u65f6\u5c31\u5206\u5e93\u5206\u8868\u3002 \u3010\u53c2\u8003\u3011\u5408\u9002\u7684\u5b57\u7b26\u5b58\u50a8\u957f\u5ea6\uff0c\u4e0d\u4f46\u8282\u7ea6\u6570\u636e\u5e93\u8868\u7a7a\u95f4\u3001\u8282\u7ea6\u7d22\u5f15\u5b58\u50a8\uff0c\u66f4\u91cd\u8981\u7684\u662f\u63d0\u5347\u68c0\u7d22\u901f\u5ea6\u3002 \u6b63\u4f8b \uff1a\u5982\u4e0b\u8868\uff0c\u5176\u4e2d\u65e0\u7b26\u53f7\u503c\u53ef\u4ee5\u907f\u514d\u8bef\u5b58\u8d1f\u6570\uff0c\u4e14\u6269\u5927\u4e86\u8868\u793a\u8303\u56f4\u3002 \u5bf9\u8c61 \u5e74\u9f84\u533a\u95f4 \u7c7b\u578b \u5b57\u8282 \u4eba 150\u5c81\u4e4b\u5185 unsigned tinyint 1 \u9f9f \u6570\u767e\u5c81 unsigned smallint 2 \u6050\u9f99\u5316\u77f3 \u6570\u5343\u4e07\u5c81 unsigned int 4 \u592a\u9633 \u7ea650\u4ebf\u5e74 unsigned bigint 8","title":"2.1.2.1 \u8868\u7ed3\u6784(\u963f\u91cc\u5df4\u5df4\u534e\u5c71\u7248)"},{"location":"mysql/tips-mysql-index/#213","text":"\u3010\u5efa\u8bae\u3011\u8868\u4e2d\u7684\u81ea\u589e\u5217\uff08 auto_increment \u5c5e\u6027\uff09\uff0c\u63a8\u8350\u4f7f\u7528 bigint \u7c7b\u578b\u3002\u56e0\u4e3a\u65e0\u7b26\u53f7 int \u5b58\u50a8\u8303\u56f4\u4e3a -2147483648~2147483647 \uff08\u5927\u7ea621\u4ebf\u5de6\u53f3\uff09\uff0c\u6ea2\u51fa\u540e\u4f1a\u5bfc\u81f4\u62a5\u9519\u3002 \u3010\u5efa\u8bae\u3011\u4e1a\u52a1\u4e2d\u9009\u62e9\u6027\u5f88\u5c11\u7684\u72b6\u6001 status \u3001\u7c7b\u578b type \u7b49\u5b57\u6bb5\u63a8\u8350\u4f7f\u7528 tinytint \u6216\u8005 smallint \u7c7b\u578b\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\u3002 \u3010\u5efa\u8bae\u3011\u4e1a\u52a1\u4e2dIP\u5730\u5740\u5b57\u6bb5\u63a8\u8350\u4f7f\u7528 int \u7c7b\u578b\uff0c\u4e0d\u63a8\u8350\u7528 char(15) \u3002\u56e0\u4e3a int \u53ea\u53604\u5b57\u8282\uff0c\u53ef\u4ee5\u7528\u5982\u4e0b\u51fd\u6570\u76f8\u4e92\u8f6c\u6362\uff0c\u800c char(15) \u5360\u7528\u81f3\u5c1115\u5b57\u8282\u3002\u4e00\u65e6\u8868\u6570\u636e\u884c\u6570\u5230\u4e861\u4ebf\uff0c\u90a3\u4e48\u8981\u591a\u75281.1G\u5b58\u50a8\u7a7a\u95f4\u3002 SQL\uff1a select inet_aton('192.168.2.12'); select inet_ntoa(3232236044); PHP: ip2long(\u2018192.168.2.12\u2019); long2ip(3530427185); \u3010\u5efa\u8bae\u3011\u4e0d\u63a8\u8350\u4f7f\u7528 enum \uff0c set \u3002 \u56e0\u4e3a\u5b83\u4eec\u6d6a\u8d39\u7a7a\u95f4\uff0c\u4e14\u679a\u4e3e\u503c\u5199\u6b7b\u4e86\uff0c\u53d8\u66f4\u4e0d\u65b9\u4fbf\u3002\u63a8\u8350\u4f7f\u7528 tinyint \u6216 smallint \u3002 \u3010\u5efa\u8bae\u3011\u4e0d\u63a8\u8350\u4f7f\u7528 blob \uff0c text \u7b49\u7c7b\u578b\u3002\u5b83\u4eec\u90fd\u6bd4\u8f83\u6d6a\u8d39\u786c\u76d8\u548c\u5185\u5b58\u7a7a\u95f4\u3002\u5728\u52a0\u8f7d\u8868\u6570\u636e\u65f6\uff0c\u4f1a\u8bfb\u53d6\u5927\u5b57\u6bb5\u5230\u5185\u5b58\u91cc\u4ece\u800c\u6d6a\u8d39\u5185\u5b58\u7a7a\u95f4\uff0c\u5f71\u54cd\u7cfb\u7edf\u6027\u80fd\u3002\u5efa\u8bae\u548cPM\u3001RD\u6c9f\u901a\uff0c\u662f\u5426\u771f\u7684\u9700\u8981\u8fd9\u4e48\u5927\u5b57\u6bb5\u3002Innodb\u4e2d\u5f53\u4e00\u884c\u8bb0\u5f55\u8d85\u8fc78098\u5b57\u8282\u65f6\uff0c\u4f1a\u5c06\u8be5\u8bb0\u5f55\u4e2d\u9009\u53d6\u6700\u957f\u7684\u4e00\u4e2a\u5b57\u6bb5\u5c06\u5176768\u5b57\u8282\u653e\u5728\u539f\u59cbpage\u91cc\uff0c\u8be5\u5b57\u6bb5\u4f59\u4e0b\u5185\u5bb9\u653e\u5728 overflow-page \u91cc\u3002\u4e0d\u5e78\u7684\u662f\u5728 compact \u884c\u683c\u5f0f\u4e0b\uff0c\u539f\u59cb page \u548c overflow-page \u90fd\u4f1a\u52a0\u8f7d\u3002 \u3010\u5efa\u8bae\u3011\u5b58\u50a8\u91d1\u94b1\u7684\u5b57\u6bb5\uff0c\u5efa\u8bae\u7528 int \uff0c\u7a0b\u5e8f\u7aef\u4e58\u4ee5100\u548c\u9664\u4ee5100\u8fdb\u884c\u5b58\u53d6\u3002\u56e0\u4e3a int \u5360\u75284\u5b57\u8282\uff0c\u800c double \u5360\u75288\u5b57\u8282\uff0c\u7a7a\u95f4\u6d6a\u8d39\u3002 \u3010\u5efa\u8bae\u3011\u6587\u672c\u6570\u636e\u5c3d\u91cf\u7528 varchar \u5b58\u50a8\u3002\u56e0\u4e3a varchar \u662f\u53d8\u957f\u5b58\u50a8\uff0c\u6bd4 char \u66f4\u7701\u7a7a\u95f4\u3002MySQL server\u5c42\u89c4\u5b9a\u4e00\u884c\u6240\u6709\u6587\u672c\u6700\u591a\u5b5865535\u5b57\u8282\uff0c\u56e0\u6b64\u5728utf8\u5b57\u7b26\u96c6\u4e0b\u6700\u591a\u5b5821844\u4e2a\u5b57\u7b26\uff0c\u8d85\u8fc7\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a mediumtext \u5b57\u6bb5\u3002\u800c text \u5728utf8\u5b57\u7b26\u96c6\u4e0b\u6700\u591a\u5b5821844\u4e2a\u5b57\u7b26\uff0c mediumtext \u6700\u591a\u5b582^24/3\u4e2a\u5b57\u7b26\uff0c longtext \u6700\u591a\u5b582^32\u4e2a\u5b57\u7b26\u3002\u4e00\u822c\u5efa\u8bae\u7528 varchar \u7c7b\u578b\uff0c\u5b57\u7b26\u6570\u4e0d\u8981\u8d85\u8fc72700\u3002 \u3010\u5efa\u8bae\u3011\u65f6\u95f4\u7c7b\u578b\u5c3d\u91cf\u9009\u53d6 timestamp \u3002\u56e0\u4e3a datetime \u5360\u75288\u5b57\u8282\uff0c timestamp \u4ec5\u5360\u75284\u5b57\u8282\uff0c\u4f46\u662f\u8303\u56f4\u4e3a 1970-01-01 00:00:01 \u5230 2038-01-01 00:00:00 \u3002\u66f4\u4e3a\u9ad8\u9636\u7684\u65b9\u6cd5\uff0c\u9009\u7528 int \u6765\u5b58\u50a8\u65f6\u95f4\uff0c\u4f7f\u7528SQL\u51fd\u6570 unix_timestamp() \u548c from_unixtime() \u6765\u8fdb\u884c\u8f6c\u6362\u3002","title":"2.1.3 \u5217\u6570\u636e\u7c7b\u578b\u4f18\u5316"},{"location":"mysql/tips-mysql-index/#214","text":"\u3010\u5f3a\u5236\u3011InnoDB\u8868\u5fc5\u987b\u4e3b\u952e\u4e3a id int/bigint auto_increment ,\u4e14\u4e3b\u952e\u503c\u7981\u6b62\u88ab\u66f4\u65b0\u3002 \u3010\u5efa\u8bae\u3011\u4e3b\u952e\u7684\u540d\u79f0\u4ee5\u201c pk_ \u201d\u5f00\u5934\uff0c\u552f\u4e00\u952e\u4ee5\u201c uk_ \u201d\u6216\u201c uq_ \u201d\u5f00\u5934\uff0c\u666e\u901a\u7d22\u5f15\u4ee5\u201c idx_ \u201d\u5f00\u5934\uff0c\u4e00\u5f8b\u4f7f\u7528\u5c0f\u5199\u683c\u5f0f\uff0c\u4ee5\u8868\u540d/\u5b57\u6bb5\u7684\u540d\u79f0\u6216\u7f29\u5199\u4f5c\u4e3a\u540e\u7f00\u3002 \u3010\u5f3a\u5236\u3011InnoDB\u548cMyISAM\u5b58\u50a8\u5f15\u64ce\u8868\uff0c\u7d22\u5f15\u7c7b\u578b\u5fc5\u987b\u4e3a BTREE \uff1bMEMORY\u8868\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9 HASH \u6216\u8005 BTREE \u7c7b\u578b\u7d22\u5f15\u3002 \u3010\u5f3a\u5236\u3011\u5355\u4e2a\u7d22\u5f15\u4e2d\u6bcf\u4e2a\u7d22\u5f15\u8bb0\u5f55\u7684\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc764KB\u3002 \u3010\u5efa\u8bae\u3011\u5355\u4e2a\u8868\u4e0a\u7684\u7d22\u5f15\u4e2a\u6570\u4e0d\u80fd\u8d85\u8fc77\u4e2a\u3002 \u3010\u5efa\u8bae\u3011\u5728\u5efa\u7acb\u7d22\u5f15\u65f6\uff0c\u591a\u8003\u8651\u5efa\u7acb\u8054\u5408\u7d22\u5f15\uff0c\u5e76\u628a\u533a\u5206\u5ea6\u6700\u9ad8\u7684\u5b57\u6bb5\u653e\u5728\u6700\u524d\u9762\u3002\u5982\u5217 userid \u7684\u533a\u5206\u5ea6\u53ef\u7531 select count(distinct userid) \u8ba1\u7b97\u51fa\u6765\u3002 \u3010\u5efa\u8bae\u3011\u5728\u591a\u8868join\u7684SQL\u91cc\uff0c\u4fdd\u8bc1\u88ab\u9a71\u52a8\u8868\u7684\u8fde\u63a5\u5217\u4e0a\u6709\u7d22\u5f15\uff0c\u8fd9\u6837join\u6267\u884c\u6548\u7387\u6700\u9ad8\u3002 \u3010\u5efa\u8bae\u3011\u5efa\u8868\u6216\u52a0\u7d22\u5f15\u65f6\uff0c\u4fdd\u8bc1\u8868\u91cc\u4e92\u76f8\u4e0d\u5b58\u5728\u5197\u4f59\u7d22\u5f15\u3002\u5bf9\u4e8eMySQL\u6765\u8bf4\uff0c\u5982\u679c\u8868\u91cc\u5df2\u7ecf\u5b58\u5728 key(a,b) \uff0c\u5219 key(a) \u4e3a\u5197\u4f59\u7d22\u5f15\uff0c\u9700\u8981\u5220\u9664\u3002","title":"2.1.4 \u7d22\u5f15\u8bbe\u8ba1"},{"location":"mysql/tips-mysql-index/#2141","text":"\u3010\u5f3a\u5236\u3011\u4e1a\u52a1\u4e0a\u5177\u6709\u552f\u4e00\u7279\u6027\u7684\u5b57\u6bb5\uff0c\u5373\u4f7f\u662f\u591a\u4e2a\u5b57\u6bb5\u7684\u7ec4\u5408\uff0c\u4e5f\u5fc5\u987b\u5efa\u6210\u552f\u4e00\u7d22\u5f15\u3002 \u8bf4\u660e \uff1a\u4e0d\u8981\u4ee5\u4e3a\u552f\u4e00\u7d22\u5f15\u5f71\u54cd\u4e86insert\u901f\u5ea6\uff0c\u8fd9\u4e2a\u901f\u5ea6\u635f\u8017\u53ef\u4ee5\u5ffd\u7565\uff0c\u4f46\u63d0\u9ad8\u67e5\u627e\u901f\u5ea6\u662f\u660e\u663e\u7684\uff1b\u53e6\u5916\uff0c\u5373\u4f7f\u5728\u5e94\u7528\u5c42\u505a\u4e86\u975e\u5e38\u5b8c\u5584\u7684\u6821\u9a8c\u63a7\u5236\uff0c\u53ea\u8981\u6ca1\u6709\u552f\u4e00\u7d22\u5f15\uff0c\u6839\u636e\u58a8\u83f2\u5b9a\u5f8b\uff0c\u5fc5\u7136\u6709\u810f\u6570\u636e\u4ea7\u751f\u3002 \u3010\u5f3a\u5236\u3011\u8d85\u8fc7\u4e09\u4e2a\u8868\u7981\u6b62join\u3002\u9700\u8981join\u7684\u5b57\u6bb5\uff0c\u6570\u636e\u7c7b\u578b\u5fc5\u987b\u7edd\u5bf9\u4e00\u81f4\uff1b\u591a\u8868\u5173\u8054\u67e5\u8be2\u65f6\uff0c\u4fdd\u8bc1\u88ab\u5173\u8054\u7684\u5b57\u6bb5\u9700\u8981\u6709\u7d22\u5f15\u3002 \u8bf4\u660e \uff1a\u5373\u4f7f\u53cc\u8868join\u4e5f\u8981\u6ce8\u610f\u8868\u7d22\u5f15\u3001SQL\u6027\u80fd\u3002 \u3010\u5f3a\u5236\u3011\u5728varchar\u5b57\u6bb5\u4e0a\u5efa\u7acb\u7d22\u5f15\u65f6\uff0c\u5fc5\u987b\u6307\u5b9a\u7d22\u5f15\u957f\u5ea6\uff0c\u6ca1\u5fc5\u8981\u5bf9\u5168\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15\uff0c\u6839\u636e\u5b9e\u9645\u6587\u672c\u533a\u5206\u5ea6\u51b3\u5b9a\u7d22\u5f15\u957f\u5ea6\u5373\u53ef\u3002 \u8bf4\u660e \uff1a\u7d22\u5f15\u7684\u957f\u5ea6\u4e0e\u533a\u5206\u5ea6\u662f\u4e00\u5bf9\u77db\u76fe\u4f53\uff0c\u4e00\u822c\u5bf9\u5b57\u7b26\u4e32\u7c7b\u578b\u6570\u636e\uff0c\u957f\u5ea6\u4e3a20\u7684\u7d22\u5f15\uff0c\u533a\u5206\u5ea6\u4f1a\u9ad8\u8fbe90%\u4ee5\u4e0a\uff0c\u53ef\u4ee5\u4f7f\u7528count(distinct left(\u5217\u540d, \u7d22\u5f15\u957f\u5ea6))/count(*)\u7684\u533a\u5206\u5ea6\u6765\u786e\u5b9a\u3002 \u3010\u5f3a\u5236\u3011\u9875\u9762\u641c\u7d22\u4e25\u7981\u5de6\u6a21\u7cca\u6216\u8005\u5168\u6a21\u7cca\uff0c\u5982\u679c\u9700\u8981\u8bf7\u8d70\u641c\u7d22\u5f15\u64ce\u6765\u89e3\u51b3\u3002 \u8bf4\u660e \uff1a\u7d22\u5f15\u6587\u4ef6\u5177\u6709B-Tree\u7684\u6700\u5de6\u524d\u7f00\u5339\u914d\u7279\u6027\uff0c\u5982\u679c\u5de6\u8fb9\u7684\u503c\u672a\u786e\u5b9a\uff0c\u90a3\u4e48\u65e0\u6cd5\u4f7f\u7528\u6b64\u7d22\u5f15\u3002 \u3010\u63a8\u8350\u3011\u5982\u679c\u6709order by\u7684\u573a\u666f\uff0c\u8bf7\u6ce8\u610f\u5229\u7528\u7d22\u5f15\u7684\u6709\u5e8f\u6027\u3002order by \u6700\u540e\u7684\u5b57\u6bb5\u662f\u7ec4\u5408\u7d22\u5f15\u7684\u4e00\u90e8\u5206\uff0c\u5e76\u4e14\u653e\u5728\u7d22\u5f15\u7ec4\u5408\u987a\u5e8f\u7684\u6700\u540e\uff0c\u907f\u514d\u51fa\u73b0file_sort\u7684\u60c5\u51b5\uff0c\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\u3002 \u6b63\u4f8b \uff1awhere a=? and b=? order by c; \u7d22\u5f15\uff1aa_b_c \u53cd\u4f8b \uff1a\u7d22\u5f15\u4e2d\u6709\u8303\u56f4\u67e5\u627e\uff0c\u90a3\u4e48\u7d22\u5f15\u6709\u5e8f\u6027\u65e0\u6cd5\u5229\u7528\uff0c\u5982\uff1aWHERE a>10 ORDER BY b; \u7d22\u5f15a_b\u65e0\u6cd5\u6392\u5e8f\u3002 \u3010\u63a8\u8350\u3011\u5229\u7528\u8986\u76d6\u7d22\u5f15\u6765\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c\uff0c\u907f\u514d\u56de\u8868\u3002 \u8bf4\u660e \uff1a\u5982\u679c\u4e00\u672c\u4e66\u9700\u8981\u77e5\u9053\u7b2c11\u7ae0\u662f\u4ec0\u4e48\u6807\u9898\uff0c\u4f1a\u7ffb\u5f00\u7b2c11\u7ae0\u5bf9\u5e94\u7684\u90a3\u4e00\u9875\u5417\uff1f\u76ee\u5f55\u6d4f\u89c8\u4e00\u4e0b\u5c31\u597d\uff0c\u8fd9\u4e2a\u76ee\u5f55\u5c31\u662f\u8d77\u5230\u8986\u76d6\u7d22\u5f15\u7684\u4f5c\u7528\u3002 \u6b63\u4f8b \uff1a\u80fd\u591f\u5efa\u7acb\u7d22\u5f15\u7684\u79cd\u7c7b\u5206\u4e3a\u4e3b\u952e\u7d22\u5f15\u3001\u552f\u4e00\u7d22\u5f15\u3001\u666e\u901a\u7d22\u5f15\u4e09\u79cd\uff0c\u800c\u8986\u76d6\u7d22\u5f15\u53ea\u662f\u4e00\u79cd\u67e5\u8be2\u7684\u4e00\u79cd\u6548\u679c\uff0c\u7528explain\u7684\u7ed3\u679c\uff0cextra\u5217\u4f1a\u51fa\u73b0\uff1ausing index\u3002 \u3010\u63a8\u8350\u3011\u5229\u7528\u5ef6\u8fdf\u5173\u8054\u6216\u8005\u5b50\u67e5\u8be2\u4f18\u5316\u8d85\u591a\u5206\u9875\u573a\u666f\u3002 \u8bf4\u660e \uff1aMySQL\u5e76\u4e0d\u662f\u8df3\u8fc7offset\u884c\uff0c\u800c\u662f\u53d6offset+N\u884c\uff0c\u7136\u540e\u8fd4\u56de\u653e\u5f03\u524doffset\u884c\uff0c\u8fd4\u56deN\u884c\uff0c\u90a3\u5f53offset\u7279\u522b\u5927\u7684\u65f6\u5019\uff0c\u6548\u7387\u5c31\u975e\u5e38\u7684\u4f4e\u4e0b\uff0c\u8981\u4e48\u63a7\u5236\u8fd4\u56de\u7684\u603b\u9875\u6570\uff0c\u8981\u4e48\u5bf9\u8d85\u8fc7\u7279\u5b9a\u9608\u503c\u7684\u9875\u6570\u8fdb\u884cSQL\u6539\u5199\u3002 \u6b63\u4f8b \uff1a\u5148\u5feb\u901f\u5b9a\u4f4d\u9700\u8981\u83b7\u53d6\u7684id\u6bb5\uff0c\u7136\u540e\u518d\u5173\u8054\uff1a SELECT a.* FROM \u88681 a, (select id from \u88681 where \u6761\u4ef6 LIMIT 100000,20 ) b where a.id=b.id \u3010\u63a8\u8350\u3011 SQL\u6027\u80fd\u4f18\u5316\u7684\u76ee\u6807\uff1a\u81f3\u5c11\u8981\u8fbe\u5230 range \u7ea7\u522b\uff0c\u8981\u6c42\u662fref\u7ea7\u522b\uff0c\u5982\u679c\u53ef\u4ee5\u662fconsts\u6700\u597d\u3002 \u8bf4\u660e \uff1a 1\uff09consts \u5355\u8868\u4e2d\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u5339\u914d\u884c\uff08\u4e3b\u952e\u6216\u8005\u552f\u4e00\u7d22\u5f15\uff09\uff0c\u5728\u4f18\u5316\u9636\u6bb5\u5373\u53ef\u8bfb\u53d6\u5230\u6570\u636e\u3002 2\uff09ref \u6307\u7684\u662f\u4f7f\u7528\u666e\u901a\u7684\u7d22\u5f15\uff08normal index\uff09\u3002 3\uff09range \u5bf9\u7d22\u5f15\u8fdb\u884c\u8303\u56f4\u68c0\u7d22\u3002 \u53cd\u4f8b \uff1aexplain\u8868\u7684\u7ed3\u679c\uff0ctype=index\uff0c\u7d22\u5f15\u7269\u7406\u6587\u4ef6\u5168\u626b\u63cf\uff0c\u901f\u5ea6\u975e\u5e38\u6162\uff0c\u8fd9\u4e2aindex\u7ea7\u522b\u6bd4\u8f83range\u8fd8\u4f4e\uff0c\u4e0e\u5168\u8868\u626b\u63cf\u662f\u5c0f\u5deb\u89c1\u5927\u5deb\u3002 \u3010\u63a8\u8350\u3011\u5efa\u7ec4\u5408\u7d22\u5f15\u7684\u65f6\u5019\uff0c\u533a\u5206\u5ea6\u6700\u9ad8\u7684\u5728\u6700\u5de6\u8fb9\u3002 \u6b63\u4f8b \uff1a\u5982\u679cwhere a=? and b=? \uff0ca\u5217\u7684\u51e0\u4e4e\u63a5\u8fd1\u4e8e\u552f\u4e00\u503c\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u5355\u5efaidx_a\u7d22\u5f15\u5373\u53ef\u3002 \u8bf4\u660e \uff1a\u5b58\u5728\u975e\u7b49\u53f7\u548c\u7b49\u53f7\u6df7\u5408\u5224\u65ad\u6761\u4ef6\u65f6\uff0c\u5728\u5efa\u7d22\u5f15\u65f6\uff0c\u8bf7\u628a\u7b49\u53f7\u6761\u4ef6\u7684\u5217\u524d\u7f6e\u3002\u5982\uff1awhere a>? and b=? \u90a3\u4e48\u5373\u4f7fa\u7684\u533a\u5206\u5ea6\u66f4\u9ad8\uff0c\u4e5f\u5fc5\u987b\u628ab\u653e\u5728\u7d22\u5f15\u7684\u6700\u524d\u5217\u3002 \u3010\u63a8\u8350\u3011\u9632\u6b62\u56e0\u5b57\u6bb5\u7c7b\u578b\u4e0d\u540c\u9020\u6210\u7684\u9690\u5f0f\u8f6c\u6362\uff0c\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\u3002 \u3010\u53c2\u8003\u3011\u521b\u5efa\u7d22\u5f15\u65f6\u907f\u514d\u6709\u5982\u4e0b\u6781\u7aef\u8bef\u89e3\uff1a 1\uff09\u5b81\u6ee5\u52ff\u7f3a\u3002\u8ba4\u4e3a\u4e00\u4e2a\u67e5\u8be2\u5c31\u9700\u8981\u5efa\u4e00\u4e2a\u7d22\u5f15\u3002 2\uff09\u5b81\u7f3a\u52ff\u6ee5\u3002\u8ba4\u4e3a\u7d22\u5f15\u4f1a\u6d88\u8017\u7a7a\u95f4\u3001\u4e25\u91cd\u62d6\u6162\u66f4\u65b0\u548c\u65b0\u589e\u901f\u5ea6\u3002 3\uff09\u62b5\u5236\u60df\u4e00\u7d22\u5f15\u3002\u8ba4\u4e3a\u4e1a\u52a1\u7684\u60df\u4e00\u6027\u4e00\u5f8b\u9700\u8981\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u201c\u5148\u67e5\u540e\u63d2\u201d\u65b9\u5f0f\u89e3\u51b3\u3002","title":"2.1.4.1 \u7d22\u5f15\u89c4\u7ea6(\u963f\u91cc\u5df4\u5df4\u534e\u5c71\u7248)"},{"location":"mysql/tips-mysql-index/#215","text":"\u3010\u5f3a\u5236\u3011\u5206\u533a\u8868\u7684\u5206\u533a\u5b57\u6bb5\uff08 partition-key \uff09\u5fc5\u987b\u6709\u7d22\u5f15\uff0c\u6216\u8005\u662f\u7ec4\u5408\u7d22\u5f15\u7684\u9996\u5217\u3002 \u3010\u5f3a\u5236\u3011\u5355\u4e2a\u5206\u533a\u8868\u4e2d\u7684\u5206\u533a\uff08\u5305\u62ec\u5b50\u5206\u533a\uff09\u4e2a\u6570\u4e0d\u80fd\u8d85\u8fc71024\u3002 \u3010\u5f3a\u5236\u3011\u4e0a\u7ebf\u524dRD\u6216\u8005DBA\u5fc5\u987b\u6307\u5b9a\u5206\u533a\u8868\u7684\u521b\u5efa\u3001\u6e05\u7406\u7b56\u7565\u3002 \u3010\u5f3a\u5236\u3011\u8bbf\u95ee\u5206\u533a\u8868\u7684SQL\u5fc5\u987b\u5305\u542b\u5206\u533a\u952e\u3002 \u3010\u5efa\u8bae\u3011\u5355\u4e2a\u5206\u533a\u6587\u4ef6\u4e0d\u8d85\u8fc72G\uff0c\u603b\u5927\u5c0f\u4e0d\u8d85\u8fc750G\u3002\u5efa\u8bae\u603b\u5206\u533a\u6570\u4e0d\u8d85\u8fc720\u4e2a\u3002 \u3010\u5f3a\u5236\u3011\u5bf9\u4e8e\u5206\u533a\u8868\u6267\u884c alter table \u64cd\u4f5c\uff0c\u5fc5\u987b\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\u6267\u884c\u3002 \u3010\u5f3a\u5236\u3011\u91c7\u7528\u5206\u5e93\u7b56\u7565\u7684\uff0c\u5e93\u7684\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc71024 \u3010\u5f3a\u5236\u3011\u91c7\u7528\u5206\u8868\u7b56\u7565\u7684\uff0c\u8868\u7684\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc74096 \u3010\u5efa\u8bae\u3011\u5355\u4e2a\u5206\u8868\u4e0d\u8d85\u8fc7500W\u884c\uff0cibd\u6587\u4ef6\u5927\u5c0f\u4e0d\u8d85\u8fc72G\uff0c\u8fd9\u6837\u624d\u80fd\u8ba9\u6570\u636e\u5206\u5e03\u5f0f\u53d8\u5f97\u6027\u80fd\u66f4\u4f73\u3002 \u3010\u5efa\u8bae\u3011\u6c34\u5e73\u5206\u8868\u5c3d\u91cf\u7528\u53d6\u6a21\u65b9\u5f0f\uff0c\u65e5\u5fd7\u3001\u62a5\u8868\u7c7b\u6570\u636e\u5efa\u8bae\u91c7\u7528\u65e5\u671f\u8fdb\u884c\u5206\u8868\u3002","title":"2.1.5 \u5206\u5e93\u5206\u8868\u3001\u5206\u533a\u8868"},{"location":"mysql/tips-mysql-index/#216","text":"\u3010\u5f3a\u5236\u3011\u6570\u636e\u5e93\u672c\u8eab\u5e93\u3001\u8868\u3001\u5217\u6240\u6709\u5b57\u7b26\u96c6\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\uff0c\u4e3a utf8 \u6216 utf8mb4 \u3002 \u3010\u5f3a\u5236\u3011\u524d\u7aef\u7a0b\u5e8f\u5b57\u7b26\u96c6\u6216\u8005\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u5b57\u7b26\u96c6\uff0c\u4e0e\u6570\u636e\u5e93\u3001\u8868\u7684\u5b57\u7b26\u96c6\u5fc5\u987b\u4e00\u81f4\uff0c\u7edf\u4e00\u4e3a utf8 \u3002","title":"2.1.6 \u5b57\u7b26\u96c6"},{"location":"mysql/tips-mysql-index/#217-dao","text":"\u3010\u5efa\u8bae\u3011\u65b0\u7684\u4ee3\u7801\u4e0d\u8981\u7528model\uff0c\u63a8\u8350\u4f7f\u7528\u624b\u52a8\u62fcSQL+\u7ed1\u5b9a\u53d8\u91cf\u4f20\u5165\u53c2\u6570\u7684\u65b9\u5f0f\u3002\u56e0\u4e3amodel\u867d\u7136\u53ef\u4ee5\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u5f0f\u64cd\u4f5cdb\uff0c\u4f46\u662f\u5176\u4f7f\u7528\u4e0d\u5f53\u5f88\u5bb9\u6613\u9020\u6210\u751f\u6210\u7684SQL\u975e\u5e38\u590d\u6742\uff0c\u4e14model\u5c42\u81ea\u5df1\u505a\u7684\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u6027\u80fd\u8f83\u5dee\uff0c\u6700\u7ec8\u5bfc\u81f4\u6570\u636e\u5e93\u6027\u80fd\u4e0b\u964d\u3002 \u3010\u5efa\u8bae\u3011\u524d\u7aef\u7a0b\u5e8f\u8fde\u63a5MySQL\u6216\u8005redis\uff0c\u5fc5\u987b\u8981\u6709\u8fde\u63a5\u8d85\u65f6\u548c\u5931\u8d25\u91cd\u8fde\u673a\u5236\uff0c\u4e14\u5931\u8d25\u91cd\u8bd5\u5fc5\u987b\u6709\u95f4\u9694\u65f6\u95f4\u3002 \u3010\u5efa\u8bae\u3011\u524d\u7aef\u7a0b\u5e8f\u62a5\u9519\u91cc\u5c3d\u91cf\u80fd\u591f\u63d0\u793aMySQL\u6216redis\u539f\u751f\u6001\u7684\u62a5\u9519\u4fe1\u606f\uff0c\u4fbf\u4e8e\u6392\u67e5\u9519\u8bef\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8e\u6709\u8fde\u63a5\u6c60\u7684\u524d\u7aef\u7a0b\u5e8f\uff0c\u5fc5\u987b\u6839\u636e\u4e1a\u52a1\u9700\u8981\u914d\u7f6e\u521d\u59cb\u3001\u6700\u5c0f\u3001\u6700\u5927\u8fde\u63a5\u6570\uff0c\u8d85\u65f6\u65f6\u95f4\u4ee5\u53ca\u8fde\u63a5\u56de\u6536\u673a\u5236\uff0c\u5426\u5219\u4f1a\u8017\u5c3d\u6570\u636e\u5e93\u8fde\u63a5\u8d44\u6e90\uff0c\u9020\u6210\u7ebf\u4e0a\u4e8b\u6545\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8elog\u6216history\u7c7b\u578b\u7684\u8868\uff0c\u968f\u65f6\u95f4\u589e\u957f\u5bb9\u6613\u8d8a\u6765\u8d8a\u5927\uff0c\u56e0\u6b64\u4e0a\u7ebf\u524dRD\u6216\u8005DBA\u5fc5\u987b\u5efa\u7acb\u8868\u6570\u636e\u6e05\u7406\u6216\u5f52\u6863\u65b9\u6848\u3002 \u3010\u5efa\u8bae\u3011\u5728\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u9636\u6bb5\uff0cRD\u5fc5\u987b\u8003\u8651\u5e76\u89c4\u907f\u6570\u636e\u5e93\u4e2d\u4e3b\u4ece\u5ef6\u8fdf\u5bf9\u4e8e\u4e1a\u52a1\u7684\u5f71\u54cd\u3002\u5c3d\u91cf\u907f\u514d\u4ece\u5e93\u77ed\u65f6\u5ef6\u8fdf\uff0820\u79d2\u4ee5\u5185\uff09\u5bf9\u4e1a\u52a1\u9020\u6210\u5f71\u54cd\uff0c\u5efa\u8bae\u5f3a\u5236\u4e00\u81f4\u6027\u7684\u8bfb\u5f00\u542f\u4e8b\u52a1\u8d70\u4e3b\u5e93\uff0c\u6216\u66f4\u65b0\u540e\u8fc7\u4e00\u6bb5\u65f6\u95f4\u518d\u53bb\u8bfb\u4ece\u5e93\u3002 \u3010\u5efa\u8bae\u3011\u591a\u4e2a\u5e76\u53d1\u4e1a\u52a1\u903b\u8f91\u8bbf\u95ee\u540c\u4e00\u5757\u6570\u636e\uff08innodb\u8868\uff09\u65f6\uff0c\u4f1a\u5728\u6570\u636e\u5e93\u7aef\u4ea7\u751f\u884c\u9501\u751a\u81f3\u8868\u9501\u5bfc\u81f4\u5e76\u53d1\u4e0b\u964d\uff0c\u56e0\u6b64\u5efa\u8bae\u66f4\u65b0\u7c7bSQL\u5c3d\u91cf\u57fa\u4e8e\u4e3b\u952e\u53bb\u66f4\u65b0\u3002 \u3010\u5efa\u8bae\u3011\u4e1a\u52a1\u903b\u8f91\u4e4b\u95f4\u52a0\u9501\u987a\u5e8f\u5c3d\u91cf\u4fdd\u6301\u4e00\u81f4\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6b7b\u9501\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8e\u5355\u8868\u8bfb\u5199\u6bd4\u5927\u4e8e10:1\u7684\u6570\u636e\u884c\u6216\u5355\u4e2a\u5217\uff0c\u53ef\u4ee5\u5c06\u70ed\u70b9\u6570\u636e\u653e\u5728\u7f13\u5b58\u91cc\uff08\u5982mecache\u6216redis\uff09\uff0c\u52a0\u5feb\u8bbf\u95ee\u901f\u5ea6\uff0c\u964d\u4f4eMySQL\u538b\u529b\u3002","title":"2.1.7 \u7a0b\u5e8f\u5c42DAO\u8bbe\u8ba1\u5efa\u8bae"},{"location":"mysql/tips-mysql-index/#218","text":"\u4e00\u4e2a\u8f83\u4e3a\u89c4\u8303\u7684\u5efa\u8868\u8bed\u53e5\u4e3a\uff1a CREATE TABLE user ( `id` bigint(11) NOT NULL AUTO_INCREMENT, `user_id` bigint(11) NOT NULL COMMENT \u2018\u7528\u6237id\u2019 `username` varchar(45) NOT NULL COMMENT '\u771f\u5b9e\u59d3\u540d', `email` varchar(30) NOT NULL COMMENT \u2018\u7528\u6237\u90ae\u7bb1\u2019, `nickname` varchar(45) NOT NULL COMMENT '\u6635\u79f0', `avatar` int(11) NOT NULL COMMENT '\u5934\u50cf', `birthday` date NOT NULL COMMENT '\u751f\u65e5', `sex` tinyint(4) DEFAULT '0' COMMENT '\u6027\u522b', `short_introduce` varchar(150) DEFAULT NULL COMMENT '\u4e00\u53e5\u8bdd\u4ecb\u7ecd\u81ea\u5df1\uff0c\u6700\u591a50\u4e2a\u6c49\u5b57', `user_resume` varchar(300) NOT NULL COMMENT '\u7528\u6237\u63d0\u4ea4\u7684\u7b80\u5386\u5b58\u653e\u5730\u5740', `user_register_ip` int NOT NULL COMMENT \u2018\u7528\u6237\u6ce8\u518c\u65f6\u7684\u6e90ip\u2019, `create_time` timestamp NOT NULL COMMENT \u2018\u7528\u6237\u8bb0\u5f55\u521b\u5efa\u7684\u65f6\u95f4\u2019, `update_time` timestamp NOT NULL COMMENT \u2018\u7528\u6237\u8d44\u6599\u4fee\u6539\u7684\u65f6\u95f4\u2019, `user_review_status` tinyint NOT NULL COMMENT \u2018\u7528\u6237\u8d44\u6599\u5ba1\u6838\u72b6\u6001\uff0c1\u4e3a\u901a\u8fc7\uff0c2\u4e3a\u5ba1\u6838\u4e2d\uff0c3\u4e3a\u672a\u901a\u8fc7\uff0c4\u4e3a\u8fd8\u672a\u63d0\u4ea4\u5ba1\u6838\u2019, PRIMARY KEY (`id`), UNIQUE KEY `idx_user_id` (`user_id`), KEY `idx_username`(`username`), KEY `idx_create_time`(`create_time`,`user_review_status`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='\u7f51\u7ad9\u7528\u6237\u57fa\u672c\u4fe1\u606f';","title":"2.1.8  \u4e00\u4e2a\u89c4\u8303\u7684\u5efa\u8868\u8bed\u53e5\u793a\u4f8b"},{"location":"mysql/tips-mysql-index/#219-orm","text":"\u3010\u5f3a\u5236\u3011\u5728\u8868\u67e5\u8be2\u4e2d\uff0c\u4e00\u5f8b\u4e0d\u8981\u4f7f\u7528 * \u4f5c\u4e3a\u67e5\u8be2\u7684\u5b57\u6bb5\u5217\u8868\uff0c\u9700\u8981\u54ea\u4e9b\u5b57\u6bb5\u5fc5\u987b\u660e\u786e\u5199\u660e\u3002 \u8bf4\u660e \uff1a1\uff09\u589e\u52a0\u67e5\u8be2\u5206\u6790\u5668\u89e3\u6790\u6210\u672c\u30022\uff09\u589e\u51cf\u5b57\u6bb5\u5bb9\u6613\u4e0eresultMap\u914d\u7f6e\u4e0d\u4e00\u81f4\u3002 \u3010\u5f3a\u5236\u3011POJO\u7c7b\u7684\u5e03\u5c14\u5c5e\u6027\u4e0d\u80fd\u52a0is\uff0c\u800c\u6570\u636e\u5e93\u5b57\u6bb5\u5fc5\u987b\u52a0is_\uff0c\u8981\u6c42\u5728resultMap\u4e2d\u8fdb\u884c\u5b57\u6bb5\u4e0e\u5c5e\u6027\u4e4b\u95f4\u7684\u6620\u5c04\u3002 \u8bf4\u660e \uff1a\u53c2\u89c1\u5b9a\u4e49POJO\u7c7b\u4ee5\u53ca\u6570\u636e\u5e93\u5b57\u6bb5\u5b9a\u4e49\u89c4\u5b9a\uff0c\u5728 \u4e2d\u589e\u52a0\u6620\u5c04\uff0c\u662f\u5fc5\u987b\u7684\u3002\u5728MyBatis Generator\u751f\u6210\u7684\u4ee3\u7801\u4e2d\uff0c\u9700\u8981\u8fdb\u884c\u5bf9\u5e94\u7684\u4fee\u6539\u3002 \u3010\u5f3a\u5236\u3011\u4e0d\u8981\u7528resultClass\u5f53\u8fd4\u56de\u53c2\u6570\uff0c\u5373\u4f7f\u6240\u6709\u7c7b\u5c5e\u6027\u540d\u4e0e\u6570\u636e\u5e93\u5b57\u6bb5\u4e00\u4e00\u5bf9\u5e94\uff0c\u4e5f\u9700\u8981\u5b9a\u4e49\uff1b\u53cd\u8fc7\u6765\uff0c\u6bcf\u4e00\u4e2a\u8868\u4e5f\u5fc5\u7136\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5bf9\u5e94\u3002 \u8bf4\u660e \uff1a\u914d\u7f6e\u6620\u5c04\u5173\u7cfb\uff0c\u4f7f\u5b57\u6bb5\u4e0eDO\u7c7b\u89e3\u8026\uff0c\u65b9\u4fbf\u7ef4\u62a4\u3002 \u3010\u5f3a\u5236\u3011sql.xml\u914d\u7f6e\u53c2\u6570\u4f7f\u7528\uff1a#{}\uff0c#param# \u4e0d\u8981\u4f7f\u7528${} \u6b64\u79cd\u65b9\u5f0f\u5bb9\u6613\u51fa\u73b0SQL\u6ce8\u5165\u3002 \u3010\u5f3a\u5236\u3011iBATIS\u81ea\u5e26\u7684queryForList(String statementName,int start,int size)\u4e0d\u63a8\u8350\u4f7f\u7528\u3002 \u8bf4\u660e \uff1a\u5176\u5b9e\u73b0\u65b9\u5f0f\u662f\u5728\u6570\u636e\u5e93\u53d6\u5230statementName\u5bf9\u5e94\u7684SQL\u8bed\u53e5\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u518d\u901a\u8fc7subList\u53d6start,size\u7684\u5b50\u96c6\u5408\u3002 \u6b63\u4f8b \uff1a Map<String, Object> map = new HashMap<String, Object>(); map.put(\"start\", start); map.put(\"size\", size); \u3010\u5f3a\u5236\u3011\u4e0d\u5141\u8bb8\u76f4\u63a5\u62ffHashMap\u4e0eHashtable\u4f5c\u4e3a\u67e5\u8be2\u7ed3\u679c\u96c6\u7684\u8f93\u51fa\u3002 \u8bf4\u660e \uff1aresultClass=\u201dHashtable\u201d\uff0c\u4f1a\u7f6e\u5165\u5b57\u6bb5\u540d\u548c\u5c5e\u6027\u503c\uff0c\u4f46\u662f\u503c\u7684\u7c7b\u578b\u4e0d\u53ef\u63a7\u3002 \u3010\u5f3a\u5236\u3011\u66f4\u65b0\u6570\u636e\u8868\u8bb0\u5f55\u65f6\uff0c\u5fc5\u987b\u540c\u65f6\u66f4\u65b0\u8bb0\u5f55\u5bf9\u5e94\u7684gmt_modified\u5b57\u6bb5\u503c\u4e3a\u5f53\u524d\u65f6\u95f4\u3002 \u3010\u63a8\u8350\u3011\u4e0d\u8981\u5199\u4e00\u4e2a\u5927\u800c\u5168\u7684\u6570\u636e\u66f4\u65b0\u63a5\u53e3\u3002\u4f20\u5165\u4e3aPOJO\u7c7b\uff0c\u4e0d\u7ba1\u662f\u4e0d\u662f\u81ea\u5df1\u7684\u76ee\u6807\u66f4\u65b0\u5b57\u6bb5\uff0c\u90fd\u8fdb\u884cupdate table set c1=value1,c2=value2,c3=value3; \u8fd9\u662f\u4e0d\u5bf9\u7684\u3002\u6267\u884cSQL\u65f6\uff0c\u4e0d\u8981\u66f4\u65b0\u65e0\u6539\u52a8\u7684\u5b57\u6bb5\uff0c\u4e00\u662f\u6613\u51fa\u9519\uff1b\u4e8c\u662f\u6548\u7387\u4f4e\uff1b\u4e09\u662f\u589e\u52a0binlog\u5b58\u50a8\u3002 \u3010\u53c2\u8003\u3011 @Transactional \u4e8b\u52a1\u4e0d\u8981\u6ee5\u7528\u3002\u4e8b\u52a1\u4f1a\u5f71\u54cd\u6570\u636e\u5e93\u7684QPS\uff0c\u53e6\u5916\u4f7f\u7528\u4e8b\u52a1\u7684\u5730\u65b9\u9700\u8981\u8003\u8651\u5404\u65b9\u9762\u7684\u56de\u6eda\u65b9\u6848\uff0c\u5305\u62ec\u7f13\u5b58\u56de\u6eda\u3001\u641c\u7d22\u5f15\u64ce\u56de\u6eda\u3001\u6d88\u606f\u8865\u507f\u3001\u7edf\u8ba1\u4fee\u6b63\u7b49\u3002 \u3010\u53c2\u8003\u3011 <isEqual> \u4e2d\u7684compareValue\u662f\u4e0e\u5c5e\u6027\u503c\u5bf9\u6bd4\u7684\u5e38\u91cf\uff0c\u4e00\u822c\u662f\u6570\u5b57\uff0c\u8868\u793a\u76f8\u7b49\u65f6\u5e26\u4e0a\u6b64\u6761\u4ef6\uff1b <isNotEmpty> \u8868\u793a\u4e0d\u4e3a\u7a7a\u4e14\u4e0d\u4e3anull\u65f6\u6267\u884c\uff1b <isNotNull> \u8868\u793a\u4e0d\u4e3anull\u503c\u65f6\u6267\u884c\u3002","title":"2.1.9 ORM\u6620\u5c04(\u963f\u91cc\u5df4\u5df4\u534e\u5c71\u7248)"},{"location":"mysql/tips-mysql-index/#22-sql","text":"","title":"2.2 SQL\u7f16\u5199"},{"location":"mysql/tips-mysql-index/#221-dml","text":"\u3010\u5f3a\u5236\u3011SELECT\u8bed\u53e5\u5fc5\u987b\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5\u540d\u79f0\uff0c\u7981\u6b62\u5199\u6210 * \u3002\u56e0\u4e3a select * \u4f1a\u5c06\u4e0d\u8be5\u8bfb\u7684\u6570\u636e\u4e5f\u4eceMySQL\u91cc\u8bfb\u51fa\u6765\uff0c\u9020\u6210\u7f51\u5361\u538b\u529b\u3002\u4e14\u8868\u5b57\u6bb5\u4e00\u65e6\u66f4\u65b0\uff0c\u4f46model\u5c42\u6ca1\u6709\u6765\u5f97\u53ca\u66f4\u65b0\u7684\u8bdd\uff0c\u7cfb\u7edf\u4f1a\u62a5\u9519\u3002 \u3010\u5f3a\u5236\u3011insert\u8bed\u53e5\u6307\u5b9a\u5177\u4f53\u5b57\u6bb5\u540d\u79f0\uff0c\u4e0d\u8981\u5199\u6210 insert into t1 values(\u2026) \uff0c\u9053\u7406\u540c\u4e0a\u3002 \u3010\u5efa\u8bae\u3011 insert into\u2026values(XX),(XX),(XX)\u2026 \u3002\u8fd9\u91ccXX\u7684\u503c\u4e0d\u8981\u8d85\u8fc75000\u4e2a\u3002\u503c\u8fc7\u591a\u867d\u7136\u4e0a\u7ebf\u5f88\u5f88\u5feb\uff0c\u4f46\u4f1a\u5f15\u8d77\u4e3b\u4ece\u540c\u6b65\u5ef6\u8fdf\u3002 \u3010\u5efa\u8bae\u3011SELECT\u8bed\u53e5\u4e0d\u8981\u4f7f\u7528 UNION \uff0c\u63a8\u8350\u4f7f\u7528 UNION ALL \uff0c\u5e76\u4e14 UNION \u5b50\u53e5\u4e2a\u6570\u9650\u5236\u57285\u4e2a\u4ee5\u5185\u3002\u56e0\u4e3a union all \u4e0d\u9700\u8981\u53bb\u91cd\uff0c\u8282\u7701\u6570\u636e\u5e93\u8d44\u6e90\uff0c\u63d0\u9ad8\u6027\u80fd\u3002 \u3010\u5efa\u8bae\u3011in\u503c\u5217\u8868\u9650\u5236\u5728500\u4ee5\u5185\u3002\u4f8b\u5982 select\u2026 where userid in(\u2026.500\u4e2a\u4ee5\u5185\u2026) \uff0c\u8fd9\u4e48\u505a\u662f\u4e3a\u4e86\u51cf\u5c11\u5e95\u5c42\u626b\u63cf\uff0c\u51cf\u8f7b\u6570\u636e\u5e93\u538b\u529b\u4ece\u800c\u52a0\u901f\u67e5\u8be2\u3002 \u3010\u5efa\u8bae\u3011\u4e8b\u52a1\u91cc\u6279\u91cf\u66f4\u65b0\u6570\u636e\u9700\u8981\u63a7\u5236\u6570\u91cf\uff0c\u8fdb\u884c\u5fc5\u8981\u7684sleep\uff0c\u505a\u5230\u5c11\u91cf\u591a\u6b21\u3002 \u3010\u5f3a\u5236\u3011\u4e8b\u52a1\u6d89\u53ca\u7684\u8868\u5fc5\u987b\u5168\u90e8\u662finnodb\u8868\u3002\u5426\u5219\u4e00\u65e6\u5931\u8d25\u4e0d\u4f1a\u5168\u90e8\u56de\u6eda\uff0c\u4e14\u6613\u9020\u6210\u4e3b\u4ece\u5e93\u540c\u6b65\u7ec8\u7aef\u3002 \u3010\u5f3a\u5236\u3011\u5199\u5165\u548c\u4e8b\u52a1\u53d1\u5f80\u4e3b\u5e93\uff0c\u53ea\u8bfbSQL\u53d1\u5f80\u4ece\u5e93\u3002 \u3010\u5f3a\u5236\u3011\u9664\u9759\u6001\u8868\u6216\u5c0f\u8868\uff08100\u884c\u4ee5\u5185\uff09\uff0cDML\u8bed\u53e5\u5fc5\u987b\u6709where\u6761\u4ef6\uff0c\u4e14\u4f7f\u7528\u7d22\u5f15\u67e5\u627e\u3002 \u3010\u5f3a\u5236\u3011\u751f\u4ea7\u73af\u5883\u7981\u6b62\u4f7f\u7528 hint \uff0c\u5982 sql_no_cache \uff0c force index \uff0c ignore key \uff0c straight join \u7b49\u3002\u56e0\u4e3a hint \u662f\u7528\u6765\u5f3a\u5236SQL\u6309\u7167\u67d0\u4e2a\u6267\u884c\u8ba1\u5212\u6765\u6267\u884c\uff0c\u4f46\u968f\u7740\u6570\u636e\u91cf\u53d8\u5316\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1\u81ea\u5df1\u5f53\u521d\u7684\u9884\u5224\u662f\u6b63\u786e\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u76f8\u4fe1MySQL\u4f18\u5316\u5668\uff01 \u3010\u5f3a\u5236\u3011where\u6761\u4ef6\u91cc\u7b49\u53f7\u5de6\u53f3\u5b57\u6bb5\u7c7b\u578b\u5fc5\u987b\u4e00\u81f4\uff0c\u5426\u5219\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u3002 \u3010\u5efa\u8bae\u3011 SELECT|UPDATE|DELETE|REPLACE \u8981\u6709WHERE\u5b50\u53e5\uff0c\u4e14WHERE\u5b50\u53e5\u7684\u6761\u4ef6\u5fc5\u9700\u4f7f\u7528\u7d22\u5f15\u67e5\u627e\u3002 \u3010\u5f3a\u5236\u3011\u751f\u4ea7\u6570\u636e\u5e93\u4e2d\u5f3a\u70c8\u4e0d\u63a8\u8350\u5927\u8868\u4e0a\u53d1\u751f\u5168\u8868\u626b\u63cf\uff0c\u4f46\u5bf9\u4e8e100\u884c\u4ee5\u4e0b\u7684\u9759\u6001\u8868\u53ef\u4ee5\u5168\u8868\u626b\u63cf\u3002\u67e5\u8be2\u6570\u636e\u91cf\u4e0d\u8981\u8d85\u8fc7\u8868\u884c\u6570\u768425%\uff0c\u5426\u5219\u4e0d\u4f1a\u5229\u7528\u7d22\u5f15\u3002 \u3010\u5f3a\u5236\u3011WHERE \u5b50\u53e5\u4e2d\u7981\u6b62\u53ea\u4f7f\u7528\u5168\u6a21\u7cca\u7684LIKE\u6761\u4ef6\u8fdb\u884c\u67e5\u627e\uff0c\u5fc5\u987b\u6709\u5176\u4ed6\u7b49\u503c\u6216\u8303\u56f4\u67e5\u8be2\u6761\u4ef6\uff0c\u5426\u5219\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u3002 \u3010\u5efa\u8bae\u3011\u7d22\u5f15\u5217\u4e0d\u8981\u4f7f\u7528\u51fd\u6570\u6216\u8868\u8fbe\u5f0f\uff0c\u5426\u5219\u65e0\u6cd5\u5229\u7528\u7d22\u5f15\u3002\u5982 where length(name)='Admin' \u6216 where user_id+2=10023 \u3002 \u3010\u5efa\u8bae\u3011\u51cf\u5c11\u4f7f\u7528or\u8bed\u53e5\uff0c\u53ef\u5c06or\u8bed\u53e5\u4f18\u5316\u4e3aunion\uff0c\u7136\u540e\u5728\u5404\u4e2awhere\u6761\u4ef6\u4e0a\u5efa\u7acb\u7d22\u5f15\u3002\u5982 where a=1 or b=2 \u4f18\u5316\u4e3a where a=1\u2026 union \u2026where b=2, key(a),key(b) \u3002 \u3010\u5efa\u8bae\u3011\u5206\u9875\u67e5\u8be2\uff0c\u5f53limit\u8d77\u70b9\u8f83\u9ad8\u65f6\uff0c\u53ef\u5148\u7528\u8fc7\u6ee4\u6761\u4ef6\u8fdb\u884c\u8fc7\u6ee4\u3002\u5982 select a,b,c from t1 limit 10000,20; \u4f18\u5316\u4e3a: select a,b,c from t1 where id>10000 limit 20; \u3002","title":"2.2.1 DML\u8bed\u53e5"},{"location":"mysql/tips-mysql-index/#222","text":"\u3010\u5f3a\u5236\u3011\u7981\u6b62\u8de8db\u7684join\u8bed\u53e5\u3002\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u6a21\u5757\u95f4\u8026\u5408\uff0c\u4e3a\u6570\u636e\u5e93\u62c6\u5206\u5960\u5b9a\u575a\u5b9e\u57fa\u7840\u3002 \u3010\u5f3a\u5236\u3011\u7981\u6b62\u5728\u4e1a\u52a1\u7684\u66f4\u65b0\u7c7bSQL\u8bed\u53e5\u4e2d\u4f7f\u7528join\uff0c\u6bd4\u5982 update t1 join t2\u2026 \u3002 \u3010\u5efa\u8bae\u3011\u4e0d\u5efa\u8bae\u4f7f\u7528\u5b50\u67e5\u8be2\uff0c\u5efa\u8bae\u5c06\u5b50\u67e5\u8be2SQL\u62c6\u5f00\u7ed3\u5408\u7a0b\u5e8f\u591a\u6b21\u67e5\u8be2\uff0c\u6216\u4f7f\u7528join\u6765\u4ee3\u66ff\u5b50\u67e5\u8be2\u3002 \u3010\u5efa\u8bae\u3011\u7ebf\u4e0a\u73af\u5883\uff0c\u591a\u8868join\u4e0d\u8981\u8d85\u8fc73\u4e2a\u8868\u3002 \u3010\u5efa\u8bae\u3011\u591a\u8868\u8fde\u63a5\u67e5\u8be2\u63a8\u8350\u4f7f\u7528\u522b\u540d\uff0c\u4e14SELECT\u5217\u8868\u4e2d\u8981\u7528\u522b\u540d\u5f15\u7528\u5b57\u6bb5\uff0c\u6570\u636e\u5e93.\u8868\u683c\u5f0f\uff0c\u5982 select a from db1.table1 alias1 where \u2026 \u3002 \u3010\u5efa\u8bae\u3011\u5728\u591a\u8868join\u4e2d\uff0c\u5c3d\u91cf\u9009\u53d6\u7ed3\u679c\u96c6\u8f83\u5c0f\u7684\u8868\u4f5c\u4e3a\u9a71\u52a8\u8868\uff0c\u6765join\u5176\u4ed6\u8868\u3002","title":"2.2.2 \u591a\u8868\u8fde\u63a5"},{"location":"mysql/tips-mysql-index/#223","text":"\u3010\u5efa\u8bae\u3011\u4e8b\u52a1\u4e2d INSERT|UPDATE|DELETE|REPLACE \u8bed\u53e5\u64cd\u4f5c\u7684\u884c\u6570\u63a7\u5236\u57282000\u4ee5\u5185\uff0c\u4ee5\u53caWHERE\u5b50\u53e5\u4e2dIN\u5217\u8868\u7684\u4f20\u53c2\u4e2a\u6570\u63a7\u5236\u5728500\u4ee5\u5185\u3002 \u3010\u5efa\u8bae\u3011\u6279\u91cf\u64cd\u4f5c\u6570\u636e\u65f6\uff0c\u9700\u8981\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u95f4\u9694\u65f6\u95f4\uff0c\u8fdb\u884c\u5fc5\u8981\u7684sleep\uff0c\u4e00\u822c\u5efa\u8bae\u503c5-10\u79d2\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8e\u6709 auto_increment \u5c5e\u6027\u5b57\u6bb5\u7684\u8868\u7684\u63d2\u5165\u64cd\u4f5c\uff0c\u5e76\u53d1\u9700\u8981\u63a7\u5236\u5728200\u4ee5\u5185\u3002 \u3010\u5f3a\u5236\u3011\u7a0b\u5e8f\u8bbe\u8ba1\u5fc5\u987b\u8003\u8651\u201c\u6570\u636e\u5e93\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u201d\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u5305\u62ec\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u548c\u5e7b\u8bfb\u3002\u7ebf\u4e0a\u5efa\u8bae\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u4e3a repeatable-read \u3002 \u3010\u5efa\u8bae\u3011\u4e8b\u52a1\u91cc\u5305\u542bSQL\u4e0d\u8d85\u8fc75\u4e2a\uff08\u652f\u4ed8\u4e1a\u52a1\u9664\u5916\uff09\u3002\u56e0\u4e3a\u8fc7\u957f\u7684\u4e8b\u52a1\u4f1a\u5bfc\u81f4\u9501\u6570\u636e\u8f83\u4e45\uff0cMySQL\u5185\u90e8\u7f13\u5b58\u3001\u8fde\u63a5\u6d88\u8017\u8fc7\u591a\u7b49\u96ea\u5d29\u95ee\u9898\u3002 \u3010\u5efa\u8bae\u3011\u4e8b\u52a1\u91cc\u66f4\u65b0\u8bed\u53e5\u5c3d\u91cf\u57fa\u4e8e\u4e3b\u952e\u6216 unique key \uff0c\u5982 update \u2026 where id=XX ; \u5426\u5219\u4f1a\u4ea7\u751f\u95f4\u9699\u9501\uff0c\u5185\u90e8\u6269\u5927\u9501\u5b9a\u8303\u56f4\uff0c\u5bfc\u81f4\u7cfb\u7edf\u6027\u80fd\u4e0b\u964d\uff0c\u4ea7\u751f\u6b7b\u9501\u3002 \u3010\u5efa\u8bae\u3011\u5c3d\u91cf\u628a\u4e00\u4e9b\u5178\u578b\u5916\u90e8\u8c03\u7528\u79fb\u51fa\u4e8b\u52a1\uff0c\u5982\u8c03\u7528webservice\uff0c\u8bbf\u95ee\u6587\u4ef6\u5b58\u50a8\u7b49\uff0c\u4ece\u800c\u907f\u514d\u4e8b\u52a1\u8fc7\u957f\u3002 \u3010\u5efa\u8bae\u3011\u5bf9\u4e8eMySQL\u4e3b\u4ece\u5ef6\u8fdf\u4e25\u683c\u654f\u611f\u7684select\u8bed\u53e5\uff0c\u8bf7\u5f00\u542f\u4e8b\u52a1\u5f3a\u5236\u8bbf\u95ee\u4e3b\u5e93\u3002","title":"2.2.3 \u4e8b\u52a1"},{"location":"mysql/tips-mysql-index/#224","text":"\u3010\u5efa\u8bae\u3011\u51cf\u5c11\u4f7f\u7528 order by \uff0c\u548c\u4e1a\u52a1\u6c9f\u901a\u80fd\u4e0d\u6392\u5e8f\u5c31\u4e0d\u6392\u5e8f\uff0c\u6216\u5c06\u6392\u5e8f\u653e\u5230\u7a0b\u5e8f\u7aef\u53bb\u505a\u3002 order by \u3001 group by \u3001 distinct \u8fd9\u4e9b\u8bed\u53e5\u8f83\u4e3a\u8017\u8d39CPU\uff0c\u6570\u636e\u5e93\u7684CPU\u8d44\u6e90\u662f\u6781\u5176\u5b9d\u8d35\u7684\u3002 \u3010\u5efa\u8bae\u3011 order by \u3001 group by \u3001 distinct \u8fd9\u4e9bSQL\u5c3d\u91cf\u5229\u7528\u7d22\u5f15\u76f4\u63a5\u68c0\u7d22\u51fa\u6392\u5e8f\u597d\u7684\u6570\u636e\u3002\u5982 where a=1 order by b \u53ef\u4ee5\u5229\u7528 key(a,b) \u3002 \u3010\u5efa\u8bae\u3011\u5305\u542b\u4e86 order by \u3001 group by \u3001 distinct \u8fd9\u4e9b\u67e5\u8be2\u7684\u8bed\u53e5\uff0cwhere\u6761\u4ef6\u8fc7\u6ee4\u51fa\u6765\u7684\u7ed3\u679c\u96c6\u8bf7\u4fdd\u6301\u57281000\u884c\u4ee5\u5185\uff0c\u5426\u5219SQL\u4f1a\u5f88\u6162\u3002","title":"2.2.4 \u6392\u5e8f\u548c\u5206\u7ec4"},{"location":"mysql/tips-mysql-index/#225-sql","text":"\u3010\u9ad8\u5371\u3011\u7981\u7528 update|delete t1 \u2026 where a=XX limit XX; \u8fd9\u79cd\u5e26limit\u7684\u66f4\u65b0\u8bed\u53e5\u3002\u56e0\u4e3a\u4f1a\u5bfc\u81f4\u4e3b\u4ece\u4e0d\u4e00\u81f4\uff0c\u5bfc\u81f4\u6570\u636e\u9519\u4e71\u3002\u5efa\u8bae\u52a0\u4e0a order by PK \u3002 \u3010\u9ad8\u5371\u3011\u7981\u6b62\u4f7f\u7528\u5173\u8054\u5b50\u67e5\u8be2\uff0c\u5982 update t1 set \u2026 where name in(select name from user where\u2026); \u6548\u7387\u6781\u5176\u4f4e\u4e0b\u3002 \u3010\u5f3a\u5236\u3011\u7981\u7528procedure\u3001function\u3001trigger\u3001views\u3001event\u3001\u5916\u952e\u7ea6\u675f\u3002\u56e0\u4e3a\u4ed6\u4eec\u6d88\u8017\u6570\u636e\u5e93\u8d44\u6e90\uff0c\u964d\u4f4e\u6570\u636e\u5e93\u5b9e\u4f8b\u53ef\u6269\u5c55\u6027\u3002\u63a8\u8350\u90fd\u5728\u7a0b\u5e8f\u7aef\u5b9e\u73b0\u3002 \u3010\u5f3a\u5236\u3011\u7981\u7528 insert into \u2026on duplicate key update\u2026 \u5728\u9ad8\u5e76\u53d1\u73af\u5883\u4e0b\uff0c\u4f1a\u9020\u6210\u4e3b\u4ece\u4e0d\u4e00\u81f4\u3002 \u3010\u5f3a\u5236\u3011\u7981\u6b62\u8054\u8868\u66f4\u65b0\u8bed\u53e5\uff0c\u5982 update t1,t2 where t1.id=t2.id\u2026 \u3002","title":"2.2.5 \u7ebf\u4e0a\u7981\u6b62\u4f7f\u7528\u7684SQL\u8bed\u53e5"},{"location":"mysql/tips-mysql-index/#226-sql","text":"\u3010\u5f3a\u5236\u3011\u4e0d\u8981\u4f7f\u7528count(\u5217\u540d)\u6216count(\u5e38\u91cf)\u6765\u66ff\u4ee3count( )\uff0ccount( )\u662fSQL92\u5b9a\u4e49\u7684\u6807\u51c6\u7edf\u8ba1\u884c\u6570\u7684\u8bed\u6cd5\uff0c\u8ddf\u6570\u636e\u5e93\u65e0\u5173\uff0c\u8ddfNULL\u548c\u975eNULL\u65e0\u5173\u3002 \u8bf4\u660e \uff1acount(*)\u4f1a\u7edf\u8ba1\u503c\u4e3aNULL\u7684\u884c\uff0c\u800ccount(\u5217\u540d)\u4e0d\u4f1a\u7edf\u8ba1\u6b64\u5217\u4e3aNULL\u503c\u7684\u884c\u3002 \u3010\u5f3a\u5236\u3011count(distinct col) \u8ba1\u7b97\u8be5\u5217\u9664NULL\u4e4b\u5916\u7684\u4e0d\u91cd\u590d\u884c\u6570\uff0c\u6ce8\u610f count(distinct col1, col2) \u5982\u679c\u5176\u4e2d\u4e00\u5217\u5168\u4e3aNULL\uff0c\u90a3\u4e48\u5373\u4f7f\u53e6\u4e00\u5217\u6709\u4e0d\u540c\u7684\u503c\uff0c\u4e5f\u8fd4\u56de\u4e3a0\u3002 \u3010\u5f3a\u5236\u3011\u5f53\u67d0\u4e00\u5217\u7684\u503c\u5168\u662fNULL\u65f6\uff0ccount(col)\u7684\u8fd4\u56de\u7ed3\u679c\u4e3a0\uff0c\u4f46sum(col)\u7684\u8fd4\u56de\u7ed3\u679c\u4e3aNULL\uff0c\u56e0\u6b64\u4f7f\u7528sum()\u65f6\u9700\u6ce8\u610fNPE\u95ee\u9898\u3002 \u6b63\u4f8b \uff1a\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u6765\u907f\u514dsum\u7684NPE\u95ee\u9898\uff1a SELECT IF(ISNULL(SUM(g)),0,SUM(g)) FROM table; \u3010\u5f3a\u5236\u3011\u4f7f\u7528 ISNULL() \u6765\u5224\u65ad\u662f\u5426\u4e3aNULL\u503c\u3002 \u8bf4\u660e\uff1aNULL\u4e0e\u4efb\u4f55\u503c\u7684\u76f4\u63a5\u6bd4\u8f83\u90fd\u4e3aNULL\u3002 1\uff09 NULL<>NULL \u7684\u8fd4\u56de\u7ed3\u679c\u662fNULL\uff0c\u800c\u4e0d\u662f false \u3002 2\uff09 NULL=NULL \u7684\u8fd4\u56de\u7ed3\u679c\u662fNULL\uff0c\u800c\u4e0d\u662f true \u3002 3\uff09 NULL<>1 \u7684\u8fd4\u56de\u7ed3\u679c\u662fNULL\uff0c\u800c\u4e0d\u662f true \u3002 \u3010\u5f3a\u5236\u3011 \u5728\u4ee3\u7801\u4e2d\u5199\u5206\u9875\u67e5\u8be2\u903b\u8f91\u65f6\uff0c\u82e5count\u4e3a0\u5e94\u76f4\u63a5\u8fd4\u56de\uff0c\u907f\u514d\u6267\u884c\u540e\u9762\u7684\u5206\u9875\u8bed\u53e5\u3002 \u3010\u5f3a\u5236\u3011\u4e0d\u5f97\u4f7f\u7528\u5916\u952e\u4e0e\u7ea7\u8054\uff0c\u4e00\u5207\u5916\u952e\u6982\u5ff5\u5fc5\u987b\u5728\u5e94\u7528\u5c42\u89e3\u51b3\u3002 \u8bf4\u660e \uff1a\u4ee5\u5b66\u751f\u548c\u6210\u7ee9\u7684\u5173\u7cfb\u4e3a\u4f8b\uff0c\u5b66\u751f\u8868\u4e2d\u7684student_id\u662f\u4e3b\u952e\uff0c\u90a3\u4e48\u6210\u7ee9\u8868\u4e2d\u7684student_id\u5219\u4e3a\u5916\u952e\u3002\u5982\u679c\u66f4\u65b0\u5b66\u751f\u8868\u4e2d\u7684student_id\uff0c\u540c\u65f6\u89e6\u53d1\u6210\u7ee9\u8868\u4e2d\u7684student_id\u66f4\u65b0\uff0c\u5373\u4e3a\u7ea7\u8054\u66f4\u65b0\u3002\u5916\u952e\u4e0e\u7ea7\u8054\u66f4\u65b0\u9002\u7528\u4e8e\u5355\u673a\u4f4e\u5e76\u53d1\uff0c\u4e0d\u9002\u5408\u5206\u5e03\u5f0f\u3001\u9ad8\u5e76\u53d1\u96c6\u7fa4\uff1b\u7ea7\u8054\u66f4\u65b0\u662f\u5f3a\u963b\u585e\uff0c\u5b58\u5728\u6570\u636e\u5e93\u66f4\u65b0\u98ce\u66b4\u7684\u98ce\u9669\uff1b\u5916\u952e\u5f71\u54cd\u6570\u636e\u5e93\u7684\u63d2\u5165\u901f\u5ea6\u3002 \u3010\u5f3a\u5236\u3011\u7981\u6b62\u4f7f\u7528\u5b58\u50a8\u8fc7\u7a0b\uff0c\u5b58\u50a8\u8fc7\u7a0b\u96be\u4ee5\u8c03\u8bd5\u548c\u6269\u5c55\uff0c\u66f4\u6ca1\u6709\u79fb\u690d\u6027\u3002 \u3010\u5f3a\u5236\u3011\u6570\u636e\u8ba2\u6b63\uff08\u7279\u522b\u662f\u5220\u9664\u3001\u4fee\u6539\u8bb0\u5f55\u64cd\u4f5c\uff09\u65f6\uff0c\u8981\u5148select\uff0c\u907f\u514d\u51fa\u73b0\u8bef\u5220\u9664\uff0c\u786e\u8ba4\u65e0\u8bef\u624d\u80fd\u6267\u884c\u66f4\u65b0\u8bed\u53e5\u3002 \u3010\u63a8\u8350\u3011in\u64cd\u4f5c\u80fd\u907f\u514d\u5219\u907f\u514d\uff0c\u82e5\u5b9e\u5728\u907f\u514d\u4e0d\u4e86\uff0c\u9700\u8981\u4ed4\u7ec6\u8bc4\u4f30in\u540e\u8fb9\u7684\u96c6\u5408\u5143\u7d20\u6570\u91cf\uff0c\u63a7\u5236\u57281000\u4e2a\u4e4b\u5185\u3002 \u3010\u53c2\u8003\u3011\u5982\u679c\u6709\u5168\u7403\u5316\u9700\u8981\uff0c\u6240\u6709\u7684\u5b57\u7b26\u5b58\u50a8\u4e0e\u8868\u793a\uff0c\u5747\u4ee5utf-8\u7f16\u7801\uff0c\u6ce8\u610f\u5b57\u7b26\u7edf\u8ba1\u51fd\u6570\u7684\u533a\u522b\u3002 \u8bf4\u660e \uff1a SELECT LENGTH(\"\u8f7b\u677e\u5de5\u4f5c\")\uff1b \u8fd4\u56de\u4e3a12 SELECT CHARACTER_LENGTH(\"\u8f7b\u677e\u5de5\u4f5c\")\uff1b \u8fd4\u56de\u4e3a4 \u5982\u679c\u9700\u8981\u5b58\u50a8\u8868\u60c5\uff0c\u90a3\u4e48\u9009\u62e9utf8mb4\u6765\u8fdb\u884c\u5b58\u50a8\uff0c\u6ce8\u610f\u5b83\u4e0eutf-8\u7f16\u7801\u7684\u533a\u522b\u3002 11. \u3010\u53c2\u8003\u3011 TRUNCATE TABLE \u6bd4 DELETE \u901f\u5ea6\u5feb\uff0c\u4e14\u4f7f\u7528\u7684\u7cfb\u7edf\u548c\u4e8b\u52a1\u65e5\u5fd7\u8d44\u6e90\u5c11\uff0c\u4f46TRUNCATE\u65e0\u4e8b\u52a1\u4e14\u4e0d\u89e6\u53d1trigger\uff0c\u6709\u53ef\u80fd\u9020\u6210\u4e8b\u6545\uff0c\u6545\u4e0d\u5efa\u8bae\u5728\u5f00\u53d1\u4ee3\u7801\u4e2d\u4f7f\u7528\u6b64\u8bed\u53e5\u3002 \u8bf4\u660e \uff1aTRUNCATE TABLE \u5728\u529f\u80fd\u4e0a\u4e0e\u4e0d\u5e26 WHERE \u5b50\u53e5\u7684 DELETE \u8bed\u53e5\u76f8\u540c\u3002","title":"2.2.6 SQL\u8bed\u53e5(\u963f\u91cc\u5df4\u5df4\u534e\u5c71\u7248)"},{"location":"mysql/tips-mysql-index/#3","text":"Archery MySQL \u6570\u636e\u5e93\u8bbe\u8ba1\u89c4\u8303 \u5982\u4f55\u7528\u4e00\u6b3e\u5c0f\u5de5\u5177\u5927\u5927\u52a0\u901fMySQL SQL\u8bed\u53e5\u4f18\u5316 \u963f\u91cc\u5df4\u5df4Java\u5f00\u53d1\u624b\u518c\uff08\u534e\u5c71\u7248\uff09","title":"3. \u53c2\u8003\u8d44\u6599"}]}